var ra=Object.defineProperty;var n=(O,_)=>ra(O,"name",{value:_,configurable:!0});import{c as Fr,a as ae,S as Rn,b as ia,u as oa,$ as rn,d as ji,g as Zi,e as sa,f as Xi,o as aa,i as Ve,h as fa,M as Sr,F as Yi,j as ua,t as ze,k as ca,l as la}from"./index.js";function ha(O,_){for(var w=0;w<_.length;w++){const v=_[w];if(typeof v!="string"&&!Array.isArray(v)){for(const y in v)if(y!=="default"&&!(y in O)){const m=Object.getOwnPropertyDescriptor(v,y);m&&Object.defineProperty(O,y,m.get?m:{enumerable:!0,get:()=>v[y]})}}}return Object.freeze(Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}))}n(ha,"_mergeNamespaces");var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function da(O){return O&&O.__esModule&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O}n(da,"getDefaultExportFromCjs");var xr={exports:{}},vn=typeof Reflect=="object"?Reflect:null,Bi=vn&&typeof vn.apply=="function"?vn.apply:n(function(_,w,v){return Function.prototype.apply.call(_,w,v)},"ReflectApply"),Jn;vn&&typeof vn.ownKeys=="function"?Jn=vn.ownKeys:Object.getOwnPropertySymbols?Jn=n(function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))},"ReflectOwnKeys"):Jn=n(function(_){return Object.getOwnPropertyNames(_)},"ReflectOwnKeys");function ya(O){console&&console.warn&&console.warn(O)}n(ya,"ProcessEmitWarning");var Ki=Number.isNaN||n(function(_){return _!==_},"NumberIsNaN");function Bt(){Bt.init.call(this)}n(Bt,"EventEmitter");xr.exports=Bt;xr.exports.once=ma;Bt.EventEmitter=Bt;Bt.prototype._events=void 0;Bt.prototype._eventsCount=0;Bt.prototype._maxListeners=void 0;var Ui=10;function er(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}n(er,"checkListener");Object.defineProperty(Bt,"defaultMaxListeners",{enumerable:!0,get:function(){return Ui},set:function(O){if(typeof O!="number"||O<0||Ki(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");Ui=O}});Bt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Bt.prototype.setMaxListeners=n(function(_){if(typeof _!="number"||_<0||Ki(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this},"setMaxListeners");function qi(O){return O._maxListeners===void 0?Bt.defaultMaxListeners:O._maxListeners}n(qi,"_getMaxListeners");Bt.prototype.getMaxListeners=n(function(){return qi(this)},"getMaxListeners");Bt.prototype.emit=n(function(_){for(var w=[],v=1;v<arguments.length;v++)w.push(arguments[v]);var y=_==="error",m=this._events;if(m!==void 0)y=y&&m.error===void 0;else if(!y)return!1;if(y){var b;if(w.length>0&&(b=w[0]),b instanceof Error)throw b;var E=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw E.context=b,E}var k=m[_];if(k===void 0)return!1;if(typeof k=="function")Bi(k,this,w);else for(var F=k.length,d=to(k,F),v=0;v<F;++v)Bi(d[v],this,w);return!0},"emit");function Gi(O,_,w,v){var y,m,b;if(er(w),m=O._events,m===void 0?(m=O._events=Object.create(null),O._eventsCount=0):(m.newListener!==void 0&&(O.emit("newListener",_,w.listener?w.listener:w),m=O._events),b=m[_]),b===void 0)b=m[_]=w,++O._eventsCount;else if(typeof b=="function"?b=m[_]=v?[w,b]:[b,w]:v?b.unshift(w):b.push(w),y=qi(O),y>0&&b.length>y&&!b.warned){b.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=O,E.type=_,E.count=b.length,ya(E)}return O}n(Gi,"_addListener");Bt.prototype.addListener=n(function(_,w){return Gi(this,_,w,!1)},"addListener");Bt.prototype.on=Bt.prototype.addListener;Bt.prototype.prependListener=n(function(_,w){return Gi(this,_,w,!0)},"prependListener");function va(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}n(va,"onceWrapper");function Ji(O,_,w){var v={fired:!1,wrapFn:void 0,target:O,type:_,listener:w},y=va.bind(v);return y.listener=w,v.wrapFn=y,y}n(Ji,"_onceWrap");Bt.prototype.once=n(function(_,w){return er(w),this.on(_,Ji(this,_,w)),this},"once");Bt.prototype.prependOnceListener=n(function(_,w){return er(w),this.prependListener(_,Ji(this,_,w)),this},"prependOnceListener");Bt.prototype.removeListener=n(function(_,w){var v,y,m,b,E;if(er(w),y=this._events,y===void 0)return this;if(v=y[_],v===void 0)return this;if(v===w||v.listener===w)--this._eventsCount===0?this._events=Object.create(null):(delete y[_],y.removeListener&&this.emit("removeListener",_,v.listener||w));else if(typeof v!="function"){for(m=-1,b=v.length-1;b>=0;b--)if(v[b]===w||v[b].listener===w){E=v[b].listener,m=b;break}if(m<0)return this;m===0?v.shift():ga(v,m),v.length===1&&(y[_]=v[0]),y.removeListener!==void 0&&this.emit("removeListener",_,E||w)}return this},"removeListener");Bt.prototype.off=Bt.prototype.removeListener;Bt.prototype.removeAllListeners=n(function(_){var w,v,y;if(v=this._events,v===void 0)return this;if(v.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):v[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete v[_]),this;if(arguments.length===0){var m=Object.keys(v),b;for(y=0;y<m.length;++y)b=m[y],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(w=v[_],typeof w=="function")this.removeListener(_,w);else if(w!==void 0)for(y=w.length-1;y>=0;y--)this.removeListener(_,w[y]);return this},"removeAllListeners");function Qi(O,_,w){var v=O._events;if(v===void 0)return[];var y=v[_];return y===void 0?[]:typeof y=="function"?w?[y.listener||y]:[y]:w?wa(y):to(y,y.length)}n(Qi,"_listeners");Bt.prototype.listeners=n(function(_){return Qi(this,_,!0)},"listeners");Bt.prototype.rawListeners=n(function(_){return Qi(this,_,!1)},"rawListeners");Bt.listenerCount=function(O,_){return typeof O.listenerCount=="function"?O.listenerCount(_):$i.call(O,_)};Bt.prototype.listenerCount=$i;function $i(O){var _=this._events;if(_!==void 0){var w=_[O];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}n($i,"listenerCount");Bt.prototype.eventNames=n(function(){return this._eventsCount>0?Jn(this._events):[]},"eventNames");function to(O,_){for(var w=new Array(_),v=0;v<_;++v)w[v]=O[v];return w}n(to,"arrayClone");function ga(O,_){for(;_+1<O.length;_++)O[_]=O[_+1];O.pop()}n(ga,"spliceOne");function wa(O){for(var _=new Array(O.length),w=0;w<_.length;++w)_[w]=O[w].listener||O[w];return _}n(wa,"unwrapListeners");function ma(O,_){return new Promise(function(w,v){function y(b){O.removeListener(_,m),v(b)}n(y,"errorListener");function m(){typeof O.removeListener=="function"&&O.removeListener("error",y),w([].slice.call(arguments))}n(m,"resolver"),eo(O,_,m,{once:!0}),_!=="error"&&Sa(O,y,{once:!0})})}n(ma,"once");function Sa(O,_,w){typeof O.on=="function"&&eo(O,"error",_,w)}n(Sa,"addErrorHandlerIfEventEmitter");function eo(O,_,w,v){if(typeof O.on=="function")v.once?O.once(_,w):O.on(_,w);else if(typeof O.addEventListener=="function")O.addEventListener(_,n(function y(m){v.once&&O.removeEventListener(_,y),w(m)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}n(eo,"eventTargetAgnosticAddListener");const zi=n((O,_,w,v)=>function(...y){const m=_.promiseModule;return new m((b,E)=>{_.multiArgs?y.push((...F)=>{_.errorFirst?F[0]?E(F):(F.shift(),b(F)):b(F)}):_.errorFirst?y.push((F,d)=>{F?E(F):b(d)}):y.push(b),Reflect.apply(O,this===w?v:this,y)})},"processFunction"),Wi=new WeakMap;function nn(O,_){_={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,..._};const w=typeof O;if(!(O!==null&&(w==="object"||w==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${O===null?"null":w}\``);const v=n((b,E)=>{let k=Wi.get(b);if(k||(k={},Wi.set(b,k)),E in k)return k[E];const F=n(A=>typeof A=="string"||typeof E=="symbol"?E===A:A.test(E),"match"),d=Reflect.getOwnPropertyDescriptor(b,E),f=d===void 0||d.writable||d.configurable,c=(_.include?_.include.some(A=>F(A)):!_.exclude.some(A=>F(A)))&&f;return k[E]=c,c},"filter"),y=new WeakMap,m=new Proxy(O,{apply(b,E,k){const F=y.get(b);if(F)return Reflect.apply(F,E,k);const d=_.excludeMain?b:zi(b,_,m,b);return y.set(b,d),Reflect.apply(d,E,k)},get(b,E){const k=b[E];if(!v(b,E)||k===Function.prototype[E])return k;const F=y.get(k);if(F)return F;if(typeof k=="function"){const d=zi(k,_,m,b);return y.set(k,d),d}return k}});return m}n(nn,"pify");const no=ia(void 0),Gn=!!globalThis.debug;function _a(O){const[_,w]=Fr(void 0);return(async()=>{const v=await O.getFs();if(Gn&&(globalThis.fs=v),v._events||(v._events=new xr.exports,Object.keys(v).filter(y=>typeof v[y]=="function").forEach(y=>{const m=v[y];v[y]=(...b)=>{const E=b.pop(),k=n((F,d)=>{E(F,d),F||v._events.emit(y,...b)},"cb2");m(...b,k)}}),Gn&&console.log("FileSystem.jsx: fs._events",v._events)),!v.promises){v.promises={},v.promises.readFile=nn(v.readFile),v.promises.writeFile=nn(v.writeFile),v.promises.readdir=nn(v.readdir),v.promises.stat=nn(v.stat),v.promises.unlink=nn(v.unlink),v.promises.mkdir=nn(v.mkdir);const y=v.exists;v.promises.exists=m=>new Promise((b,E)=>{y.apply(v,[m,b])})}Gn&&console.log("FileSystem.jsx: fs",v),Gn&&console.log("FileSystem.jsx: setFs"),w(v)})(),ae(Rn,{get when(){return _()},get fallback(){return O.fallbackLoading},get children(){return ae(no.Provider,{get value(){return _()},get children(){return O.children}})}})}n(_a,"FileSystemProvider");function br(){return oa(no)}n(br,"useFileSystem");const _r=Symbol("store-raw"),Dn=Symbol("store-node"),Ea=Symbol("store-name");function ro(O,_){let w=O[rn];if(!w&&(Object.defineProperty(O,rn,{value:w=new Proxy(O,ba)}),!Array.isArray(O))){const v=Object.keys(O),y=Object.getOwnPropertyDescriptors(O);for(let m=0,b=v.length;m<b;m++){const E=v[m];if(y[E].get){const k=y[E].get.bind(w);Object.defineProperty(O,E,{get:k})}}}return w}n(ro,"wrap$1");function Qn(O){let _;return O!=null&&typeof O=="object"&&(O[rn]||!(_=Object.getPrototypeOf(O))||_===Object.prototype||Array.isArray(O))}n(Qn,"isWrappable");function wn(O,_=new Set){let w,v,y,m;if(w=O!=null&&O[_r])return w;if(!Qn(O)||_.has(O))return O;if(Array.isArray(O)){Object.isFrozen(O)?O=O.slice(0):_.add(O);for(let b=0,E=O.length;b<E;b++)y=O[b],(v=wn(y,_))!==y&&(O[b]=v)}else{Object.isFrozen(O)?O=Object.assign({},O):_.add(O);const b=Object.keys(O),E=Object.getOwnPropertyDescriptors(O);for(let k=0,F=b.length;k<F;k++)m=b[k],!E[m].get&&(y=O[m],(v=wn(y,_))!==y&&(O[m]=v))}return O}n(wn,"unwrap");function $n(O){let _=O[Dn];return _||Object.defineProperty(O,Dn,{value:_={}}),_}n($n,"getDataNodes");function Er(O,_,w){return O[_]||(O[_]=oo(w))}n(Er,"getDataNode");function Fa(O,_){const w=Reflect.getOwnPropertyDescriptor(O,_);return!w||w.get||!w.configurable||_===rn||_===Dn||_===Ea||(delete w.value,delete w.writable,w.get=()=>O[rn][_]),w}n(Fa,"proxyDescriptor$1");function io(O){if(Zi()){const _=$n(O);(_._||(_._=oo()))()}}n(io,"trackSelf");function xa(O){return io(O),Reflect.ownKeys(O)}n(xa,"ownKeys");function oo(O){const[_,w]=Fr(O,{equals:!1,internal:!0});return _.$=w,_}n(oo,"createDataNode");const ba={get(O,_,w){if(_===_r)return O;if(_===rn)return w;if(_===ji)return io(O),w;const v=$n(O),y=v.hasOwnProperty(_);let m=y?v[_]():O[_];if(_===Dn||_==="__proto__")return m;if(!y){const b=Object.getOwnPropertyDescriptor(O,_);Zi()&&(typeof m!="function"||O.hasOwnProperty(_))&&!(b&&b.get)&&(m=Er(v,_,m)())}return Qn(m)?ro(m):m},has(O,_){if(_===_r||_===rn||_===ji||_===Dn||_==="__proto__")return!0;const w=$n(O)[_];return w&&w(),_ in O},set(){return!0},deleteProperty(){return!0},ownKeys:xa,getOwnPropertyDescriptor:Fa};function tr(O,_,w,v=!1){if(!v&&O[_]===w)return;const y=O[_],m=O.length;w===void 0?delete O[_]:O[_]=w;let b=$n(O),E;(E=Er(b,_,y))&&E.$(()=>w),Array.isArray(O)&&O.length!==m&&(E=Er(b,"length",m))&&E.$(O.length),(E=b._)&&E.$()}n(tr,"setProperty");function so(O,_){const w=Object.keys(_);for(let v=0;v<w.length;v+=1){const y=w[v];tr(O,y,_[y])}}n(so,"mergeStoreNode");function Ia(O,_){if(typeof _=="function"&&(_=_(O)),_=wn(_),Array.isArray(_)){if(O===_)return;let w=0,v=_.length;for(;w<v;w++){const y=_[w];O[w]!==y&&tr(O,w,y)}tr(O,"length",v)}else so(O,_)}n(Ia,"updateArray");function Nn(O,_,w=[]){let v,y=O;if(_.length>1){v=_.shift();const b=typeof v,E=Array.isArray(O);if(Array.isArray(v)){for(let k=0;k<v.length;k++)Nn(O,[v[k]].concat(_),w);return}else if(E&&b==="function"){for(let k=0;k<O.length;k++)v(O[k],k)&&Nn(O,[k].concat(_),w);return}else if(E&&b==="object"){const{from:k=0,to:F=O.length-1,by:d=1}=v;for(let f=k;f<=F;f+=d)Nn(O,[f].concat(_),w);return}else if(_.length>1){Nn(O[v],_,[v].concat(w));return}y=O[v],w=[v].concat(w)}let m=_[0];typeof m=="function"&&(m=m(y,w),m===y)||v===void 0&&m==null||(m=wn(m),v===void 0||Qn(y)&&Qn(m)&&!Array.isArray(m)?so(y,m):tr(O,v,m))}n(Nn,"updatePath");function ka(...[O,_]){const w=wn(O||{}),v=Array.isArray(w),y=ro(w);function m(...b){sa(()=>{v&&b.length===1?Ia(w,b[0]):Nn(w,b)})}return n(m,"setStore"),[y,m]}n(ka,"createStore");function Ae(O){if(typeof O!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(O))}n(Ae,"assertPath");function Hi(O,_){for(var w="",v=0,y=-1,m=0,b,E=0;E<=O.length;++E){if(E<O.length)b=O.charCodeAt(E);else{if(b===47)break;b=47}if(b===47){if(!(y===E-1||m===1))if(y!==E-1&&m===2){if(w.length<2||v!==2||w.charCodeAt(w.length-1)!==46||w.charCodeAt(w.length-2)!==46){if(w.length>2){var k=w.lastIndexOf("/");if(k!==w.length-1){k===-1?(w="",v=0):(w=w.slice(0,k),v=w.length-1-w.lastIndexOf("/")),y=E,m=0;continue}}else if(w.length===2||w.length===1){w="",v=0,y=E,m=0;continue}}_&&(w.length>0?w+="/..":w="..",v=2)}else w.length>0?w+="/"+O.slice(y+1,E):w=O.slice(y+1,E),v=E-y-1;y=E,m=0}else b===46&&m!==-1?++m:m=-1}return w}n(Hi,"normalizeStringPosix");function Oa(O,_){var w=_.dir||_.root,v=_.base||(_.name||"")+(_.ext||"");return w?w===_.root?w+v:w+O+v:v}n(Oa,"_format");var gn={resolve:n(function(){for(var _="",w=!1,v,y=arguments.length-1;y>=-1&&!w;y--){var m;y>=0?m=arguments[y]:(v===void 0&&(v=process.cwd()),m=v),Ae(m),m.length!==0&&(_=m+"/"+_,w=m.charCodeAt(0)===47)}return _=Hi(_,!w),w?_.length>0?"/"+_:"/":_.length>0?_:"."},"resolve"),normalize:n(function(_){if(Ae(_),_.length===0)return".";var w=_.charCodeAt(0)===47,v=_.charCodeAt(_.length-1)===47;return _=Hi(_,!w),_.length===0&&!w&&(_="."),_.length>0&&v&&(_+="/"),w?"/"+_:_},"normalize"),isAbsolute:n(function(_){return Ae(_),_.length>0&&_.charCodeAt(0)===47},"isAbsolute"),join:n(function(){if(arguments.length===0)return".";for(var _,w=0;w<arguments.length;++w){var v=arguments[w];Ae(v),v.length>0&&(_===void 0?_=v:_+="/"+v)}return _===void 0?".":gn.normalize(_)},"join"),relative:n(function(_,w){if(Ae(_),Ae(w),_===w||(_=gn.resolve(_),w=gn.resolve(w),_===w))return"";for(var v=1;v<_.length&&_.charCodeAt(v)===47;++v);for(var y=_.length,m=y-v,b=1;b<w.length&&w.charCodeAt(b)===47;++b);for(var E=w.length,k=E-b,F=m<k?m:k,d=-1,f=0;f<=F;++f){if(f===F){if(k>F){if(w.charCodeAt(b+f)===47)return w.slice(b+f+1);if(f===0)return w.slice(b+f)}else m>F&&(_.charCodeAt(v+f)===47?d=f:f===0&&(d=0));break}var x=_.charCodeAt(v+f),c=w.charCodeAt(b+f);if(x!==c)break;x===47&&(d=f)}var A="";for(f=v+d+1;f<=y;++f)(f===y||_.charCodeAt(f)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+w.slice(b+d):(b+=d,w.charCodeAt(b)===47&&++b,w.slice(b))},"relative"),_makeLong:n(function(_){return _},"_makeLong"),dirname:n(function(_){if(Ae(_),_.length===0)return".";for(var w=_.charCodeAt(0),v=w===47,y=-1,m=!0,b=_.length-1;b>=1;--b)if(w=_.charCodeAt(b),w===47){if(!m){y=b;break}}else m=!1;return y===-1?v?"/":".":v&&y===1?"//":_.slice(0,y)},"dirname"),basename:n(function(_,w){if(w!==void 0&&typeof w!="string")throw new TypeError('"ext" argument must be a string');Ae(_);var v=0,y=-1,m=!0,b;if(w!==void 0&&w.length>0&&w.length<=_.length){if(w.length===_.length&&w===_)return"";var E=w.length-1,k=-1;for(b=_.length-1;b>=0;--b){var F=_.charCodeAt(b);if(F===47){if(!m){v=b+1;break}}else k===-1&&(m=!1,k=b+1),E>=0&&(F===w.charCodeAt(E)?--E===-1&&(y=b):(E=-1,y=k))}return v===y?y=k:y===-1&&(y=_.length),_.slice(v,y)}else{for(b=_.length-1;b>=0;--b)if(_.charCodeAt(b)===47){if(!m){v=b+1;break}}else y===-1&&(m=!1,y=b+1);return y===-1?"":_.slice(v,y)}},"basename"),extname:n(function(_){Ae(_);for(var w=-1,v=0,y=-1,m=!0,b=0,E=_.length-1;E>=0;--E){var k=_.charCodeAt(E);if(k===47){if(!m){v=E+1;break}continue}y===-1&&(m=!1,y=E+1),k===46?w===-1?w=E:b!==1&&(b=1):w!==-1&&(b=-1)}return w===-1||y===-1||b===0||b===1&&w===y-1&&w===v+1?"":_.slice(w,y)},"extname"),format:n(function(_){if(_===null||typeof _!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof _);return Oa("/",_)},"format"),parse:n(function(_){Ae(_);var w={root:"",dir:"",base:"",ext:"",name:""};if(_.length===0)return w;var v=_.charCodeAt(0),y=v===47,m;y?(w.root="/",m=1):m=0;for(var b=-1,E=0,k=-1,F=!0,d=_.length-1,f=0;d>=m;--d){if(v=_.charCodeAt(d),v===47){if(!F){E=d+1;break}continue}k===-1&&(F=!1,k=d+1),v===46?b===-1?b=d:f!==1&&(f=1):b!==-1&&(f=-1)}return b===-1||k===-1||f===0||f===1&&b===k-1&&b===E+1?k!==-1&&(E===0&&y?w.base=w.name=_.slice(1,k):w.base=w.name=_.slice(E,k)):(E===0&&y?(w.name=_.slice(1,b),w.base=_.slice(1,k)):(w.name=_.slice(E,b),w.base=_.slice(E,k)),w.ext=_.slice(b,k)),E>0?w.dir=_.slice(0,E-1):y&&(w.dir="/"),w},"parse"),sep:"/",delimiter:":",win32:null,posix:null};gn.posix=gn;var La=gn;const Na=ze('<li class="loading">(loading)</li>'),ao=ze('<li class="empty">(empty)</li>'),Ra=ze('<ul class="root-dir"></ul>'),Da=ze('<ul class="dir"></ul>'),Ta=ze('<li class="dir"><div>/</div></li>'),Aa=ze('<li class="file"><div></div></li>'),zt=!!globalThis.debug;function Ca(O){const _=O.fs||br();if(!_)throw new Error("no filesystem");function w(f){const x=[f.name];for(;f.parent;)x.push(f.parent.name),f=f.parent;return x.reverse(),x.join("/")}n(w,"pathOfNode");function v(f){const x=[f.name];for(;f.parent;)x.push("children",f.parent.name),f=f.parent;return x.reverse(),x}n(v,"storeKeysOfNode");async function y(f){const x=f.path;if(!_)throw new Error("no filesystem");zt&&console.log("FileSystemView childrenOfNode: filePath",x);const c=await _.promises.readdir(x);zt&&console.log("FileSystemView childrenOfNode: init tree. files",c);const A=await Promise.all(c.map(async D=>{zt&&console.log("FileSystemView childrenOfNode: stat",x+"/"+D);const C=await _.promises.stat(x+"/"+D);return[D,{name:D,get path(){return w(this)},stats:C,children:null,parent:f}]}));return zt&&console.log("FileSystemView childrenOfNode: nodeEntries",A),zt&&console.log("FileSystemView childrenOfNode: Object.fromEntries(nodeEntries)",Object.fromEntries(A)),Object.fromEntries(A)}n(y,"childrenOfNode");function m(){return{dev:2049,mode:16877,nlink:1,uid:0,gid:0,rdev:0,blksize:4096,ino:2,size:4096,blocks:8,atimeMs:0,mtimeMs:0,ctimeMs:0,birthtimeMs:0,atime:new Date(0),mtime:new Date(0),ctime:new Date(0),birthtime:new Date(0),isFile(){return!1},isDirectory(){return!0},isBlockDevice(){return!1},isCharacterDevice(){return!1},isSymbolicLink(){return!1},isFIFO(){return!1},isSocket(){return!1}}}n(m,"directoryStats");const b={name:"",path:"/",stats:m(),parent:null,children:{}},[E,k]=ka({"":b});function F(f){if(!_)throw new Error("no filesystem");return n(async function(c){c=La.resolve(c),zt&&console.log(`FileSystemView on ${f}(${c}): filePath`,c);const A=c.split("/");zt&&console.log(`FileSystemView on ${f}(${c}): keys`,A);let D=E[""],C=A.slice(-1)[0];zt&&console.log(`FileSystemView on ${f}(${c}): nodeName`,C);const P=[];zt&&console.log(`FileSystemView on ${f}(${c}): parent keys`,A.slice(1,-1));for(const H of A.slice(1,-1)){if(D.children==null){zt&&console.log(`FileSystemView on ${f}(${c}): node is not visible, parent dir is not visible`);return}const Z=D.children[H];if(!Z){zt&&console.log(`FileSystemView on ${f}(${c}): path is not visible. filePath`,c);return}P.push("children"),P.push(H),D=Z}if(zt&&console.log(`FileSystemView on ${f}(${c}): parentKeys`,P),zt&&console.log(`FileSystemView on ${f}(${c}): parent`,wn(D)),zt&&console.log(`FileSystemView on ${f}(${c}): nodeName`,C),D.children==null){zt&&console.log(`FileSystemView on ${f}(${c}): node is not visible`);return}if(D.children[C]){zt&&console.log(`FileSystemView on ${f}(${c}): exists`);return}zt&&console.log(`FileSystemView on ${f}(${c}): add`),zt&&console.log(`FileSystemView on ${f}(${c}): parentKeys`,P);const j=C,et={name:C,get path(){return zt&&console.log("newNode path: this",this),w(this)},stats:await _.promises.stat(c),children:null,parent:D};k("",...P,"children",j,et)},"handleFsEvent")}n(F,"fsEventHandlerFactory");for(const f of["mkdir","writeFile"])_._events.on(f,F(f));aa(async()=>{zt&&console.log("FileSystemView: init tree ..."),zt&&console.log("FileSystemView: init tree ..."),k("","children",await y(E[""])),zt&&console.log("FileSystemView: init tree done"),zt&&console.log("FileSystemView: init tree done")});async function d(f){if(zt&&console.log("click node",f.path,f),f.stats.isDirectory()){const x=v(f);zt&&console.log("click node",f.path,"dir: storeKeys",x),f.children==null?(O.openDir&&O.openDir(f.path),zt&&console.log("click node",f.path,"dir: expand children"),k(...x,"children",await y(f))):(O.closeDir&&O.closeDir(f.path),zt&&console.log("click node",f.path,"dir: collapse children"),k(...x,"children",null))}else O.setFile&&O.setFile(f.path)}return n(d,"onClickNode"),ae(Rn,{get when(){return E[""]},get fallback(){return O.fallbackLoading},get children(){const f=Ra.cloneNode(!0);return Ve(f,ae(fa,{get children(){return[ae(Sr,{get when(){return E[""].children===null},get children(){return Na.cloneNode(!0)}}),ae(Sr,{get when(){return Object.keys(E[""].children).length==0},get children(){return ao.cloneNode(!0)}}),ae(Sr,{when:!0,get children(){return ae(Yi,{get each(){return Object.values(E[""].children)},children:x=>ae(fo,{node:x,onClickNode:d})})}})]}})),f}})}n(Ca,"FileSystemView");function fo(O){return ae(Rn,{get when(){return O.node.stats.isDirectory()},get fallback(){return(()=>{const _=Aa.cloneNode(!0),w=_.firstChild;return w.$$click=()=>O.onClickNode(O.node),Ve(w,()=>O.node.name),_})()},get children(){const _=Ta.cloneNode(!0),w=_.firstChild,v=w.firstChild;return w.$$click=()=>O.onClickNode(O.node),Ve(w,()=>O.node.name,v),Ve(_,ae(Rn,{get when(){return O.node.children!==null},get children(){const y=Da.cloneNode(!0);return Ve(y,ae(Rn,{get when(){return Object.keys(O.node.children||{}).length>0},get fallback(){return ao.cloneNode(!0)},get children(){return ae(Yi,{get each(){return Object.values(O.node.children||{})},children:m=>ae(fo,{node:m,get onClickNode(){return O.onClickNode}})})}})),y}}),null),ua(()=>_.classList.toggle("open",O.node.children!==null)),_}})}n(fo,"Node");Xi(["click"]);var Ir={exports:{}};(function(O,_){n(function(v,y){O.exports=y()},"webpackUniversalModuleDefinition")(pa,function(){return function(w){var v={};function y(m){if(v[m])return v[m].exports;var b=v[m]={exports:{},id:m,loaded:!1};return w[m].call(b.exports,b,b.exports,y),b.loaded=!0,b.exports}return n(y,"__webpack_require__"),y.m=w,y.c=v,y.p="",y(0)}([function(w,v,y){(function(m,b,E,k){Object.defineProperty(v,"__esModule",{value:!0});var F=y(2),d=y(9),f;(function(i){i[i.EPERM=1]="EPERM",i[i.ENOENT=2]="ENOENT",i[i.EIO=5]="EIO",i[i.EBADF=9]="EBADF",i[i.EACCES=13]="EACCES",i[i.EBUSY=16]="EBUSY",i[i.EEXIST=17]="EEXIST",i[i.ENOTDIR=20]="ENOTDIR",i[i.EISDIR=21]="EISDIR",i[i.EINVAL=22]="EINVAL",i[i.EFBIG=27]="EFBIG",i[i.ENOSPC=28]="ENOSPC",i[i.EROFS=30]="EROFS",i[i.ENOTEMPTY=39]="ENOTEMPTY",i[i.ENOTSUP=95]="ENOTSUP"})(f||(f={}));var x={};x[f.EPERM]="Operation not permitted.",x[f.ENOENT]="No such file or directory.",x[f.EIO]="Input/output error.",x[f.EBADF]="Bad file descriptor.",x[f.EACCES]="Permission denied.",x[f.EBUSY]="Resource busy or locked.",x[f.EEXIST]="File exists.",x[f.ENOTDIR]="File is not a directory.",x[f.EISDIR]="File is a directory.",x[f.EINVAL]="Invalid argument.",x[f.EFBIG]="File is too big.",x[f.ENOSPC]="No space left on disk.",x[f.EROFS]="Cannot modify a read-only file system.",x[f.ENOTEMPTY]="Directory is not empty.",x[f.ENOTSUP]="Operation is not supported.";var c=function(i){function t(r,e,o){e===void 0&&(e=x[r]),i.call(this,e),this.syscall="",this.errno=r,this.code=f[r],this.path=o,this.stack=new i().stack,this.message="Error: "+this.code+": "+e+(this.path?", '"+this.path+"'":"")}return n(t,"ApiError"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.fromJSON=n(function(e){var o=new t(0);return o.errno=e.errno,o.code=e.code,o.path=e.path,o.stack=e.stack,o.message=e.message,o},"fromJSON"),t.fromBuffer=n(function(e,o){return o===void 0&&(o=0),t.fromJSON(JSON.parse(e.toString("utf8",o+4,o+4+e.readUInt32LE(o))))},"fromBuffer"),t.FileError=n(function(e,o){return new t(e,x[e],o)},"FileError"),t.ENOENT=n(function(e){return this.FileError(f.ENOENT,e)},"ENOENT"),t.EEXIST=n(function(e){return this.FileError(f.EEXIST,e)},"EEXIST"),t.EISDIR=n(function(e){return this.FileError(f.EISDIR,e)},"EISDIR"),t.ENOTDIR=n(function(e){return this.FileError(f.ENOTDIR,e)},"ENOTDIR"),t.EPERM=n(function(e){return this.FileError(f.EPERM,e)},"EPERM"),t.ENOTEMPTY=n(function(e){return this.FileError(f.ENOTEMPTY,e)},"ENOTEMPTY"),t.prototype.toString=n(function(){return this.message},"toString"),t.prototype.toJSON=n(function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},"toJSON"),t.prototype.writeToBuffer=n(function(e,o){e===void 0&&(e=m.alloc(this.bufferSize())),o===void 0&&(o=0);var s=e.write(JSON.stringify(this.toJSON()),o+4);return e.writeUInt32LE(s,o),e},"writeToBuffer"),t.prototype.bufferSize=n(function(){return 4+m.byteLength(JSON.stringify(this.toJSON()))},"bufferSize"),t}(Error),A=Object.freeze({get ErrorCode(){return f},ErrorStrings:x,ApiError:c}),D;(function(i){i[i.NOP=0]="NOP",i[i.THROW_EXCEPTION=1]="THROW_EXCEPTION",i[i.TRUNCATE_FILE=2]="TRUNCATE_FILE",i[i.CREATE_FILE=3]="CREATE_FILE"})(D||(D={}));var C=n(function i(t){if(this.flagStr=t,i.validFlagStrs.indexOf(t)<0)throw new c(f.EINVAL,"Invalid flag: "+t)},"FileFlag");C.getFileFlag=n(function(t){return C.flagCache.hasOwnProperty(t)?C.flagCache[t]:C.flagCache[t]=new C(t)},"getFileFlag"),C.prototype.getFlagString=n(function(){return this.flagStr},"getFlagString"),C.prototype.isReadable=n(function(){return this.flagStr.indexOf("r")!==-1||this.flagStr.indexOf("+")!==-1},"isReadable"),C.prototype.isWriteable=n(function(){return this.flagStr.indexOf("w")!==-1||this.flagStr.indexOf("a")!==-1||this.flagStr.indexOf("+")!==-1},"isWriteable"),C.prototype.isTruncating=n(function(){return this.flagStr.indexOf("w")!==-1},"isTruncating"),C.prototype.isAppendable=n(function(){return this.flagStr.indexOf("a")!==-1},"isAppendable"),C.prototype.isSynchronous=n(function(){return this.flagStr.indexOf("s")!==-1},"isSynchronous"),C.prototype.isExclusive=n(function(){return this.flagStr.indexOf("x")!==-1},"isExclusive"),C.prototype.pathExistsAction=n(function(){return this.isExclusive()?D.THROW_EXCEPTION:this.isTruncating()?D.TRUNCATE_FILE:D.NOP},"pathExistsAction"),C.prototype.pathNotExistsAction=n(function(){return(this.isWriteable()||this.isAppendable())&&this.flagStr!=="r+"?D.CREATE_FILE:D.THROW_EXCEPTION},"pathNotExistsAction"),C.flagCache={},C.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"];var P;(function(i){i[i.FILE=32768]="FILE",i[i.DIRECTORY=16384]="DIRECTORY",i[i.SYMLINK=40960]="SYMLINK"})(P||(P={}));var j=n(function(t,r,e,o,s,a){if(o===void 0&&(o=new Date),s===void 0&&(s=new Date),a===void 0&&(a=new Date),this.size=r,this.atime=o,this.mtime=s,this.ctime=a,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,e)this.mode=e;else switch(t){case P.FILE:this.mode=420;break;case P.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(r/512),this.mode<4096&&(this.mode|=t)},"Stats");j.fromBuffer=n(function(t){var r=t.readUInt32LE(0),e=t.readUInt32LE(4),o=t.readDoubleLE(8),s=t.readDoubleLE(16),a=t.readDoubleLE(24);return new j(e&61440,r,e&4095,new Date(o),new Date(s),new Date(a))},"fromBuffer"),j.prototype.toBuffer=n(function(){var t=m.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},"toBuffer"),j.prototype.clone=n(function(){return new j(this.mode&61440,this.size,this.mode&4095,this.atime,this.mtime,this.ctime)},"clone"),j.prototype.isFile=n(function(){return(this.mode&61440)===P.FILE},"isFile"),j.prototype.isDirectory=n(function(){return(this.mode&61440)===P.DIRECTORY},"isDirectory"),j.prototype.isSymbolicLink=n(function(){return(this.mode&61440)===P.SYMLINK},"isSymbolicLink"),j.prototype.chmod=n(function(t){this.mode=this.mode&61440|t},"chmod"),j.prototype.isSocket=n(function(){return!1},"isSocket"),j.prototype.isBlockDevice=n(function(){return!1},"isBlockDevice"),j.prototype.isCharacterDevice=n(function(){return!1},"isCharacterDevice"),j.prototype.isFIFO=n(function(){return!1},"isFIFO");var et=n(function(i,t){return i},"wrapCb");function H(i){if(i)return i;throw new c(f.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}n(H,"assertRoot");function Z(i,t){switch(typeof i){case"number":return i;case"string":var r=parseInt(i,8);return isNaN(r)?t:r;default:return t}}n(Z,"normalizeMode");function bt(i){if(i instanceof Date)return i;if(typeof i=="number")return new Date(i*1e3);throw new c(f.EINVAL,"Invalid time.")}n(bt,"normalizeTime");function nt(i){if(i.indexOf("\0")>=0)throw new c(f.EINVAL,"Path must be a string without null bytes.");if(i==="")throw new c(f.EINVAL,"Path must not be empty.");return d.resolve(i)}n(nt,"normalizePath");function xt(i,t,r,e){switch(typeof i){case"object":return{encoding:typeof i.encoding<"u"?i.encoding:t,flag:typeof i.flag<"u"?i.flag:r,mode:Z(i.mode,e)};case"string":return{encoding:i,flag:r,mode:e};default:return{encoding:t,flag:r,mode:e}}}n(xt,"normalizeOptions");function yt(){}n(yt,"nopCb");var z=n(function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100},"FS");z.prototype.initialize=n(function(t){if(!t.constructor.isAvailable())throw new c(f.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},"initialize"),z.prototype._toUnixTimestamp=n(function(t){if(typeof t=="number")return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},"_toUnixTimestamp"),z.prototype.getRootFS=n(function(){return this.root?this.root:null},"getRootFS"),z.prototype.rename=n(function(t,r,e){e===void 0&&(e=yt);var o=et(e,1);try{H(this.root).rename(nt(t),nt(r),o)}catch(s){o(s)}},"rename"),z.prototype.renameSync=n(function(t,r){H(this.root).renameSync(nt(t),nt(r))},"renameSync"),z.prototype.exists=n(function(t,r){r===void 0&&(r=yt);var e=et(r,1);try{return H(this.root).exists(nt(t),e)}catch{return e(!1)}},"exists"),z.prototype.existsSync=n(function(t){try{return H(this.root).existsSync(nt(t))}catch{return!1}},"existsSync"),z.prototype.stat=n(function(t,r){r===void 0&&(r=yt);var e=et(r,2);try{return H(this.root).stat(nt(t),!1,e)}catch(o){return e(o)}},"stat"),z.prototype.statSync=n(function(t){return H(this.root).statSync(nt(t),!1)},"statSync"),z.prototype.lstat=n(function(t,r){r===void 0&&(r=yt);var e=et(r,2);try{return H(this.root).stat(nt(t),!0,e)}catch(o){return e(o)}},"lstat"),z.prototype.lstatSync=n(function(t){return H(this.root).statSync(nt(t),!0)},"lstatSync"),z.prototype.truncate=n(function(t,r,e){r===void 0&&(r=0),e===void 0&&(e=yt);var o=0;typeof r=="function"?e=r:typeof r=="number"&&(o=r);var s=et(e,1);try{if(o<0)throw new c(f.EINVAL);return H(this.root).truncate(nt(t),o,s)}catch(a){return s(a)}},"truncate"),z.prototype.truncateSync=n(function(t,r){if(r===void 0&&(r=0),r<0)throw new c(f.EINVAL);return H(this.root).truncateSync(nt(t),r)},"truncateSync"),z.prototype.unlink=n(function(t,r){r===void 0&&(r=yt);var e=et(r,1);try{return H(this.root).unlink(nt(t),e)}catch(o){return e(o)}},"unlink"),z.prototype.unlinkSync=n(function(t){return H(this.root).unlinkSync(nt(t))},"unlinkSync"),z.prototype.open=n(function(t,r,e,o){var s=this;o===void 0&&(o=yt);var a=Z(e,420);o=typeof e=="function"?e:o;var u=et(o,2);try{H(this.root).open(nt(t),C.getFileFlag(r),a,function(p,g){g?u(p,s.getFdForFile(g)):u(p)})}catch(p){u(p)}},"open"),z.prototype.openSync=n(function(t,r,e){return e===void 0&&(e=420),this.getFdForFile(H(this.root).openSync(nt(t),C.getFileFlag(r),Z(e,420)))},"openSync"),z.prototype.readFile=n(function(t,r,e){r===void 0&&(r={}),e===void 0&&(e=yt);var o=xt(r,null,"r",null);e=typeof r=="function"?r:e;var s=et(e,2);try{var a=C.getFileFlag(o.flag);return a.isReadable()?H(this.root).readFile(nt(t),o.encoding,a,s):s(new c(f.EINVAL,"Flag passed to readFile must allow for reading."))}catch(u){return s(u)}},"readFile"),z.prototype.readFileSync=n(function(t,r){r===void 0&&(r={});var e=xt(r,null,"r",null),o=C.getFileFlag(e.flag);if(!o.isReadable())throw new c(f.EINVAL,"Flag passed to readFile must allow for reading.");return H(this.root).readFileSync(nt(t),e.encoding,o)},"readFileSync"),z.prototype.writeFile=n(function(t,r,e,o){e===void 0&&(e={}),o===void 0&&(o=yt);var s=xt(e,"utf8","w",420);o=typeof e=="function"?e:o;var a=et(o,1);try{var u=C.getFileFlag(s.flag);return u.isWriteable()?H(this.root).writeFile(nt(t),r,s.encoding,u,s.mode,a):a(new c(f.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(p){return a(p)}},"writeFile"),z.prototype.writeFileSync=n(function(t,r,e){var o=xt(e,"utf8","w",420),s=C.getFileFlag(o.flag);if(!s.isWriteable())throw new c(f.EINVAL,"Flag passed to writeFile must allow for writing.");return H(this.root).writeFileSync(nt(t),r,o.encoding,s,o.mode)},"writeFileSync"),z.prototype.appendFile=n(function(t,r,e,o){o===void 0&&(o=yt);var s=xt(e,"utf8","a",420);o=typeof e=="function"?e:o;var a=et(o,1);try{var u=C.getFileFlag(s.flag);if(!u.isAppendable())return a(new c(f.EINVAL,"Flag passed to appendFile must allow for appending."));H(this.root).appendFile(nt(t),r,s.encoding,u,s.mode,a)}catch(p){a(p)}},"appendFile"),z.prototype.appendFileSync=n(function(t,r,e){var o=xt(e,"utf8","a",420),s=C.getFileFlag(o.flag);if(!s.isAppendable())throw new c(f.EINVAL,"Flag passed to appendFile must allow for appending.");return H(this.root).appendFileSync(nt(t),r,o.encoding,s,o.mode)},"appendFileSync"),z.prototype.fstat=n(function(t,r){r===void 0&&(r=yt);var e=et(r,2);try{var o=this.fd2file(t);o.stat(e)}catch(s){e(s)}},"fstat"),z.prototype.fstatSync=n(function(t){return this.fd2file(t).statSync()},"fstatSync"),z.prototype.close=n(function(t,r){var e=this;r===void 0&&(r=yt);var o=et(r,1);try{this.fd2file(t).close(function(s){s||e.closeFd(t),o(s)})}catch(s){o(s)}},"close"),z.prototype.closeSync=n(function(t){this.fd2file(t).closeSync(),this.closeFd(t)},"closeSync"),z.prototype.ftruncate=n(function(t,r,e){e===void 0&&(e=yt);var o=typeof r=="number"?r:0;e=typeof r=="function"?r:e;var s=et(e,1);try{var a=this.fd2file(t);if(o<0)throw new c(f.EINVAL);a.truncate(o,s)}catch(u){s(u)}},"ftruncate"),z.prototype.ftruncateSync=n(function(t,r){r===void 0&&(r=0);var e=this.fd2file(t);if(r<0)throw new c(f.EINVAL);e.truncateSync(r)},"ftruncateSync"),z.prototype.fsync=n(function(t,r){r===void 0&&(r=yt);var e=et(r,1);try{this.fd2file(t).sync(e)}catch(o){e(o)}},"fsync"),z.prototype.fsyncSync=n(function(t){this.fd2file(t).syncSync()},"fsyncSync"),z.prototype.fdatasync=n(function(t,r){r===void 0&&(r=yt);var e=et(r,1);try{this.fd2file(t).datasync(e)}catch(o){e(o)}},"fdatasync"),z.prototype.fdatasyncSync=n(function(t){this.fd2file(t).datasyncSync()},"fdatasyncSync"),z.prototype.write=n(function(t,r,e,o,s,a){a===void 0&&(a=yt);var u,p,g,T=null;if(typeof r=="string"){var M="utf8";switch(typeof e){case"function":a=e;break;case"number":T=e,M=typeof o=="string"?o:"utf8",a=typeof s=="function"?s:a;break;default:return a=typeof o=="function"?o:typeof s=="function"?s:a,a(new c(f.EINVAL,"Invalid arguments."))}u=m.from(r,M),p=0,g=u.length}else u=r,p=e,g=o,T=typeof s=="number"?s:null,a=typeof s=="function"?s:a;var X=et(a,3);try{var tt=this.fd2file(t);T==null&&(T=tt.getPos()),tt.write(u,p,g,T,X)}catch(it){X(it)}},"write"),z.prototype.writeSync=n(function(t,r,e,o,s){var a,u=0,p,g;if(typeof r=="string"){g=typeof e=="number"?e:null;var T=typeof o=="string"?o:"utf8";u=0,a=m.from(r,T),p=a.length}else a=r,u=e,p=o,g=typeof s=="number"?s:null;var M=this.fd2file(t);return g==null&&(g=M.getPos()),M.writeSync(a,u,p,g)},"writeSync"),z.prototype.read=n(function(t,r,e,o,s,a){a===void 0&&(a=yt);var u,p,g,T,M;if(typeof r=="number"){g=r,u=e;var X=o;a=typeof s=="function"?s:a,p=0,T=m.alloc(g),M=et(function(it,lt,vt){if(it)return a(it);a(it,vt.toString(X),lt)},3)}else T=r,p=e,g=o,u=s,M=et(a,3);try{var tt=this.fd2file(t);u==null&&(u=tt.getPos()),tt.read(T,p,g,u,M)}catch(it){M(it)}},"read"),z.prototype.readSync=n(function(t,r,e,o,s){var a=!1,u,p,g,T,M="utf8";typeof r=="number"?(g=r,T=e,M=o,p=0,u=m.alloc(g),a=!0):(u=r,p=e,g=o,T=s);var X=this.fd2file(t);T==null&&(T=X.getPos());var tt=X.readSync(u,p,g,T);return a?[u.toString(M),tt]:tt},"readSync"),z.prototype.fchown=n(function(t,r,e,o){o===void 0&&(o=yt);var s=et(o,1);try{this.fd2file(t).chown(r,e,s)}catch(a){s(a)}},"fchown"),z.prototype.fchownSync=n(function(t,r,e){this.fd2file(t).chownSync(r,e)},"fchownSync"),z.prototype.fchmod=n(function(t,r,e){var o=et(e,1);try{var s=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmod(s,o)}catch(a){o(a)}},"fchmod"),z.prototype.fchmodSync=n(function(t,r){var e=typeof r=="string"?parseInt(r,8):r;this.fd2file(t).chmodSync(e)},"fchmodSync"),z.prototype.futimes=n(function(t,r,e,o){o===void 0&&(o=yt);var s=et(o,1);try{var a=this.fd2file(t);typeof r=="number"&&(r=new Date(r*1e3)),typeof e=="number"&&(e=new Date(e*1e3)),a.utimes(r,e,s)}catch(u){s(u)}},"futimes"),z.prototype.futimesSync=n(function(t,r,e){this.fd2file(t).utimesSync(bt(r),bt(e))},"futimesSync"),z.prototype.rmdir=n(function(t,r){r===void 0&&(r=yt);var e=et(r,1);try{t=nt(t),H(this.root).rmdir(t,e)}catch(o){e(o)}},"rmdir"),z.prototype.rmdirSync=n(function(t){return t=nt(t),H(this.root).rmdirSync(t)},"rmdirSync"),z.prototype.mkdir=n(function(t,r,e){e===void 0&&(e=yt),typeof r=="function"&&(e=r,r=511);var o=et(e,1);try{t=nt(t),H(this.root).mkdir(t,r,o)}catch(s){o(s)}},"mkdir"),z.prototype.mkdirSync=n(function(t,r){H(this.root).mkdirSync(nt(t),Z(r,511))},"mkdirSync"),z.prototype.readdir=n(function(t,r){r===void 0&&(r=yt);var e=et(r,2);try{t=nt(t),H(this.root).readdir(t,e)}catch(o){e(o)}},"readdir"),z.prototype.readdirSync=n(function(t){return t=nt(t),H(this.root).readdirSync(t)},"readdirSync"),z.prototype.link=n(function(t,r,e){e===void 0&&(e=yt);var o=et(e,1);try{t=nt(t),r=nt(r),H(this.root).link(t,r,o)}catch(s){o(s)}},"link"),z.prototype.linkSync=n(function(t,r){return t=nt(t),r=nt(r),H(this.root).linkSync(t,r)},"linkSync"),z.prototype.symlink=n(function(t,r,e,o){o===void 0&&(o=yt);var s=typeof e=="string"?e:"file";o=typeof e=="function"?e:o;var a=et(o,1);try{if(s!=="file"&&s!=="dir")return a(new c(f.EINVAL,"Invalid type: "+s));t=nt(t),r=nt(r),H(this.root).symlink(t,r,s,a)}catch(u){a(u)}},"symlink"),z.prototype.symlinkSync=n(function(t,r,e){if(!e)e="file";else if(e!=="file"&&e!=="dir")throw new c(f.EINVAL,"Invalid type: "+e);return t=nt(t),r=nt(r),H(this.root).symlinkSync(t,r,e)},"symlinkSync"),z.prototype.readlink=n(function(t,r){r===void 0&&(r=yt);var e=et(r,2);try{t=nt(t),H(this.root).readlink(t,e)}catch(o){e(o)}},"readlink"),z.prototype.readlinkSync=n(function(t){return t=nt(t),H(this.root).readlinkSync(t)},"readlinkSync"),z.prototype.chown=n(function(t,r,e,o){o===void 0&&(o=yt);var s=et(o,1);try{t=nt(t),H(this.root).chown(t,!1,r,e,s)}catch(a){s(a)}},"chown"),z.prototype.chownSync=n(function(t,r,e){t=nt(t),H(this.root).chownSync(t,!1,r,e)},"chownSync"),z.prototype.lchown=n(function(t,r,e,o){o===void 0&&(o=yt);var s=et(o,1);try{t=nt(t),H(this.root).chown(t,!0,r,e,s)}catch(a){s(a)}},"lchown"),z.prototype.lchownSync=n(function(t,r,e){t=nt(t),H(this.root).chownSync(t,!0,r,e)},"lchownSync"),z.prototype.chmod=n(function(t,r,e){e===void 0&&(e=yt);var o=et(e,1);try{var s=Z(r,-1);if(s<0)throw new c(f.EINVAL,"Invalid mode.");H(this.root).chmod(nt(t),!1,s,o)}catch(a){o(a)}},"chmod"),z.prototype.chmodSync=n(function(t,r){var e=Z(r,-1);if(e<0)throw new c(f.EINVAL,"Invalid mode.");t=nt(t),H(this.root).chmodSync(t,!1,e)},"chmodSync"),z.prototype.lchmod=n(function(t,r,e){e===void 0&&(e=yt);var o=et(e,1);try{var s=Z(r,-1);if(s<0)throw new c(f.EINVAL,"Invalid mode.");H(this.root).chmod(nt(t),!0,s,o)}catch(a){o(a)}},"lchmod"),z.prototype.lchmodSync=n(function(t,r){var e=Z(r,-1);if(e<1)throw new c(f.EINVAL,"Invalid mode.");H(this.root).chmodSync(nt(t),!0,e)},"lchmodSync"),z.prototype.utimes=n(function(t,r,e,o){o===void 0&&(o=yt);var s=et(o,1);try{H(this.root).utimes(nt(t),bt(r),bt(e),s)}catch(a){s(a)}},"utimes"),z.prototype.utimesSync=n(function(t,r,e){H(this.root).utimesSync(nt(t),bt(r),bt(e))},"utimesSync"),z.prototype.realpath=n(function(t,r,e){e===void 0&&(e=yt);var o=typeof r=="object"?r:{};e=typeof r=="function"?r:yt;var s=et(e,2);try{t=nt(t),H(this.root).realpath(t,o,s)}catch(a){s(a)}},"realpath"),z.prototype.realpathSync=n(function(t,r){return r===void 0&&(r={}),t=nt(t),H(this.root).realpathSync(t,r)},"realpathSync"),z.prototype.watchFile=n(function(t,r,e){throw new c(f.ENOTSUP)},"watchFile"),z.prototype.unwatchFile=n(function(t,r){throw new c(f.ENOTSUP)},"unwatchFile"),z.prototype.watch=n(function(t,r,e){throw new c(f.ENOTSUP)},"watch"),z.prototype.access=n(function(t,r,e){throw new c(f.ENOTSUP)},"access"),z.prototype.accessSync=n(function(t,r){throw new c(f.ENOTSUP)},"accessSync"),z.prototype.createReadStream=n(function(t,r){throw new c(f.ENOTSUP)},"createReadStream"),z.prototype.createWriteStream=n(function(t,r){throw new c(f.ENOTSUP)},"createWriteStream"),z.prototype.wrapCallbacks=n(function(t){et=t},"wrapCallbacks"),z.prototype.getFdForFile=n(function(t){var r=this.nextFd++;return this.fdMap[r]=t,r},"getFdForFile"),z.prototype.fd2file=n(function(t){var r=this.fdMap[t];if(r)return r;throw new c(f.EBADF,"Invalid file descriptor.")},"fd2file"),z.prototype.closeFd=n(function(t){delete this.fdMap[t]},"closeFd"),z.Stats=j;var rt=new z,ct={},Nt=z.prototype;Object.keys(Nt).forEach(function(i){typeof rt[i]=="function"?ct[i]=function(){return rt[i].apply(rt,arguments)}:ct[i]=rt[i]}),ct.changeFSModule=function(i){rt=i},ct.getFSModule=function(){return rt},ct.FS=z;function gt(i,t,r,e,o){return i<t||r<t?i>r?r+1:i+1:e===o?t:t+1}n(gt,"_min");function Ct(i,t){if(i===t)return 0;if(i.length>t.length){var r=i;i=t,t=r}for(var e=i.length,o=t.length;e>0&&i.charCodeAt(e-1)===t.charCodeAt(o-1);)e--,o--;for(var s=0;s<e&&i.charCodeAt(s)===t.charCodeAt(s);)s++;if(e-=s,o-=s,e===0||o===1)return o;for(var a=new Array(e<<1),u=0;u<e;)a[e+u]=i.charCodeAt(s+u),a[u]=++u;var p,g,T,M,X;for(p=0;p+3<o;)for(var tt=t.charCodeAt(s+(g=p)),it=t.charCodeAt(s+(T=p+1)),lt=t.charCodeAt(s+(M=p+2)),vt=t.charCodeAt(s+(X=p+3)),It=p+=4,Kt=0;Kt<e;){var ce=a[e+Kt],De=a[Kt];g=gt(De,g,T,tt,ce),T=gt(g,T,M,it,ce),M=gt(T,M,X,lt,ce),It=gt(M,X,It,vt,ce),a[Kt++]=It,X=M,M=T,T=g,g=De}for(var Te=0;p<o;){var yn=t.charCodeAt(s+(g=p));Te=++p;for(var Be=0;Be<e;Be++){var Ue=a[Be];a[Be]=Te=Ue<g||Te<g?Ue>Te?Te+1:Ue+1:yn===a[e+Be]?g:g+1,g=Ue}}return Te}n(Ct,"levenshtein");function Ot(i,t,r){i&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}n(Ot,"deprecationMessage");var _t=typeof navigator<"u"&&!!(/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||navigator.userAgent.indexOf("Trident")!==-1),Jt=typeof window>"u";function W(){throw new Error("BFS has reached an impossible code path; please file a bug.")}n(W,"fail");function U(i,t,r){r.existsSync(i)||(U(d.dirname(i),t,r),r.mkdirSync(i,t))}n(U,"mkdirpSync");function Q(i){var t=ht(i),r=t.byteOffset,e=t.byteLength;return r===0&&e===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+e)}n(Q,"buffer2ArrayBuffer");function ht(i){return i instanceof Uint8Array?i:new Uint8Array(i)}n(ht,"buffer2Uint8array");function kt(i){return i instanceof m?i:i instanceof Uint8Array?mt(i):m.from(i)}n(kt,"arrayish2Buffer");function mt(i){return i instanceof m?i:i.byteOffset===0&&i.byteLength===i.buffer.byteLength?Et(i.buffer):m.from(i.buffer,i.byteOffset,i.byteLength)}n(mt,"uint8Array2Buffer");function Et(i){return m.from(i)}n(Et,"arrayBuffer2Buffer");function Rt(i,t,r){if(t===void 0&&(t=0),r===void 0&&(r=i.length),t<0||r<0||r>i.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+i.length+": ["+t+", "+r+"]");if(i.length===0)return Pt();var e=ht(i),o=i[0],s=(o+1)%255;return i[0]=s,e[0]===s?(e[0]=o,mt(e.slice(t,r))):(i[0]=o,mt(e.subarray(t,r)))}n(Rt,"copyingSlice");var Zt=null;function Pt(){return Zt||(Zt=m.alloc(0))}n(Pt,"emptyBuffer");function N(i,t){m.isBuffer(i)?t():t(new c(f.EINVAL,"option must be a Buffer."))}n(N,"bufferValidator");function R(i,t,r){var e=i.Options,o=i.Name,s=0,a=!1,u=!1;function p(X){a||(X&&(a=!0,r(X)),s--,s===0&&u&&r())}n(p,"validatorCallback");var g=n(function(X){if(e.hasOwnProperty(X)){var tt=e[X],it=t[X];if(it==null){if(!tt.optional){var lt=Object.keys(t).filter(function(It){return!(It in e)}).map(function(It){return{str:It,distance:Ct(X,It)}}).filter(function(It){return It.distance<5}).sort(function(It,Kt){return It.distance-Kt.distance});return a?{}:(a=!0,{v:r(new c(f.EINVAL,"["+o+"] Required option '"+X+"' not provided."+(lt.length>0?" You provided unrecognized option '"+lt[0].str+"'; perhaps you meant to type '"+X+"'.":"")+`
Option description: `+tt.description))})}}else{var vt=!1;if(Array.isArray(tt.type)?vt=tt.type.indexOf(typeof it)!==-1:vt=typeof it===tt.type,vt)tt.validator&&(s++,tt.validator(it,p));else return a?{}:(a=!0,{v:r(new c(f.EINVAL,"["+o+"] Value provided for option "+X+" is not the proper type. Expected "+(Array.isArray(tt.type)?"one of {"+tt.type.join(", ")+"}":tt.type)+", but received "+typeof it+`
Option description: `+tt.description))})}}},"loop");for(var T in e){var M=g(T);if(M)return M.v}u=!0,s===0&&!a&&r()}n(R,"checkOptions");var G=Object.freeze({deprecationMessage:Ot,isIE:_t,isWebWorker:Jt,fail:W,mkdirpSync:U,buffer2ArrayBuffer:Q,buffer2Uint8array:ht,arrayish2Buffer:kt,uint8Array2Buffer:mt,arrayBuffer2Buffer:Et,copyingSlice:Rt,emptyBuffer:Pt,bufferValidator:N,checkOptions:R}),ot=n(function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()},"BFSEmscriptenStreamOps");ot.prototype.open=n(function(t){var r=this.fs.realPath(t.node),e=this.FS;try{e.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(r,this.fs.flagsToPermissionString(t.flags)))}catch(o){throw o.code?new e.ErrnoError(this.ERRNO_CODES[o.code]):o}},"open"),ot.prototype.close=n(function(t){var r=this.FS;try{r.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd)}catch(e){throw e.code?new r.ErrnoError(this.ERRNO_CODES[e.code]):e}},"close"),ot.prototype.read=n(function(t,r,e,o,s){try{return this.nodefs.readSync(t.nfd,mt(r),e,o,s)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},"read"),ot.prototype.write=n(function(t,r,e,o,s){try{return this.nodefs.writeSync(t.nfd,mt(r),e,o,s)}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}},"write"),ot.prototype.llseek=n(function(t,r,e){var o=r;if(e===1)o+=t.position;else if(e===2&&this.FS.isFile(t.node.mode))try{var s=this.nodefs.fstatSync(t.nfd);o+=s.size}catch(a){throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code])}if(o<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=o,o},"llseek");var dt=n(function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()},"BFSEmscriptenNodeOps");dt.prototype.getattr=n(function(t){var r=this.fs.realPath(t),e;try{e=this.nodefs.lstatSync(r)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},"getattr"),dt.prototype.setattr=n(function(t,r){var e=this.fs.realPath(t);try{if(r.mode!==void 0&&(this.nodefs.chmodSync(e,r.mode),t.mode=r.mode),r.timestamp!==void 0){var o=new Date(r.timestamp);this.nodefs.utimesSync(e,o,o)}}catch(s){if(!s.code)throw s;if(s.code!=="ENOTSUP")throw new this.FS.ErrnoError(this.ERRNO_CODES[s.code])}if(r.size!==void 0)try{this.nodefs.truncateSync(e,r.size)}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},"setattr"),dt.prototype.lookup=n(function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r),o=this.fs.getMode(e);return this.fs.createNode(t,r,o)},"lookup"),dt.prototype.mknod=n(function(t,r,e,o){var s=this.fs.createNode(t,r,e,o),a=this.fs.realPath(s);try{this.FS.isDir(s.mode)?this.nodefs.mkdirSync(a,s.mode):this.nodefs.writeFileSync(a,"",{mode:s.mode})}catch(u){throw u.code?new this.FS.ErrnoError(this.ERRNO_CODES[u.code]):u}return s},"mknod"),dt.prototype.rename=n(function(t,r,e){var o=this.fs.realPath(t),s=this.PATH.join2(this.fs.realPath(r),e);try{this.nodefs.renameSync(o,s),t.name=e,t.parent=r}catch(a){throw a.code?new this.FS.ErrnoError(this.ERRNO_CODES[a.code]):a}},"rename"),dt.prototype.unlink=n(function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.unlinkSync(e)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},"unlink"),dt.prototype.rmdir=n(function(t,r){var e=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.rmdirSync(e)}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},"rmdir"),dt.prototype.readdir=n(function(t){var r=this.fs.realPath(t);try{var e=this.nodefs.readdirSync(r);return e.push(".",".."),e}catch(o){throw o.code?new this.FS.ErrnoError(this.ERRNO_CODES[o.code]):o}},"readdir"),dt.prototype.symlink=n(function(t,r,e){var o=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.symlinkSync(e,o)}catch(s){throw s.code?new this.FS.ErrnoError(this.ERRNO_CODES[s.code]):s}},"symlink"),dt.prototype.readlink=n(function(t){var r=this.fs.realPath(t);try{return this.nodefs.readlinkSync(r)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}},"readlink");var Ft=n(function(t,r,e,o){t===void 0&&(t=self.FS),r===void 0&&(r=self.PATH),e===void 0&&(e=self.ERRNO_CODES),o===void 0&&(o=ct),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=o,this.FS=t,this.PATH=r,this.ERRNO_CODES=e,this.node_ops=new dt(this),this.stream_ops=new ot(this)},"BFSEmscriptenFS");Ft.prototype.mount=n(function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},"mount"),Ft.prototype.createNode=n(function(t,r,e,o){var s=this.FS;if(!s.isDir(e)&&!s.isFile(e)&&!s.isLink(e))throw new s.ErrnoError(this.ERRNO_CODES.EINVAL);var a=s.createNode(t,r,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},"createNode"),Ft.prototype.getMode=n(function(t){var r;try{r=this.nodefs.lstatSync(t)}catch(e){throw e.code?new this.FS.ErrnoError(this.ERRNO_CODES[e.code]):e}return r.mode},"getMode"),Ft.prototype.realPath=n(function(t){for(var r=[];t.parent!==t;)r.push(t.name),t=t.parent;return r.push(t.mount.opts.root),r.reverse(),this.PATH.join.apply(null,r)},"realPath"),Ft.prototype.flagsToPermissionString=n(function(t){var r=typeof t=="string"?parseInt(t,10):t;return r&=8191,r in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[r]:t},"flagsToPermissionString"),Ft.prototype.getNodeFS=n(function(){return this.nodefs},"getNodeFS"),Ft.prototype.getFS=n(function(){return this.FS},"getFS"),Ft.prototype.getPATH=n(function(){return this.PATH},"getPATH"),Ft.prototype.getERRNO_CODES=n(function(){return this.ERRNO_CODES},"getERRNO_CODES");var $=n(function(){},"BaseFileSystem");$.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),$.prototype.diskSpace=n(function(t,r){r(0,0)},"diskSpace"),$.prototype.openFile=n(function(t,r,e){throw new c(f.ENOTSUP)},"openFile"),$.prototype.createFile=n(function(t,r,e,o){throw new c(f.ENOTSUP)},"createFile"),$.prototype.open=n(function(t,r,e,o){var s=this,a=n(function(u,p){if(u)switch(r.pathNotExistsAction()){case D.CREATE_FILE:return s.stat(d.dirname(t),!1,function(g,T){g?o(g):T&&!T.isDirectory()?o(c.ENOTDIR(d.dirname(t))):s.createFile(t,r,e,o)});case D.THROW_EXCEPTION:return o(c.ENOENT(t));default:return o(new c(f.EINVAL,"Invalid FileFlag object."))}else{if(p&&p.isDirectory())return o(c.EISDIR(t));switch(r.pathExistsAction()){case D.THROW_EXCEPTION:return o(c.EEXIST(t));case D.TRUNCATE_FILE:return s.openFile(t,r,function(g,T){g?o(g):T?T.truncate(0,function(){T.sync(function(){o(null,T)})}):W()});case D.NOP:return s.openFile(t,r,o);default:return o(new c(f.EINVAL,"Invalid FileFlag object."))}}},"mustBeFile");this.stat(t,!1,a)},"open"),$.prototype.rename=n(function(t,r,e){e(new c(f.ENOTSUP))},"rename"),$.prototype.renameSync=n(function(t,r){throw new c(f.ENOTSUP)},"renameSync"),$.prototype.stat=n(function(t,r,e){e(new c(f.ENOTSUP))},"stat"),$.prototype.statSync=n(function(t,r){throw new c(f.ENOTSUP)},"statSync"),$.prototype.openFileSync=n(function(t,r,e){throw new c(f.ENOTSUP)},"openFileSync"),$.prototype.createFileSync=n(function(t,r,e){throw new c(f.ENOTSUP)},"createFileSync"),$.prototype.openSync=n(function(t,r,e){var o;try{o=this.statSync(t,!1)}catch{switch(r.pathNotExistsAction()){case D.CREATE_FILE:var s=this.statSync(d.dirname(t),!1);if(!s.isDirectory())throw c.ENOTDIR(d.dirname(t));return this.createFileSync(t,r,e);case D.THROW_EXCEPTION:throw c.ENOENT(t);default:throw new c(f.EINVAL,"Invalid FileFlag object.")}}if(o.isDirectory())throw c.EISDIR(t);switch(r.pathExistsAction()){case D.THROW_EXCEPTION:throw c.EEXIST(t);case D.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,r,o.mode);case D.NOP:return this.openFileSync(t,r,e);default:throw new c(f.EINVAL,"Invalid FileFlag object.")}},"openSync"),$.prototype.unlink=n(function(t,r){r(new c(f.ENOTSUP))},"unlink"),$.prototype.unlinkSync=n(function(t){throw new c(f.ENOTSUP)},"unlinkSync"),$.prototype.rmdir=n(function(t,r){r(new c(f.ENOTSUP))},"rmdir"),$.prototype.rmdirSync=n(function(t){throw new c(f.ENOTSUP)},"rmdirSync"),$.prototype.mkdir=n(function(t,r,e){e(new c(f.ENOTSUP))},"mkdir"),$.prototype.mkdirSync=n(function(t,r){throw new c(f.ENOTSUP)},"mkdirSync"),$.prototype.readdir=n(function(t,r){r(new c(f.ENOTSUP))},"readdir"),$.prototype.readdirSync=n(function(t){throw new c(f.ENOTSUP)},"readdirSync"),$.prototype.exists=n(function(t,r){this.stat(t,null,function(e){r(!e)})},"exists"),$.prototype.existsSync=n(function(t){try{return this.statSync(t,!0),!0}catch{return!1}},"existsSync"),$.prototype.realpath=n(function(t,r,e){if(this.supportsLinks())for(var o=t.split(d.sep),s=0;s<o.length;s++){var a=o.slice(0,s+1);o[s]=d.join.apply(null,a)}else this.exists(t,function(u){u?e(null,t):e(c.ENOENT(t))})},"realpath"),$.prototype.realpathSync=n(function(t,r){if(this.supportsLinks()){for(var e=t.split(d.sep),o=0;o<e.length;o++){var s=e.slice(0,o+1);e[o]=d.join.apply(d,s)}return e.join(d.sep)}else{if(this.existsSync(t))return t;throw c.ENOENT(t)}},"realpathSync"),$.prototype.truncate=n(function(t,r,e){this.open(t,C.getFileFlag("r+"),420,function(o,s){if(o)return e(o);s.truncate(r,function(a){s.close(function(u){e(a||u)})})})},"truncate"),$.prototype.truncateSync=n(function(t,r){var e=this.openSync(t,C.getFileFlag("r+"),420);try{e.truncateSync(r)}catch(o){throw o}finally{e.closeSync()}},"truncateSync"),$.prototype.readFile=n(function(t,r,e,o){var s=o;this.open(t,e,420,function(a,u){if(a)return o(a);o=n(function(p,g){u.close(function(T){return p||(p=T),s(p,g)})},"cb"),u.stat(function(p,g){if(p)return o(p);var T=m.alloc(g.size);u.read(T,0,g.size,0,function(M){if(M)return o(M);if(r===null)return o(M,T);try{o(null,T.toString(r))}catch(X){o(X)}})})})},"readFile"),$.prototype.readFileSync=n(function(t,r,e){var o=this.openSync(t,e,420);try{var s=o.statSync(),a=m.alloc(s.size);return o.readSync(a,0,s.size,0),o.closeSync(),r===null?a:a.toString(r)}finally{o.closeSync()}},"readFileSync"),$.prototype.writeFile=n(function(t,r,e,o,s,a){var u=a;this.open(t,o,420,function(p,g){if(p)return a(p);a=n(function(T){g.close(function(M){u(T||M)})},"cb");try{typeof r=="string"&&(r=m.from(r,e))}catch(T){return a(T)}g.write(r,0,r.length,0,a)})},"writeFile"),$.prototype.writeFileSync=n(function(t,r,e,o,s){var a=this.openSync(t,o,s);try{typeof r=="string"&&(r=m.from(r,e)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},"writeFileSync"),$.prototype.appendFile=n(function(t,r,e,o,s,a){var u=a;this.open(t,o,s,function(p,g){if(p)return a(p);a=n(function(T){g.close(function(M){u(T||M)})},"cb"),typeof r=="string"&&(r=m.from(r,e)),g.write(r,0,r.length,null,a)})},"appendFile"),$.prototype.appendFileSync=n(function(t,r,e,o,s){var a=this.openSync(t,o,s);try{typeof r=="string"&&(r=m.from(r,e)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},"appendFileSync"),$.prototype.chmod=n(function(t,r,e,o){o(new c(f.ENOTSUP))},"chmod"),$.prototype.chmodSync=n(function(t,r,e){throw new c(f.ENOTSUP)},"chmodSync"),$.prototype.chown=n(function(t,r,e,o,s){s(new c(f.ENOTSUP))},"chown"),$.prototype.chownSync=n(function(t,r,e,o){throw new c(f.ENOTSUP)},"chownSync"),$.prototype.utimes=n(function(t,r,e,o){o(new c(f.ENOTSUP))},"utimes"),$.prototype.utimesSync=n(function(t,r,e){throw new c(f.ENOTSUP)},"utimesSync"),$.prototype.link=n(function(t,r,e){e(new c(f.ENOTSUP))},"link"),$.prototype.linkSync=n(function(t,r){throw new c(f.ENOTSUP)},"linkSync"),$.prototype.symlink=n(function(t,r,e,o){o(new c(f.ENOTSUP))},"symlink"),$.prototype.symlinkSync=n(function(t,r,e){throw new c(f.ENOTSUP)},"symlinkSync"),$.prototype.readlink=n(function(t,r){r(new c(f.ENOTSUP))},"readlink"),$.prototype.readlinkSync=n(function(t){throw new c(f.ENOTSUP)},"readlinkSync");var ie=function(i){function t(){i.apply(this,arguments)}return n(t,"SynchronousFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.rename=n(function(e,o,s){try{this.renameSync(e,o),s()}catch(a){s(a)}},"rename"),t.prototype.stat=n(function(e,o,s){try{s(null,this.statSync(e,o))}catch(a){s(a)}},"stat"),t.prototype.open=n(function(e,o,s,a){try{a(null,this.openSync(e,o,s))}catch(u){a(u)}},"open"),t.prototype.unlink=n(function(e,o){try{this.unlinkSync(e),o()}catch(s){o(s)}},"unlink"),t.prototype.rmdir=n(function(e,o){try{this.rmdirSync(e),o()}catch(s){o(s)}},"rmdir"),t.prototype.mkdir=n(function(e,o,s){try{this.mkdirSync(e,o),s()}catch(a){s(a)}},"mkdir"),t.prototype.readdir=n(function(e,o){try{o(null,this.readdirSync(e))}catch(s){o(s)}},"readdir"),t.prototype.chmod=n(function(e,o,s,a){try{this.chmodSync(e,o,s),a()}catch(u){a(u)}},"chmod"),t.prototype.chown=n(function(e,o,s,a,u){try{this.chownSync(e,o,s,a),u()}catch(p){u(p)}},"chown"),t.prototype.utimes=n(function(e,o,s,a){try{this.utimesSync(e,o,s),a()}catch(u){a(u)}},"utimes"),t.prototype.link=n(function(e,o,s){try{this.linkSync(e,o),s()}catch(a){s(a)}},"link"),t.prototype.symlink=n(function(e,o,s,a){try{this.symlinkSync(e,o,s),a()}catch(u){a(u)}},"symlink"),t.prototype.readlink=n(function(e,o){try{o(null,this.readlinkSync(e))}catch(s){o(s)}},"readlink"),t}($),wt=n(function(){},"BaseFile");wt.prototype.sync=n(function(t){t(new c(f.ENOTSUP))},"sync"),wt.prototype.syncSync=n(function(){throw new c(f.ENOTSUP)},"syncSync"),wt.prototype.datasync=n(function(t){this.sync(t)},"datasync"),wt.prototype.datasyncSync=n(function(){return this.syncSync()},"datasyncSync"),wt.prototype.chown=n(function(t,r,e){e(new c(f.ENOTSUP))},"chown"),wt.prototype.chownSync=n(function(t,r){throw new c(f.ENOTSUP)},"chownSync"),wt.prototype.chmod=n(function(t,r){r(new c(f.ENOTSUP))},"chmod"),wt.prototype.chmodSync=n(function(t){throw new c(f.ENOTSUP)},"chmodSync"),wt.prototype.utimes=n(function(t,r,e){e(new c(f.ENOTSUP))},"utimes"),wt.prototype.utimesSync=n(function(t,r){throw new c(f.ENOTSUP)},"utimesSync");var fe=function(i){function t(r,e,o,s,a){if(i.call(this),this._pos=0,this._dirty=!1,this._fs=r,this._path=e,this._flag=o,this._stat=s,a?this._buffer=a:this._buffer=Pt(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return n(t,"PreloadFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getBuffer=n(function(){return this._buffer},"getBuffer"),t.prototype.getStats=n(function(){return this._stat},"getStats"),t.prototype.getFlag=n(function(){return this._flag},"getFlag"),t.prototype.getPath=n(function(){return this._path},"getPath"),t.prototype.getPos=n(function(){return this._flag.isAppendable()?this._stat.size:this._pos},"getPos"),t.prototype.advancePos=n(function(e){return this._pos+=e},"advancePos"),t.prototype.setPos=n(function(e){return this._pos=e},"setPos"),t.prototype.sync=n(function(e){try{this.syncSync(),e()}catch(o){e(o)}},"sync"),t.prototype.syncSync=n(function(){throw new c(f.ENOTSUP)},"syncSync"),t.prototype.close=n(function(e){try{this.closeSync(),e()}catch(o){e(o)}},"close"),t.prototype.closeSync=n(function(){throw new c(f.ENOTSUP)},"closeSync"),t.prototype.stat=n(function(e){try{e(null,this._stat.clone())}catch(o){e(o)}},"stat"),t.prototype.statSync=n(function(){return this._stat.clone()},"statSync"),t.prototype.truncate=n(function(e,o){try{this.truncateSync(e),this._flag.isSynchronous()&&!ct.getRootFS().supportsSynch()&&this.sync(o),o()}catch(s){return o(s)}},"truncate"),t.prototype.truncateSync=n(function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new c(f.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var o=m.alloc(e-this._buffer.length,0);this.writeSync(o,0,o.length,this._buffer.length),this._flag.isSynchronous()&&ct.getRootFS().supportsSynch()&&this.syncSync();return}this._stat.size=e;var s=m.alloc(e);this._buffer.copy(s,0,0,e),this._buffer=s,this._flag.isSynchronous()&&ct.getRootFS().supportsSynch()&&this.syncSync()},"truncateSync"),t.prototype.write=n(function(e,o,s,a,u){try{u(null,this.writeSync(e,o,s,a),e)}catch(p){u(p)}},"write"),t.prototype.writeSync=n(function(e,o,s,a){if(this._dirty=!0,a==null&&(a=this.getPos()),!this._flag.isWriteable())throw new c(f.EPERM,"File not opened with a writeable mode.");var u=a+s;if(u>this._stat.size&&(this._stat.size=u,u>this._buffer.length)){var p=m.alloc(u);this._buffer.copy(p),this._buffer=p}var g=e.copy(this._buffer,a,o,o+s);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),g):(this.setPos(a+g),g)},"writeSync"),t.prototype.read=n(function(e,o,s,a,u){try{u(null,this.readSync(e,o,s,a),e)}catch(p){u(p)}},"read"),t.prototype.readSync=n(function(e,o,s,a){if(!this._flag.isReadable())throw new c(f.EPERM,"File not opened with a readable mode.");a==null&&(a=this.getPos());var u=a+s;u>this._stat.size&&(s=this._stat.size-a);var p=this._buffer.copy(e,o,a,a+s);return this._stat.atime=new Date,this._pos=a+s,p},"readSync"),t.prototype.chmod=n(function(e,o){try{this.chmodSync(e),o()}catch(s){o(s)}},"chmod"),t.prototype.chmodSync=n(function(e){if(!this._fs.supportsProps())throw new c(f.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},"chmodSync"),t.prototype.isDirty=n(function(){return this._dirty},"isDirty"),t.prototype.resetDirty=n(function(){this._dirty=!1},"resetDirty"),t}(wt),le=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"NoSyncFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=n(function(e){e()},"sync"),t.prototype.syncSync=n(function(){},"syncSync"),t.prototype.close=n(function(e){e()},"close"),t.prototype.closeSync=n(function(){},"closeSync"),t}(fe),Ie=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"MirrorFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.syncSync=n(function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},"syncSync"),t.prototype.closeSync=n(function(){this.syncSync()},"closeSync"),t}(fe),I=function(i){function t(r,e,o){if(o===void 0&&(o=!0),i.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=e,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");Ot(o,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return n(t,"AsyncMirror"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){try{var s=new t(e.sync,e.async,!1);s.initialize(function(a){a?o(a):o(null,s)},!1)}catch(a){o(a)}},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype._syncSync=n(function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,C.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},"_syncSync"),t.prototype.initialize=n(function(e,o){var s=this;o===void 0&&(o=!0),o&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var a=this._initializeCallbacks,u=n(function(M){s._isInitialized=!M,s._initializeCallbacks=[],a.forEach(function(X){return X(M)})},"end");if(this._isInitialized)e();else if(a.push(e)===1){var p=n(function(M,X,tt){M!=="/"&&s._sync.mkdirSync(M,X),s._async.readdir(M,function(it,lt){var vt=0;function It(Kt){Kt?tt(Kt):vt<lt.length?(T(d.join(M,lt[vt]),It),vt++):tt()}n(It,"copyNextFile"),it?tt(it):It()})},"copyDirectory"),g=n(function(M,X,tt){s._async.readFile(M,null,C.getFileFlag("r"),function(it,lt){if(it)tt(it);else try{s._sync.writeFileSync(M,lt,null,C.getFileFlag("w"),X)}catch(vt){it=vt}finally{tt(it)}})},"copyFile"),T=n(function(M,X){s._async.stat(M,!1,function(tt,it){tt?X(tt):it.isDirectory()?p(M,it.mode,X):g(M,it.mode,X)})},"copyItem");p("/",0,u)}},"initialize"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return this._sync.supportsProps()&&this._async.supportsProps()},"supportsProps"),t.prototype.renameSync=n(function(e,o){this.checkInitialized(),this._sync.renameSync(e,o),this.enqueueOp({apiMethod:"rename",arguments:[e,o]})},"renameSync"),t.prototype.statSync=n(function(e,o){return this.checkInitialized(),this._sync.statSync(e,o)},"statSync"),t.prototype.openSync=n(function(e,o,s){this.checkInitialized();var a=this._sync.openSync(e,o,s);return a.closeSync(),new Ie(this,e,o,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,C.getFileFlag("r")))},"openSync"),t.prototype.unlinkSync=n(function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},"unlinkSync"),t.prototype.rmdirSync=n(function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},"rmdirSync"),t.prototype.mkdirSync=n(function(e,o){this.checkInitialized(),this._sync.mkdirSync(e,o),this.enqueueOp({apiMethod:"mkdir",arguments:[e,o]})},"mkdirSync"),t.prototype.readdirSync=n(function(e){return this.checkInitialized(),this._sync.readdirSync(e)},"readdirSync"),t.prototype.existsSync=n(function(e){return this.checkInitialized(),this._sync.existsSync(e)},"existsSync"),t.prototype.chmodSync=n(function(e,o,s){this.checkInitialized(),this._sync.chmodSync(e,o,s),this.enqueueOp({apiMethod:"chmod",arguments:[e,o,s]})},"chmodSync"),t.prototype.chownSync=n(function(e,o,s,a){this.checkInitialized(),this._sync.chownSync(e,o,s,a),this.enqueueOp({apiMethod:"chown",arguments:[e,o,s,a]})},"chownSync"),t.prototype.utimesSync=n(function(e,o,s){this.checkInitialized(),this._sync.utimesSync(e,o,s),this.enqueueOp({apiMethod:"utimes",arguments:[e,o,s]})},"utimesSync"),t.prototype.checkInitialized=n(function(){if(!this._isInitialized)throw new c(f.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},"checkInitialized"),t.prototype.enqueueOp=n(function(e){var o=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var s=n(function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+`
$`),o._queue.length>0){var u=o._queue.shift(),p=u.arguments;p.push(s),o._async[u.apiMethod].apply(o._async,p)}else o._queueRunning=!1},"doNextOp");s()}},"enqueueOp"),t}(ie);I.Name="AsyncMirror",I.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};function l(i,t,r){switch(r.length){case 0:return i.call(t);case 1:return i.call(t,r[0]);case 2:return i.call(t,r[0],r[1]);case 3:return i.call(t,r[0],r[1],r[2])}return i.apply(t,r)}n(l,"apply");var h=Math.max;function L(i,t,r){return t=h(t===void 0?i.length-1:t,0),function(){for(var e=arguments,o=-1,s=h(e.length-t,0),a=Array(s);++o<s;)a[o]=e[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=e[o];return u[t]=r(a),l(i,this,u)}}n(L,"overRest$1");function B(i){return i}n(B,"identity");function Y(i,t){return L(i,t,B)}n(Y,"rest");var J=n(function(i){return Y(function(t){var r=t.pop();i.call(this,t,r)})},"initialParams");function Lt(i){return Y(function(t,r){var e=J(function(o,s){var a=this;return i(t,function(u,p){u.apply(a,o.concat(p))},s)});return r.length?e.apply(this,r):e})}n(Lt,"applyEach$1");var At=typeof b=="object"&&b&&b.Object===Object&&b,jt=typeof self=="object"&&self&&self.Object===Object&&self,Qt=At||jt||Function("return this")(),Mt=Qt.Symbol,ke=Object.prototype,on=ke.hasOwnProperty,Ze=ke.toString,Xe=Mt?Mt.toStringTag:void 0;function nr(i){var t=on.call(i,Xe),r=i[Xe];try{i[Xe]=void 0;var e=!0}catch{}var o=Ze.call(i);return e&&(t?i[Xe]=r:delete i[Xe]),o}n(nr,"getRawTag");var rr=Object.prototype,ir=rr.toString;function V(i){return ir.call(i)}n(V,"objectToString");var at="[object Null]",S="[object Undefined]",ut=Mt?Mt.toStringTag:void 0;function Ut(i){return i==null?i===void 0?S:at:ut&&ut in Object(i)?nr(i):V(i)}n(Ut,"baseGetTag");function st(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}n(st,"isObject");var pe="[object AsyncFunction]",ft="[object Function]",$t="[object GeneratorFunction]",q="[object Proxy]";function K(i){if(!st(i))return!1;var t=Ut(i);return t==ft||t==$t||t==pe||t==q}n(K,"isFunction");var sn=9007199254740991;function Wt(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=sn}n(Wt,"isLength");function pt(i){return i!=null&&Wt(i.length)&&!K(i)}n(pt,"isArrayLike");var Ye={};function Ce(){}n(Ce,"noop");function Xt(i){return function(){if(i!==null){var t=i;i=null,t.apply(this,arguments)}}}n(Xt,"once");var Dt=typeof Symbol=="function"&&Symbol.iterator,oe=n(function(i){return Dt&&i[Dt]&&i[Dt]()},"getIterator");function he(i,t){for(var r=-1,e=Array(i);++r<i;)e[r]=t(r);return e}n(he,"baseTimes");function se(i){return i!=null&&typeof i=="object"}n(se,"isObjectLike");var an="[object Arguments]";function Ke(i){return se(i)&&Ut(i)==an}n(Ke,"baseIsArguments");var qt=Object.prototype,de=qt.hasOwnProperty,re=qt.propertyIsEnumerable,Oe=Ke(function(){return arguments}())?Ke:function(i){return se(i)&&de.call(i,"callee")&&!re.call(i,"callee")},Ee=Array.isArray;function Tn(){return!1}n(Tn,"stubFalse");var kr=typeof v=="object"&&v&&!v.nodeType&&v,Or=kr&&typeof E=="object"&&E&&!E.nodeType&&E,uo=Or&&Or.exports===kr,Lr=uo?Qt.Buffer:void 0,co=Lr?Lr.isBuffer:void 0,lo=co||Tn,ho=9007199254740991,po=/^(?:0|[1-9]\d*)$/;function yo(i,t){return t=t??ho,!!t&&(typeof i=="number"||po.test(i))&&i>-1&&i%1==0&&i<t}n(yo,"isIndex");var vo="[object Arguments]",go="[object Array]",wo="[object Boolean]",mo="[object Date]",So="[object Error]",_o="[object Function]",Eo="[object Map]",Fo="[object Number]",xo="[object Object]",bo="[object RegExp]",Io="[object Set]",ko="[object String]",Oo="[object WeakMap]",Lo="[object ArrayBuffer]",No="[object DataView]",Ro="[object Float32Array]",Do="[object Float64Array]",To="[object Int8Array]",Ao="[object Int16Array]",Co="[object Int32Array]",Mo="[object Uint8Array]",Po="[object Uint8ClampedArray]",jo="[object Uint16Array]",Bo="[object Uint32Array]",Ht={};Ht[Ro]=Ht[Do]=Ht[To]=Ht[Ao]=Ht[Co]=Ht[Mo]=Ht[Po]=Ht[jo]=Ht[Bo]=!0,Ht[vo]=Ht[go]=Ht[Lo]=Ht[wo]=Ht[No]=Ht[mo]=Ht[So]=Ht[_o]=Ht[Eo]=Ht[Fo]=Ht[xo]=Ht[bo]=Ht[Io]=Ht[ko]=Ht[Oo]=!1;function Uo(i){return se(i)&&Wt(i.length)&&!!Ht[Ut(i)]}n(Uo,"baseIsTypedArray");function zo(i){return function(t){return i(t)}}n(zo,"baseUnary");var Nr=typeof v=="object"&&v&&!v.nodeType&&v,Rr=Nr&&typeof E=="object"&&E&&!E.nodeType&&E,Wo=Rr&&Rr.exports===Nr,or=Wo&&At.process,Dr=function(){try{return or&&or.binding&&or.binding("util")}catch{}}(),Tr=Dr&&Dr.isTypedArray,Ho=Tr?zo(Tr):Uo,Vo=Object.prototype,Zo=Vo.hasOwnProperty;function Xo(i,t){var r=Ee(i),e=!r&&Oe(i),o=!r&&!e&&lo(i),s=!r&&!e&&!o&&Ho(i),a=r||e||o||s,u=a?he(i.length,String):[],p=u.length;for(var g in i)(t||Zo.call(i,g))&&!(a&&(g=="length"||o&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||yo(g,p)))&&u.push(g);return u}n(Xo,"arrayLikeKeys");var Yo=Object.prototype;function Ko(i){var t=i&&i.constructor,r=typeof t=="function"&&t.prototype||Yo;return i===r}n(Ko,"isPrototype");function qo(i,t){return function(r){return i(t(r))}}n(qo,"overArg");var Go=qo(Object.keys,Object),Jo=Object.prototype,Qo=Jo.hasOwnProperty;function $o(i){if(!Ko(i))return Go(i);var t=[];for(var r in Object(i))Qo.call(i,r)&&r!="constructor"&&t.push(r);return t}n($o,"baseKeys");function ts(i){return pt(i)?Xo(i):$o(i)}n(ts,"keys");function es(i){var t=-1,r=i.length;return n(function(){return++t<r?{value:i[t],key:t}:null},"next")}n(es,"createArrayIterator");function ns(i){var t=-1;return n(function(){var e=i.next();return e.done?null:(t++,{value:e.value,key:t})},"next")}n(ns,"createES2015Iterator");function rs(i){var t=ts(i),r=-1,e=t.length;return n(function(){var s=t[++r];return r<e?{value:i[s],key:s}:null},"next")}n(rs,"createObjectIterator");function is(i){if(pt(i))return es(i);var t=oe(i);return t?ns(t):rs(i)}n(is,"iterator");function Ar(i){return function(){if(i===null)throw new Error("Callback was already called.");var t=i;i=null,t.apply(this,arguments)}}n(Ar,"onlyOnce");function Cr(i){return function(t,r,e){if(e=Xt(e||Ce),i<=0||!t)return e(null);var o=is(t),s=!1,a=0;function u(g,T){if(a-=1,g)s=!0,e(g);else{if(T===Ye||s&&a<=0)return s=!0,e(null);p()}}n(u,"iterateeCallback");function p(){for(;a<i&&!s;){var g=o();if(g===null){s=!0,a<=0&&e(null);return}a+=1,r(g.value,g.key,Ar(u))}}n(p,"replenish"),p()}}n(Cr,"_eachOfLimit");function Mr(i,t,r,e){Cr(t)(i,r,e)}n(Mr,"eachOfLimit");function sr(i,t){return function(r,e,o){return i(r,t,e,o)}}n(sr,"doLimit");function os(i,t,r){r=Xt(r||Ce);var e=0,o=0,s=i.length;s===0&&r(null);function a(u,p){u?r(u):(++o===s||p===Ye)&&r(null)}for(n(a,"iteratorCallback");e<s;e++)t(i[e],e,Ar(a))}n(os,"eachOfArrayLike");var ss=sr(Mr,1/0),Pr=n(function(i,t,r){var e=pt(i)?os:ss;e(i,t,r)},"eachOf");function as(i){return function(t,r,e){return i(Pr,t,r,e)}}n(as,"doParallel");function jr(i,t,r,e){e=e||Ce,t=t||[];var o=[],s=0;i(t,function(a,u,p){var g=s++;r(a,function(T,M){o[g]=M,p(T)})},function(a){e(a,o)})}n(jr,"_asyncMap");var fs=as(jr);Lt(fs);function us(i){return function(t,r,e,o){return i(Cr(r),t,e,o)}}n(us,"doParallelLimit");var cs=us(jr),ls=sr(cs,1);Lt(ls),Y(function(i,t){return Y(function(r){return i.apply(null,t.concat(r))})});function hs(i,t){for(var r=-1,e=i==null?0:i.length;++r<e&&t(i[r],r,i)!==!1;);return i}n(hs,"arrayEach");var Br=typeof setImmediate=="function"&&setImmediate,Ur=typeof k=="object"&&typeof k.nextTick=="function";function zr(i){setTimeout(i,0)}n(zr,"fallback");function Wr(i){return Y(function(t,r){i(function(){t.apply(null,r)})})}n(Wr,"wrap");var An;Br?An=setImmediate:Ur?An=k.nextTick:An=zr,Wr(An);var ps=sr(Mr,1);function ds(i,t,r,e){e=Xt(e||Ce),ps(i,function(o,s,a){r(t,o,function(u,p){t=p,a(u)})},function(o){e(o,t)})}n(ds,"reduce");var ys=Y(n(function(t){return Y(function(r){var e=this,o=r[r.length-1];typeof o=="function"?r.pop():o=Ce,ds(t,r,function(s,a,u){a.apply(e,s.concat(Y(function(p,g){u(p,g)})))},function(s,a){o.apply(e,[s].concat(a))})})},"seq"));Y(function(i){return ys.apply(null,i.reverse())}),Y(function(i){var t=[null].concat(i);return J(function(r,e){return e.apply(this,t)})});function Hr(i){return Y(function(t,r){t.apply(null,r.concat(Y(function(e,o){typeof console=="object"&&(e?console.error&&console.error(e):console[i]&&hs(o,function(s){console[i](s)}))})))})}n(Hr,"consoleFunc"),Hr("dir");function vs(i){return function(t,r,e){return i(t,e)}}n(vs,"_withoutIndex");function Vr(i,t,r){Pr(i,vs(t),r)}n(Vr,"eachLimit"),Hr("log");var Cn;Ur?Cn=k.nextTick:Br?Cn=setImmediate:Cn=zr,Wr(Cn);var ye;function gs(){ye||(ye={},ye[Dropbox.ApiError.NETWORK_ERROR]=f.EIO,ye[Dropbox.ApiError.INVALID_PARAM]=f.EINVAL,ye[Dropbox.ApiError.INVALID_TOKEN]=f.EPERM,ye[Dropbox.ApiError.OAUTH_ERROR]=f.EPERM,ye[Dropbox.ApiError.NOT_FOUND]=f.ENOENT,ye[Dropbox.ApiError.INVALID_METHOD]=f.EINVAL,ye[Dropbox.ApiError.NOT_ACCEPTABLE]=f.EINVAL,ye[Dropbox.ApiError.CONFLICT]=f.EINVAL,ye[Dropbox.ApiError.RATE_LIMITED]=f.EBUSY,ye[Dropbox.ApiError.SERVER_ERROR]=f.EBUSY,ye[Dropbox.ApiError.OVER_QUOTA]=f.ENOSPC)}n(gs,"constructErrorCodeLookup");function ws(i){return i&&i.stat.isFile}n(ws,"isFileInfo");function ms(i){return i&&i.stat.isFolder}n(ms,"isDirInfo");function Ss(i){return i==null||typeof i=="object"&&typeof i.byteLength=="number"}n(Ss,"isArrayBuffer");var ue=n(function(t){this._cache={},this._client=t},"CachedDropboxClient");ue.prototype.readdir=n(function(t,r){var e=this,o=this.getCachedDirInfo(t);this._wrap(function(s){o!==null&&o.contents?e._client.readdir(t,{contentHash:o.stat.contentHash},s):e._client.readdir(t,s)},function(s,a,u,p){s?s.status===Dropbox.ApiError.NO_CONTENT&&o!==null?r(null,o.contents.slice(0)):r(s):(e.updateCachedDirInfo(t,u,a.slice(0)),p.forEach(function(g){e.updateCachedInfo(d.join(t,g.name),g)}),r(null,a))})},"readdir"),ue.prototype.remove=n(function(t,r){var e=this;this._wrap(function(o){e._client.remove(t,o)},function(o,s){o||e.updateCachedInfo(t,s),r(o)})},"remove"),ue.prototype.move=n(function(t,r,e){var o=this;this._wrap(function(s){o._client.move(t,r,s)},function(s,a){s||(o.deleteCachedInfo(t),o.updateCachedInfo(r,a)),e(s)})},"move"),ue.prototype.stat=n(function(t,r){var e=this;this._wrap(function(o){e._client.stat(t,o)},function(o,s){o||e.updateCachedInfo(t,s),r(o,s)})},"stat"),ue.prototype.readFile=n(function(t,r){var e=this,o=this.getCachedFileInfo(t);o!==null&&o.contents!==null?this.stat(t,function(s,a){s?r(s):a.contentHash===o.stat.contentHash?r(s,o.contents.slice(0),o.stat):e.readFile(t,r)}):this._wrap(function(s){e._client.readFile(t,{arrayBuffer:!0},s)},function(s,a,u){s||e.updateCachedInfo(t,u,a.slice(0)),r(s,a,u)})},"readFile"),ue.prototype.writeFile=n(function(t,r,e){var o=this;this._wrap(function(s){o._client.writeFile(t,r,s)},function(s,a){s||o.updateCachedInfo(t,a,r.slice(0)),e(s,a)})},"writeFile"),ue.prototype.mkdir=n(function(t,r){var e=this;this._wrap(function(o){e._client.mkdir(t,o)},function(o,s){o||e.updateCachedInfo(t,s,[]),r(o)})},"mkdir"),ue.prototype._wrap=n(function(t,r){var e=0,o=n(function(s){var a=2;if(s&&3>++e)switch(s.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout(function(){t(o)},a*1e3);break;default:r.apply(null,arguments);break}else r.apply(null,arguments)},"interceptCb");t(o)},"_wrap"),ue.prototype.getCachedInfo=n(function(t){return this._cache[t.toLowerCase()]},"getCachedInfo"),ue.prototype.putCachedInfo=n(function(t,r){this._cache[t.toLowerCase()]=r},"putCachedInfo"),ue.prototype.deleteCachedInfo=n(function(t){delete this._cache[t.toLowerCase()]},"deleteCachedInfo"),ue.prototype.getCachedDirInfo=n(function(t){var r=this.getCachedInfo(t);return ms(r)?r:null},"getCachedDirInfo"),ue.prototype.getCachedFileInfo=n(function(t){var r=this.getCachedInfo(t);return ws(r)?r:null},"getCachedFileInfo"),ue.prototype.updateCachedDirInfo=n(function(t,r,e){e===void 0&&(e=null);var o=this.getCachedInfo(t);r.contentHash!==null&&(o===void 0||o.stat.contentHash!==r.contentHash)&&this.putCachedInfo(t,{stat:r,contents:e})},"updateCachedDirInfo"),ue.prototype.updateCachedFileInfo=n(function(t,r,e){e===void 0&&(e=null);var o=this.getCachedInfo(t);r.versionTag!==null&&(o===void 0||o.stat.versionTag!==r.versionTag)&&this.putCachedInfo(t,{stat:r,contents:e})},"updateCachedFileInfo"),ue.prototype.updateCachedInfo=n(function(t,r,e){e===void 0&&(e=null),r.isFile&&Ss(e)?this.updateCachedFileInfo(t,r,e):r.isFolder&&Array.isArray(e)&&this.updateCachedDirInfo(t,r,e)},"updateCachedInfo");var _s=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"DropboxFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=n(function(e){var o=this;if(this.isDirty()){var s=this.getBuffer(),a=Q(s);this._fs._writeFileStrict(this.getPath(),a,function(u){u||o.resetDirty(),e(u)})}else e()},"sync"),t.prototype.close=n(function(e){this.sync(e)},"close"),t}(fe),Mn=function(i){function t(r,e){e===void 0&&(e=!0),i.call(this),this._client=new ue(r),Ot(e,t.Name,{client:"authenticated dropbox client instance"}),gs()}return n(t,"DropboxFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){o(null,new t(e.client,!1))},"Create"),t.isAvailable=n(function(){return typeof Dropbox<"u"},"isAvailable"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSymlinks=n(function(){return!1},"supportsSymlinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!1},"supportsSynch"),t.prototype.empty=n(function(e){var o=this;this._client.readdir("/",function(s,a){if(s)e(o.convert(s,"/"));else{var u=n(function(g,T){var M=d.join("/",g);o._client.remove(M,function(X){T(X?o.convert(X,M):null)})},"deleteFile"),p=n(function(g){g?e(g):e()},"finished");Vr(a,u,p)}})},"empty"),t.prototype.rename=n(function(e,o,s){var a=this;this._client.move(e,o,function(u){u?a._client.stat(o,function(p,g){if(p||g.isFolder){var T=u.response.error.indexOf(e)>-1?e:o;s(a.convert(u,T))}else a._client.remove(o,function(M){M?s(a.convert(M,o)):a.rename(e,o,s)})}):s()})},"rename"),t.prototype.stat=n(function(e,o,s){var a=this;this._client.stat(e,function(u,p){if(u)s(a.convert(u,e));else if(p&&p.isRemoved)s(c.FileError(f.ENOENT,e));else{var g=new j(a._statType(p),p.size);return s(null,g)}})},"stat"),t.prototype.open=n(function(e,o,s,a){var u=this;this._client.readFile(e,function(p,g,T){if(p)if(o.isReadable())a(u.convert(p,e));else switch(p.status){case Dropbox.ApiError.NOT_FOUND:var M=new ArrayBuffer(0);return u._writeFileStrict(e,M,function(it,lt){if(it)a(it);else{var vt=u._makeFile(e,o,lt,Et(M));a(null,vt)}});default:return a(u.convert(p,e))}else{var X;g===null?X=Pt():X=Et(g);var tt=u._makeFile(e,o,T,X);return a(null,tt)}})},"open"),t.prototype._writeFileStrict=n(function(e,o,s){var a=this,u=d.dirname(e);this.stat(u,!1,function(p,g){p?s(c.FileError(f.ENOENT,u)):a._client.writeFile(e,o,function(T,M){T?s(a.convert(T,e)):s(null,M)})})},"_writeFileStrict"),t.prototype._statType=n(function(e){return e.isFile?P.FILE:P.DIRECTORY},"_statType"),t.prototype._makeFile=n(function(e,o,s,a){var u=this._statType(s),p=new j(u,s.size);return new _s(this,e,o,p,a)},"_makeFile"),t.prototype._remove=n(function(e,o,s){var a=this;this._client.stat(e,function(u,p){u?o(a.convert(u,e)):p.isFile&&!s?o(c.FileError(f.ENOTDIR,e)):!p.isFile&&s?o(c.FileError(f.EISDIR,e)):a._client.remove(e,function(g){o(g?a.convert(g,e):null)})})},"_remove"),t.prototype.unlink=n(function(e,o){this._remove(e,o,!0)},"unlink"),t.prototype.rmdir=n(function(e,o){this._remove(e,o,!1)},"rmdir"),t.prototype.mkdir=n(function(e,o,s){var a=this,u=d.dirname(e);this._client.stat(u,function(p,g){p?s(a.convert(p,u)):a._client.mkdir(e,function(T){s(T?c.FileError(f.EEXIST,e):null)})})},"mkdir"),t.prototype.readdir=n(function(e,o){var s=this;this._client.readdir(e,function(a,u){return a?o(s.convert(a)):o(null,u)})},"readdir"),t.prototype.convert=n(function(e,o){o===void 0&&(o=null);var s=ye[e.status];return s===void 0&&(s=f.EIO),o?c.FileError(s,o):new c(s)},"convert"),t}($);Mn.Name="Dropbox",Mn.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(i,t){i.isAuthenticated&&i.isAuthenticated()?t():t(new c(f.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};function Gt(i,t){t===void 0&&(t="");for(var r=i.errno,e=i.node,o=[];e&&(o.unshift(e.name),e!==e.parent);)e=e.parent;return new c(r,x[r],o.length>0?"/"+o.join("/"):t)}n(Gt,"convertError");var Es=function(i){function t(r,e,o,s){i.call(this),this._fs=r,this._FS=e,this._path=o,this._stream=s}return n(t,"EmscriptenFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getPos=n(function(){},"getPos"),t.prototype.close=n(function(e){var o=null;try{this.closeSync()}catch(s){o=s}finally{e(o)}},"close"),t.prototype.closeSync=n(function(){try{this._FS.close(this._stream)}catch(e){throw Gt(e,this._path)}},"closeSync"),t.prototype.stat=n(function(e){try{e(null,this.statSync())}catch(o){e(o)}},"stat"),t.prototype.statSync=n(function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw Gt(e,this._path)}},"statSync"),t.prototype.truncate=n(function(e,o){var s=null;try{this.truncateSync(e)}catch(a){s=a}finally{o(s)}},"truncate"),t.prototype.truncateSync=n(function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(o){throw Gt(o,this._path)}},"truncateSync"),t.prototype.write=n(function(e,o,s,a,u){try{u(null,this.writeSync(e,o,s,a),e)}catch(p){u(p)}},"write"),t.prototype.writeSync=n(function(e,o,s,a){try{var u=ht(e),p=a===null?void 0:a;return this._FS.write(this._stream,u,o,s,p)}catch(g){throw Gt(g,this._path)}},"writeSync"),t.prototype.read=n(function(e,o,s,a,u){try{u(null,this.readSync(e,o,s,a),e)}catch(p){u(p)}},"read"),t.prototype.readSync=n(function(e,o,s,a){try{var u=ht(e),p=a===null?void 0:a;return this._FS.read(this._stream,u,o,s,p)}catch(g){throw Gt(g,this._path)}},"readSync"),t.prototype.sync=n(function(e){e()},"sync"),t.prototype.syncSync=n(function(){},"syncSync"),t.prototype.chown=n(function(e,o,s){var a=null;try{this.chownSync(e,o)}catch(u){a=u}finally{s(a)}},"chown"),t.prototype.chownSync=n(function(e,o){try{this._FS.fchown(this._stream.fd,e,o)}catch(s){throw Gt(s,this._path)}},"chownSync"),t.prototype.chmod=n(function(e,o){var s=null;try{this.chmodSync(e)}catch(a){s=a}finally{o(s)}},"chmod"),t.prototype.chmodSync=n(function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(o){throw Gt(o,this._path)}},"chmodSync"),t.prototype.utimes=n(function(e,o,s){var a=null;try{this.utimesSync(e,o)}catch(u){a=u}finally{s(a)}},"utimes"),t.prototype.utimesSync=n(function(e,o){this._fs.utimesSync(this._path,e,o)},"utimesSync"),t}(wt),Pn=function(i){function t(r){i.call(this),this._FS=r}return n(t,"EmscriptenFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){o(null,new t(e.FS))},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.getName=n(function(){return this._FS.DB_NAME()},"getName"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsLinks=n(function(){return!0},"supportsLinks"),t.prototype.supportsProps=n(function(){return!0},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.renameSync=n(function(e,o){try{this._FS.rename(e,o)}catch(s){throw s.errno===f.ENOENT?Gt(s,this.existsSync(e)?o:e):Gt(s)}},"renameSync"),t.prototype.statSync=n(function(e,o){try{var s=o?this._FS.lstat(e):this._FS.stat(e),a=this.modeToFileType(s.mode);return new j(a,s.size,s.mode,s.atime,s.mtime,s.ctime)}catch(u){throw Gt(u,e)}},"statSync"),t.prototype.openSync=n(function(e,o,s){try{var a=this._FS.open(e,o.getFlagString(),s);if(this._FS.isDir(a.node.mode))throw this._FS.close(a),c.EISDIR(e);return new Es(this,this._FS,e,a)}catch(u){throw Gt(u,e)}},"openSync"),t.prototype.unlinkSync=n(function(e){try{this._FS.unlink(e)}catch(o){throw Gt(o,e)}},"unlinkSync"),t.prototype.rmdirSync=n(function(e){try{this._FS.rmdir(e)}catch(o){throw Gt(o,e)}},"rmdirSync"),t.prototype.mkdirSync=n(function(e,o){try{this._FS.mkdir(e,o)}catch(s){throw Gt(s,e)}},"mkdirSync"),t.prototype.readdirSync=n(function(e){try{return this._FS.readdir(e).filter(function(o){return o!=="."&&o!==".."})}catch(o){throw Gt(o,e)}},"readdirSync"),t.prototype.truncateSync=n(function(e,o){try{this._FS.truncate(e,o)}catch(s){throw Gt(s,e)}},"truncateSync"),t.prototype.readFileSync=n(function(e,o,s){try{var a=this._FS.readFile(e,{flags:s.getFlagString()}),u=mt(a);return o?u.toString(o):u}catch(p){throw Gt(p,e)}},"readFileSync"),t.prototype.writeFileSync=n(function(e,o,s,a,u){try{s&&(o=m.from(o,s));var p=ht(o);this._FS.writeFile(e,p,{flags:a.getFlagString(),encoding:"binary"}),this._FS.chmod(e,u)}catch(g){throw Gt(g,e)}},"writeFileSync"),t.prototype.chmodSync=n(function(e,o,s){try{o?this._FS.lchmod(e,s):this._FS.chmod(e,s)}catch(a){throw Gt(a,e)}},"chmodSync"),t.prototype.chownSync=n(function(e,o,s,a){try{o?this._FS.lchown(e,s,a):this._FS.chown(e,s,a)}catch(u){throw Gt(u,e)}},"chownSync"),t.prototype.symlinkSync=n(function(e,o,s){try{this._FS.symlink(e,o)}catch(a){throw Gt(a)}},"symlinkSync"),t.prototype.readlinkSync=n(function(e){try{return this._FS.readlink(e)}catch(o){throw Gt(o,e)}},"readlinkSync"),t.prototype.utimesSync=n(function(e,o,s){try{this._FS.utime(e,o.getTime(),s.getTime())}catch(a){throw Gt(a,e)}},"utimesSync"),t.prototype.modeToFileType=n(function(e){if(this._FS.isDir(e))return P.DIRECTORY;if(this._FS.isFile(e))return P.FILE;if(this._FS.isLink(e))return P.SYMLINK;throw c.EPERM("Invalid mode: "+e)},"modeToFileType"),t}(ie);Pn.Name="EmscriptenFileSystem",Pn.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var fn=function(i){function t(r,e){i.call(this),this._folder=r,this._wrapped=e}return n(t,"FolderAdapter"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){o(null,new t(e.folder,e.wrapped))},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.initialize=n(function(e){var o=this;this._wrapped.exists(this._folder,function(s){s?e():o._wrapped.isReadOnly()?e(c.ENOENT(o._folder)):o._wrapped.mkdir(o._folder,511,e)})},"initialize"),t.prototype.getName=n(function(){return this._wrapped.getName()},"getName"),t.prototype.isReadOnly=n(function(){return this._wrapped.isReadOnly()},"isReadOnly"),t.prototype.supportsProps=n(function(){return this._wrapped.supportsProps()},"supportsProps"),t.prototype.supportsSynch=n(function(){return this._wrapped.supportsSynch()},"supportsSynch"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t}($);fn.Name="FolderAdapter",fn.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}};function Zr(i,t){if(t!==null&&typeof t=="object"){var r=t,e=r.path;e&&(e="/"+d.relative(i,e),r.message=r.message.replace(r.path,e),r.path=e)}return t}n(Zr,"translateError");function Fs(i,t){return typeof t=="function"?function(r){arguments.length>0&&(arguments[0]=Zr(i,r)),t.apply(null,arguments)}:t}n(Fs,"wrapCallback");function Xr(i,t,r){return i.slice(i.length-4)!=="Sync"?function(){return arguments.length>0&&(t&&(arguments[0]=d.join(this._folder,arguments[0])),r&&(arguments[1]=d.join(this._folder,arguments[1])),arguments[arguments.length-1]=Fs(this._folder,arguments[arguments.length-1])),this._wrapped[i].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=d.join(this._folder,arguments[0])),r&&(arguments[1]=d.join(this._folder,arguments[1])),this._wrapped[i].apply(this._wrapped,arguments)}catch(e){throw Zr(this._folder,e)}}}n(Xr,"wrapFunction"),["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach(function(i){fn.prototype[i]=Xr(i,!0,!1)}),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach(function(i){fn.prototype[i]=Xr(i,!0,!0)});var jn;typeof window<"u"?jn=window:typeof self<"u"?jn=self:jn=b;var te=jn;function xs(i){return i.isDirectory}n(xs,"isDirectoryEntry");var ar=te.webkitRequestFileSystem||te.requestFileSystem||null;function bs(i,t,r,e){if(typeof navigator.webkitPersistentStorage<"u")switch(i){case te.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,e);break;case te.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,e);break;default:e(new TypeError("Invalid storage type: "+i));break}else te.webkitStorageInfo.requestQuota(i,t,r,e)}n(bs,"_requestQuota");function Is(i){return Array.prototype.slice.call(i||[],0)}n(Is,"_toArray");function Le(i,t,r){switch(i.name){case"PathExistsError":return c.EEXIST(t);case"QuotaExceededError":return c.FileError(f.ENOSPC,t);case"NotFoundError":return c.ENOENT(t);case"SecurityError":return c.FileError(f.EACCES,t);case"InvalidModificationError":return c.FileError(f.EPERM,t);case"TypeMismatchError":return c.FileError(r?f.ENOTDIR:f.EISDIR,t);case"EncodingError":case"InvalidStateError":case"NoModificationAllowedError":default:return c.FileError(f.EINVAL,t)}}n(Le,"convertError$1");var ks=function(i){function t(r,e,o,s,a,u){i.call(this,r,o,s,a,u),this._entry=e}return n(t,"HTML5FSFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=n(function(e){var o=this;if(!this.isDirty())return e();this._entry.createWriter(function(s){var a=o.getBuffer(),u=new Blob([Q(a)]),p=u.size;s.onwriteend=function(g){s.onwriteend=null,s.onerror=null,s.truncate(p),o.resetDirty(),e()},s.onerror=function(g){e(Le(g,o.getPath(),!1))},s.write(u)})},"sync"),t.prototype.close=n(function(e){this.sync(e)},"close"),t}(fe),Bn=function(i){function t(r,e,o){r===void 0&&(r=5),e===void 0&&(e=te.PERSISTENT),o===void 0&&(o=!0),i.call(this),this.size=1024*1024*r,this.type=e,Ot(o,t.Name,{size:r,type:e})}return n(t,"HTML5FS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){var s=new t(e.size,e.type,!1);s.allocate(function(a){return a?o(a):o(null,s)},!1)},"Create"),t.isAvailable=n(function(){return!!ar},"isAvailable"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSymlinks=n(function(){return!1},"supportsSymlinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!1},"supportsSynch"),t.prototype.allocate=n(function(e,o){var s=this;e===void 0&&(e=n(function(){},"cb")),o===void 0&&(o=!0),o&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var a=n(function(p){s.fs=p,e()},"success"),u=n(function(p){e(Le(p,"/",!0))},"error");this.type===te.PERSISTENT?bs(this.type,this.size,function(p){ar(s.type,p,a,u)},u):ar(this.type,this.size,a,u)},"allocate"),t.prototype.empty=n(function(e){this._readdir("/",function(o,s){if(o)console.error("Failed to empty FS"),e(o);else{var a=n(function(p){o?(console.error("Failed to empty FS"),e(o)):e()},"finished"),u=n(function(p,g){var T=n(function(){g()},"succ"),M=n(function(X){g(Le(X,p.fullPath,!p.isDirectory))},"error");xs(p)?p.removeRecursively(T,M):p.remove(T,M)},"deleteEntry");Vr(s,u,a)}})},"empty"),t.prototype.rename=n(function(e,o,s){var a=this,u=2,p=0,g=this.fs.root,T=e,M=n(function(tt){--u<=0&&s(Le(tt,T,!1))},"error"),X=n(function(tt){if(++p===2)return s(new c(f.EINVAL,"Something was identified as both a file and a directory. This should never happen."));if(e===o)return s();T=d.dirname(o),g.getDirectory(T,{},function(it){T=d.basename(o),tt.moveTo(it,T,function(lt){s()},function(lt){tt.isDirectory?(T=o,a.unlink(o,function(vt){vt?M(lt):a.rename(e,o,s)})):M(lt)})},M)},"success");g.getFile(e,{},X,M),g.getDirectory(e,{},X,M)},"rename"),t.prototype.stat=n(function(e,o,s){var a=this,u={create:!1},p=n(function(X){var tt=n(function(it){var lt=new j(P.FILE,it.size);s(null,lt)},"fileFromEntry");X.file(tt,T)},"loadAsFile"),g=n(function(X){var tt=4096,it=new j(P.DIRECTORY,tt);s(null,it)},"loadAsDir"),T=n(function(X){s(Le(X,e,!1))},"failedToLoad"),M=n(function(){a.fs.root.getDirectory(e,u,g,T)},"failedToLoadAsFile");this.fs.root.getFile(e,u,p,M)},"stat"),t.prototype.open=n(function(e,o,s,a){var u=this,p=n(function(g){g.name==="InvalidModificationError"&&o.isExclusive()?a(c.EEXIST(e)):a(Le(g,e,!1))},"error");this.fs.root.getFile(e,{create:o.pathNotExistsAction()===D.CREATE_FILE,exclusive:o.isExclusive()},function(g){g.file(function(T){var M=new FileReader;M.onloadend=function(X){var tt=u._makeFile(e,g,o,T,M.result);a(null,tt)},M.onerror=function(X){p(M.error)},M.readAsArrayBuffer(T)},p)},p)},"open"),t.prototype.unlink=n(function(e,o){this._remove(e,o,!0)},"unlink"),t.prototype.rmdir=n(function(e,o){var s=this;this.readdir(e,function(a,u){a?o(a):u.length>0?o(c.ENOTEMPTY(e)):s._remove(e,o,!1)})},"rmdir"),t.prototype.mkdir=n(function(e,o,s){var a={create:!0,exclusive:!0},u=n(function(g){s()},"success"),p=n(function(g){s(Le(g,e,!0))},"error");this.fs.root.getDirectory(e,a,u,p)},"mkdir"),t.prototype.readdir=n(function(e,o){this._readdir(e,function(s,a){if(a){for(var u=[],p=0,g=a;p<g.length;p+=1){var T=g[p];u.push(T.name)}o(null,u)}else return o(s)})},"readdir"),t.prototype._makeFile=n(function(e,o,s,a,u){u===void 0&&(u=new ArrayBuffer(0));var p=new j(P.FILE,a.size),g=Et(u);return new ks(this,o,e,s,p,g)},"_makeFile"),t.prototype._readdir=n(function(e,o){var s=n(function(a){o(Le(a,e,!0))},"error");this.fs.root.getDirectory(e,{create:!1},function(a){var u=a.createReader(),p=[],g=n(function(){u.readEntries(function(T){T.length?(p=p.concat(Is(T)),g()):o(null,p)},s)},"readEntries");g()},s)},"_readdir"),t.prototype._remove=n(function(e,o,s){var a=n(function(g){var T=n(function(){o()},"succ"),M=n(function(X){o(Le(X,e,!s))},"err");g.remove(T,M)},"success"),u=n(function(g){o(Le(g,e,!s))},"error"),p={create:!1};s?this.fs.root.getFile(e,p,a,u):this.fs.root.getDirectory(e,p,a,u)},"_remove"),t}($);Bn.Name="HTML5FS",Bn.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var ve=n(function(t,r,e,o,s,a){this.id=t,this.size=r,this.mode=e,this.atime=o,this.mtime=s,this.ctime=a},"Inode");ve.fromBuffer=n(function(t){if(t===void 0)throw new Error("NO");return new ve(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},"fromBuffer"),ve.prototype.toStats=n(function(){return new j((this.mode&61440)===P.DIRECTORY?P.DIRECTORY:P.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},"toStats"),ve.prototype.getSize=n(function(){return 30+this.id.length},"getSize"),ve.prototype.toBuffer=n(function(t){return t===void 0&&(t=m.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},"toBuffer"),ve.prototype.update=n(function(t){var r=!1;this.size!==t.size&&(this.size=t.size,r=!0),this.mode!==t.mode&&(this.mode=t.mode,r=!0);var e=t.atime.getTime();this.atime!==e&&(this.atime=e,r=!0);var o=t.mtime.getTime();this.mtime!==o&&(this.mtime=o,r=!0);var s=t.ctime.getTime();return this.ctime!==s&&(this.ctime=s,r=!0),r},"update"),ve.prototype.isFile=n(function(){return(this.mode&61440)===P.FILE},"isFile"),ve.prototype.isDirectory=n(function(){return(this.mode&61440)===P.DIRECTORY},"isDirectory");var We="/",fr=null;function Yr(){return fr||(fr=m.from("{}"))}n(Yr,"getEmptyDirNode");function Un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var t=Math.random()*16|0,r=i==="x"?t:t&3|8;return r.toString(16)})}n(Un,"GenerateRandomID");function me(i,t){return i?(t(i),!1):!0}n(me,"noError");function ne(i,t,r){return i?(t.abort(function(){r(i)}),!1):!0}n(ne,"noErrorTx");var Me=n(function(t){this.store=t,this.originalData={},this.modifiedKeys=[]},"SimpleSyncRWTransaction");Me.prototype.get=n(function(t){var r=this.store.get(t);return this.stashOldValue(t,r),r},"get"),Me.prototype.put=n(function(t,r,e){return this.markModified(t),this.store.put(t,r,e)},"put"),Me.prototype.del=n(function(t){this.markModified(t),this.store.del(t)},"del"),Me.prototype.commit=n(function(){},"commit"),Me.prototype.abort=n(function(){for(var t=this,r=0,e=t.modifiedKeys;r<e.length;r+=1){var o=e[r],s=t.originalData[o];s?t.store.put(o,s,!0):t.store.del(o)}},"abort"),Me.prototype.stashOldValue=n(function(t,r){this.originalData.hasOwnProperty(t)||(this.originalData[t]=r)},"stashOldValue"),Me.prototype.markModified=n(function(t){this.modifiedKeys.indexOf(t)===-1&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))},"markModified");var Kr=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"SyncKeyValueFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.syncSync=n(function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},"syncSync"),t.prototype.closeSync=n(function(){this.syncSync()},"closeSync"),t}(fe),qr=function(i){function t(r){i.call(this),this.store=r.store,this.makeRootDirectory()}return n(t,"SyncKeyValueFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.getName=n(function(){return this.store.name()},"getName"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSymlinks=n(function(){return!1},"supportsSymlinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.empty=n(function(){this.store.clear(),this.makeRootDirectory()},"empty"),t.prototype.renameSync=n(function(e,o){var s=this.store.beginTransaction("readwrite"),a=d.dirname(e),u=d.basename(e),p=d.dirname(o),g=d.basename(o),T=this.findINode(s,a),M=this.getDirListing(s,a,T);if(!M[u])throw c.ENOENT(e);var X=M[u];if(delete M[u],(p+"/").indexOf(e+"/")===0)throw new c(f.EBUSY,a);var tt,it;if(p===a?(tt=T,it=M):(tt=this.findINode(s,p),it=this.getDirListing(s,p,tt)),it[g]){var lt=this.getINode(s,o,it[g]);if(lt.isFile())try{s.del(lt.id),s.del(it[g])}catch(vt){throw s.abort(),vt}else throw c.EPERM(o)}it[g]=X;try{s.put(T.id,m.from(JSON.stringify(M)),!0),s.put(tt.id,m.from(JSON.stringify(it)),!0)}catch(vt){throw s.abort(),vt}s.commit()},"renameSync"),t.prototype.statSync=n(function(e,o){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},"statSync"),t.prototype.createFileSync=n(function(e,o,s){var a=this.store.beginTransaction("readwrite"),u=Pt(),p=this.commitNewFile(a,e,P.FILE,s,u);return new Kr(this,e,o,p.toStats(),u)},"createFileSync"),t.prototype.openFileSync=n(function(e,o){var s=this.store.beginTransaction("readonly"),a=this.findINode(s,e),u=s.get(a.id);if(u===void 0)throw c.ENOENT(e);return new Kr(this,e,o,a.toStats(),u)},"openFileSync"),t.prototype.unlinkSync=n(function(e){this.removeEntry(e,!1)},"unlinkSync"),t.prototype.rmdirSync=n(function(e){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.removeEntry(e,!0)},"rmdirSync"),t.prototype.mkdirSync=n(function(e,o){var s=this.store.beginTransaction("readwrite"),a=m.from("{}");this.commitNewFile(s,e,P.DIRECTORY,o,a)},"mkdirSync"),t.prototype.readdirSync=n(function(e){var o=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(o,e,this.findINode(o,e)))},"readdirSync"),t.prototype._syncSync=n(function(e,o,s){var a=this.store.beginTransaction("readwrite"),u=this._findINode(a,d.dirname(e),d.basename(e)),p=this.getINode(a,e,u),g=p.update(s);try{a.put(p.id,o,!0),g&&a.put(u,p.toBuffer(),!0)}catch(T){throw a.abort(),T}a.commit()},"_syncSync"),t.prototype.makeRootDirectory=n(function(){var e=this.store.beginTransaction("readwrite");if(e.get(We)===void 0){var o=new Date().getTime(),s=new ve(Un(),4096,511|P.DIRECTORY,o,o,o);e.put(s.id,Yr(),!1),e.put(We,s.toBuffer(),!1),e.commit()}},"makeRootDirectory"),t.prototype._findINode=n(function(e,o,s){var a=this,u=n(function(p){var g=a.getDirListing(e,o,p);if(g[s])return g[s];throw c.ENOENT(d.resolve(o,s))},"readDirectory");return o==="/"?s===""?We:u(this.getINode(e,o,We)):u(this.getINode(e,o+d.sep+s,this._findINode(e,d.dirname(o),d.basename(o))))},"_findINode"),t.prototype.findINode=n(function(e,o){return this.getINode(e,o,this._findINode(e,d.dirname(o),d.basename(o)))},"findINode"),t.prototype.getINode=n(function(e,o,s){var a=e.get(s);if(a===void 0)throw c.ENOENT(o);return ve.fromBuffer(a)},"getINode"),t.prototype.getDirListing=n(function(e,o,s){if(!s.isDirectory())throw c.ENOTDIR(o);var a=e.get(s.id);if(a===void 0)throw c.ENOENT(o);return JSON.parse(a.toString())},"getDirListing"),t.prototype.addNewNode=n(function(e,o){for(var s=0,a;s<5;)try{return a=Un(),e.put(a,o,!1),a}catch{}throw new c(f.EIO,"Unable to commit data to key-value store.")},"addNewNode"),t.prototype.commitNewFile=n(function(e,o,s,a,u){var p=d.dirname(o),g=d.basename(o),T=this.findINode(e,p),M=this.getDirListing(e,p,T),X=new Date().getTime();if(o==="/"||M[g])throw c.EEXIST(o);var tt;try{var it=this.addNewNode(e,u);tt=new ve(it,u.length,a|s,X,X,X);var lt=this.addNewNode(e,tt.toBuffer());M[g]=lt,e.put(T.id,m.from(JSON.stringify(M)),!0)}catch(vt){throw e.abort(),vt}return e.commit(),tt},"commitNewFile"),t.prototype.removeEntry=n(function(e,o){var s=this.store.beginTransaction("readwrite"),a=d.dirname(e),u=this.findINode(s,a),p=this.getDirListing(s,a,u),g=d.basename(e);if(!p[g])throw c.ENOENT(e);var T=p[g];delete p[g];var M=this.getINode(s,e,T);if(!o&&M.isDirectory())throw c.EISDIR(e);if(o&&!M.isDirectory())throw c.ENOTDIR(e);try{s.del(M.id),s.del(T),s.put(u.id,m.from(JSON.stringify(p)),!0)}catch(X){throw s.abort(),X}s.commit()},"removeEntry"),t}(ie),Gr=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"AsyncKeyValueFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=n(function(e){var o=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(s){s||o.resetDirty(),e(s)}):e()},"sync"),t.prototype.close=n(function(e){this.sync(e)},"close"),t}(fe),Os=function(i){function t(){i.apply(this,arguments)}return n(t,"AsyncKeyValueFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.init=n(function(e,o){this.store=e,this.makeRootDirectory(o)},"init"),t.prototype.getName=n(function(){return this.store.name()},"getName"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSymlinks=n(function(){return!1},"supportsSymlinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!1},"supportsSynch"),t.prototype.empty=n(function(e){var o=this;this.store.clear(function(s){me(s,e)&&o.makeRootDirectory(e)})},"empty"),t.prototype.rename=n(function(e,o,s){var a=this,u=this.store.beginTransaction("readwrite"),p=d.dirname(e),g=d.basename(e),T=d.dirname(o),M=d.basename(o),X={},tt={},it=!1;if((T+"/").indexOf(e+"/")===0)return s(new c(f.EBUSY,p));var lt=n(function(){if(!(it||!tt.hasOwnProperty(p)||!tt.hasOwnProperty(T))){var It=tt[p],Kt=X[p],ce=tt[T],De=X[T];if(!It[g])s(c.ENOENT(e));else{var Te=It[g];delete It[g];var yn=n(function(){ce[M]=Te,u.put(Kt.id,m.from(JSON.stringify(It)),!0,function(Be){ne(Be,u,s)&&(p===T?u.commit(s):u.put(De.id,m.from(JSON.stringify(ce)),!0,function(Ue){ne(Ue,u,s)&&u.commit(s)}))})},"completeRename");ce[M]?a.getINode(u,o,ce[M],function(Be,Ue){ne(Be,u,s)&&(Ue.isFile()?u.del(Ue.id,function(Pi){ne(Pi,u,s)&&u.del(ce[M],function(na){ne(na,u,s)&&yn()})}):u.abort(function(Pi){s(c.EPERM(o))}))}):yn()}}},"theOleSwitcharoo"),vt=n(function(It){a.findINodeAndDirListing(u,It,function(Kt,ce,De){Kt?it||(it=!0,u.abort(function(){s(Kt)})):(X[It]=ce,tt[It]=De,lt())})},"processInodeAndListings");vt(p),p!==T&&vt(T)},"rename"),t.prototype.stat=n(function(e,o,s){var a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,p){me(u,s)&&s(null,p.toStats())})},"stat"),t.prototype.createFile=n(function(e,o,s,a){var u=this,p=this.store.beginTransaction("readwrite"),g=Pt();this.commitNewFile(p,e,P.FILE,s,g,function(T,M){me(T,a)&&a(null,new Gr(u,e,o,M.toStats(),g))})},"createFile"),t.prototype.openFile=n(function(e,o,s){var a=this,u=this.store.beginTransaction("readonly");this.findINode(u,e,function(p,g){me(p,s)&&u.get(g.id,function(T,M){me(T,s)&&(M===void 0?s(c.ENOENT(e)):s(null,new Gr(a,e,o,g.toStats(),M)))})})},"openFile"),t.prototype.unlink=n(function(e,o){this.removeEntry(e,!1,o)},"unlink"),t.prototype.rmdir=n(function(e,o){var s=this;this.readdir(e,function(a,u){a?o(a):u.length>0?o(c.ENOTEMPTY(e)):s.removeEntry(e,!0,o)})},"rmdir"),t.prototype.mkdir=n(function(e,o,s){var a=this.store.beginTransaction("readwrite"),u=m.from("{}");this.commitNewFile(a,e,P.DIRECTORY,o,u,s)},"mkdir"),t.prototype.readdir=n(function(e,o){var s=this,a=this.store.beginTransaction("readonly");this.findINode(a,e,function(u,p){me(u,o)&&s.getDirListing(a,e,p,function(g,T){me(g,o)&&o(null,Object.keys(T))})})},"readdir"),t.prototype._sync=n(function(e,o,s,a){var u=this,p=this.store.beginTransaction("readwrite");this._findINode(p,d.dirname(e),d.basename(e),function(g,T){ne(g,p,a)&&u.getINode(p,e,T,function(M,X){if(ne(M,p,a)){var tt=X.update(s);p.put(X.id,o,!0,function(it){ne(it,p,a)&&(tt?p.put(T,X.toBuffer(),!0,function(lt){ne(lt,p,a)&&p.commit(a)}):p.commit(a))})}})})},"_sync"),t.prototype.makeRootDirectory=n(function(e){var o=this.store.beginTransaction("readwrite");o.get(We,function(s,a){if(s||a===void 0){var u=new Date().getTime(),p=new ve(Un(),4096,511|P.DIRECTORY,u,u,u);o.put(p.id,Yr(),!1,function(g){ne(g,o,e)&&o.put(We,p.toBuffer(),!1,function(T){T?o.abort(function(){e(T)}):o.commit(e)})})}else o.commit(e)})},"makeRootDirectory"),t.prototype._findINode=n(function(e,o,s,a){var u=this,p=n(function(g,T,M){g?a(g):M[s]?a(null,M[s]):a(c.ENOENT(d.resolve(o,s)))},"handleDirectoryListings");o==="/"?s===""?a(null,We):this.getINode(e,o,We,function(g,T){me(g,a)&&u.getDirListing(e,o,T,function(M,X){p(M,T,X)})}):this.findINodeAndDirListing(e,o,p)},"_findINode"),t.prototype.findINode=n(function(e,o,s){var a=this;this._findINode(e,d.dirname(o),d.basename(o),function(u,p){me(u,s)&&a.getINode(e,o,p,s)})},"findINode"),t.prototype.getINode=n(function(e,o,s,a){e.get(s,function(u,p){me(u,a)&&(p===void 0?a(c.ENOENT(o)):a(null,ve.fromBuffer(p)))})},"getINode"),t.prototype.getDirListing=n(function(e,o,s,a){s.isDirectory()?e.get(s.id,function(u,p){if(me(u,a))try{a(null,JSON.parse(p.toString()))}catch{a(c.ENOENT(o))}}):a(c.ENOTDIR(o))},"getDirListing"),t.prototype.findINodeAndDirListing=n(function(e,o,s){var a=this;this.findINode(e,o,function(u,p){me(u,s)&&a.getDirListing(e,o,p,function(g,T){me(g,s)&&s(null,p,T)})})},"findINodeAndDirListing"),t.prototype.addNewNode=n(function(e,o,s){var a=0,u,p=n(function(){++a===5?s(new c(f.EIO,"Unable to commit data to key-value store.")):(u=Un(),e.put(u,o,!1,function(g,T){g||!T?p():s(null,u)}))},"reroll");p()},"addNewNode"),t.prototype.commitNewFile=n(function(e,o,s,a,u,p){var g=this,T=d.dirname(o),M=d.basename(o),X=new Date().getTime();if(o==="/")return p(c.EEXIST(o));this.findINodeAndDirListing(e,T,function(tt,it,lt){ne(tt,e,p)&&(lt[M]?e.abort(function(){p(c.EEXIST(o))}):g.addNewNode(e,u,function(vt,It){if(ne(vt,e,p)){var Kt=new ve(It,u.length,a|s,X,X,X);g.addNewNode(e,Kt.toBuffer(),function(ce,De){ne(ce,e,p)&&(lt[M]=De,e.put(it.id,m.from(JSON.stringify(lt)),!0,function(Te){ne(Te,e,p)&&e.commit(function(yn){ne(yn,e,p)&&p(null,Kt)})}))})}}))})},"commitNewFile"),t.prototype.removeEntry=n(function(e,o,s){var a=this,u=this.store.beginTransaction("readwrite"),p=d.dirname(e),g=d.basename(e);this.findINodeAndDirListing(u,p,function(T,M,X){if(ne(T,u,s))if(!X[g])u.abort(function(){s(c.ENOENT(e))});else{var tt=X[g];delete X[g],a.getINode(u,e,tt,function(it,lt){ne(it,u,s)&&(!o&&lt.isDirectory()?u.abort(function(){s(c.EISDIR(e))}):o&&!lt.isDirectory()?u.abort(function(){s(c.ENOTDIR(e))}):u.del(lt.id,function(vt){ne(vt,u,s)&&u.del(tt,function(It){ne(It,u,s)&&u.put(M.id,m.from(JSON.stringify(X)),!0,function(Kt){ne(Kt,u,s)&&u.commit(s)})})}))})}})},"removeEntry"),t}($),qe=n(function(){this.store={}},"InMemoryStore");qe.prototype.name=n(function(){return un.Name},"name"),qe.prototype.clear=n(function(){this.store={}},"clear"),qe.prototype.beginTransaction=n(function(t){return new Me(this)},"beginTransaction"),qe.prototype.get=n(function(t){return this.store[t]},"get"),qe.prototype.put=n(function(t,r,e){return!e&&this.store.hasOwnProperty(t)?!1:(this.store[t]=r,!0)},"put"),qe.prototype.del=n(function(t){delete this.store[t]},"del");var un=function(i){function t(){i.call(this,{store:new qe})}return n(t,"InMemoryFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){o(null,new t)},"Create"),t}(qr);un.Name="InMemory",un.Options={};var ur=te.indexedDB||te.mozIndexedDB||te.webkitIndexedDB||te.msIndexedDB;function mn(i,t){switch(t===void 0&&(t=i.toString()),i.name){case"NotFoundError":return new c(f.ENOENT,t);case"QuotaExceededError":return new c(f.ENOSPC,t);default:return new c(f.EIO,t)}}n(mn,"convertError$2");function Sn(i,t,r){return t===void 0&&(t=f.EIO),r===void 0&&(r=null),function(e){e.preventDefault(),i(new c(t,r!==null?r:void 0))}}n(Sn,"onErrorHandler");var cr=n(function(t,r){this.tx=t,this.store=r},"IndexedDBROTransaction");cr.prototype.get=n(function(t,r){try{var e=this.store.get(t);e.onerror=Sn(r),e.onsuccess=function(o){var s=o.target.result;s===void 0?r(null,s):r(null,Et(s))}}catch(o){r(mn(o))}},"get");var Ls=function(i){function t(r,e){i.call(this,r,e)}return n(t,"IndexedDBRWTransaction"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.put=n(function(e,o,s,a){try{var u=Q(o),p;s?p=this.store.put(u,e):p=this.store.add(u,e),p.onerror=Sn(a),p.onsuccess=function(g){a(null,!0)}}catch(g){a(mn(g))}},"put"),t.prototype.del=n(function(e,o){try{var s=this.store.delete(e);s.onerror=Sn(o),s.onsuccess=function(a){o()}}catch(a){o(mn(a))}},"del"),t.prototype.commit=n(function(e){setTimeout(e,0)},"commit"),t.prototype.abort=n(function(e){var o=null;try{this.tx.abort()}catch(s){o=mn(s)}finally{e(o)}},"abort"),t}(cr),zn=n(function(t,r){var e=this;r===void 0&&(r="browserfs"),this.storeName=r;var o=ur.open(this.storeName,1);o.onupgradeneeded=function(s){var a=s.target.result;a.objectStoreNames.contains(e.storeName)&&a.deleteObjectStore(e.storeName),a.createObjectStore(e.storeName)},o.onsuccess=function(s){e.db=s.target.result,t(null,e)},o.onerror=Sn(t,f.EACCES)},"IndexedDBStore");zn.prototype.name=n(function(){return _n.Name+" - "+this.storeName},"name"),zn.prototype.clear=n(function(t){try{var r=this.db.transaction(this.storeName,"readwrite"),e=r.objectStore(this.storeName),o=e.clear();o.onsuccess=function(s){setTimeout(t,0)},o.onerror=Sn(t)}catch(s){t(mn(s))}},"clear"),zn.prototype.beginTransaction=n(function(t){t===void 0&&(t="readonly");var r=this.db.transaction(this.storeName,t),e=r.objectStore(this.storeName);if(t==="readwrite")return new Ls(r,e);if(t==="readonly")return new cr(r,e);throw new c(f.EINVAL,"Invalid transaction type.")},"beginTransaction");var _n=function(i){function t(r,e,o){var s=this;o===void 0&&(o=!0),i.call(this),this.store=new zn(function(a){a?r(a):s.init(s.store,function(u){r(u,s)})},e),Ot(o,t.Name,{storeName:e})}return n(t,"IndexedDBFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){new t(o,e.storeName,!1)},"Create"),t.isAvailable=n(function(){try{return typeof ur<"u"&&ur.open("__browserfs_test__")!==null}catch{return!1}},"isAvailable"),t}(Os);_n.Name="IndexedDB",_n.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var lr=!1,En;try{te.localStorage.setItem("__test__",String.fromCharCode(55296)),lr=te.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch{lr=!1}En=lr?"binary_string":"binary_string_ie",m.isEncoding(En)||(En="base64");var Ge=n(function(){},"LocalStorageStore");Ge.prototype.name=n(function(){return Fn.Name},"name"),Ge.prototype.clear=n(function(){te.localStorage.clear()},"clear"),Ge.prototype.beginTransaction=n(function(t){return new Me(this)},"beginTransaction"),Ge.prototype.get=n(function(t){try{var r=te.localStorage.getItem(t);if(r!==null)return m.from(r,En)}catch{}},"get"),Ge.prototype.put=n(function(t,r,e){try{return!e&&te.localStorage.getItem(t)!==null?!1:(te.localStorage.setItem(t,r.toString(En)),!0)}catch{throw new c(f.ENOSPC,"LocalStorage is full.")}},"put"),Ge.prototype.del=n(function(t){try{te.localStorage.removeItem(t)}catch(r){throw new c(f.EIO,"Unable to delete key "+t+": "+r)}},"del");var Fn=function(i){function t(){i.call(this,{store:new Ge})}return n(t,"LocalStorageFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){o(null,new t)},"Create"),t.isAvailable=n(function(){return typeof te.localStorage<"u"},"isAvailable"),t}(qr);Fn.Name="LocalStorage",Fn.Options={};var cn=function(i){function t(){i.call(this),this.mountList=[],this.mntMap={},this.rootFs=new un}return n(t,"MountableFileSystem"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){var s=new t;Object.keys(e).forEach(function(a){s.mount(a,e[a])}),o(null,s)},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.mount=n(function(e,o){if(e[0]!=="/"&&(e="/"+e),e=d.resolve(e),this.mntMap[e])throw new c(f.EINVAL,"Mount point "+e+" is already taken.");U(e,511,this.rootFs),this.mntMap[e]=o,this.mountList.push(e),this.mountList=this.mountList.sort(function(s,a){return a.length-s.length})},"mount"),t.prototype.umount=n(function(e){var o=this;if(e[0]!=="/"&&(e="/"+e),e=d.resolve(e),!this.mntMap[e])throw new c(f.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);e!=="/"&&o.rootFs.readdirSync(e).length===0;)o.rootFs.rmdirSync(e),e=d.dirname(e)},"umount"),t.prototype._getFs=n(function(e){for(var o=this,s=this.mountList,a=s.length,u=0;u<a;u++){var p=s[u];if(p.length<=e.length&&e.indexOf(p)===0)return e=e.substr(p.length>1?p.length:0),e===""&&(e="/"),{fs:o.mntMap[p],path:e}}return{fs:this.rootFs,path:e}},"_getFs"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype.diskSpace=n(function(e,o){o(0,0)},"diskSpace"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.standardizeError=n(function(e,o,s){var a=e.message.indexOf(o);return a!==-1&&(e.message=e.message.substr(0,a)+s+e.message.substr(a+o.length),e.path=s),e},"standardizeError"),t.prototype.rename=n(function(e,o,s){var a=this,u=this._getFs(e),p=this._getFs(o);return u.fs===p.fs?u.fs.rename(u.path,p.path,function(g){g&&a.standardizeError(a.standardizeError(g,u.path,e),p.path,o),s(g)}):ct.readFile(e,function(g,T){if(g)return s(g);ct.writeFile(o,T,function(M){if(M)return s(M);ct.unlink(e,s)})})},"rename"),t.prototype.renameSync=n(function(e,o){var s=this._getFs(e),a=this._getFs(o);if(s.fs===a.fs)try{return s.fs.renameSync(s.path,a.path)}catch(p){throw this.standardizeError(this.standardizeError(p,s.path,e),a.path,o),p}var u=ct.readFileSync(e);return ct.writeFileSync(o,u),ct.unlinkSync(e)},"renameSync"),t.prototype.readdirSync=n(function(e){var o=this._getFs(e),s=null;if(o.fs!==this.rootFs)try{s=this.rootFs.readdirSync(e)}catch{}try{var a=o.fs.readdirSync(o.path);return s===null?a:a.concat(s.filter(function(u){return a.indexOf(u)===-1}))}catch(u){if(s===null)throw this.standardizeError(u,o.path,e);return s}},"readdirSync"),t.prototype.readdir=n(function(e,o){var s=this,a=this._getFs(e);a.fs.readdir(a.path,function(u,p){if(a.fs!==s.rootFs)try{var g=s.rootFs.readdirSync(e);p?p=p.concat(g.filter(function(T){return p.indexOf(T)===-1})):p=g}catch{if(u)return o(s.standardizeError(u,a.path,e))}else if(u)return o(s.standardizeError(u,a.path,e));o(null,p)})},"readdir"),t.prototype.rmdirSync=n(function(e){var o=this._getFs(e);if(this._containsMountPt(e))throw c.ENOTEMPTY(e);try{o.fs.rmdirSync(o.path)}catch(s){throw this.standardizeError(s,o.path,e)}},"rmdirSync"),t.prototype.rmdir=n(function(e,o){var s=this,a=this._getFs(e);this._containsMountPt(e)?o(c.ENOTEMPTY(e)):a.fs.rmdir(a.path,function(u){o(u?s.standardizeError(u,a.path,e):null)})},"rmdir"),t.prototype._containsMountPt=n(function(e){for(var o=this.mountList,s=o.length,a=0;a<s;a++){var u=o[a];if(u.length>=e.length&&u.slice(0,e.length)===e)return!0}return!1},"_containsMountPt"),t}($);cn.Name="MountableFileSystem",cn.Options={};function Jr(i,t,r){return t?function(){for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];var s=e[0],a=this._getFs(s);e[0]=a.path;try{return a.fs[i].apply(a.fs,e)}catch(u){throw this.standardizeError(u,a.path,s),u}}:function(){for(var e=this,o=[],s=arguments.length;s--;)o[s]=arguments[s];var a=o[0],u=this._getFs(a);if(o[0]=u.path,typeof o[o.length-1]=="function"){var p=o[o.length-1];o[o.length-1]=function(){for(var g=[],T=arguments.length;T--;)g[T]=arguments[T];g.length>0&&g[0]instanceof c&&e.standardizeError(g[0],u.path,a),p.apply(null,g)}}return u.fs[i].apply(u.fs,o)}}n(Jr,"defineFcn");for(var Qr=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],hr=0;hr<Qr.length;hr++)for(var Ns=Qr[hr],pr=0,$r=Ns;pr<$r.length;pr+=1){var Wn=$r[pr];cn.prototype[Wn]=Jr(Wn,!1),cn.prototype[Wn+"Sync"]=Jr(Wn+"Sync",!0)}var xn;if(typeof setImmediate<"u")xn=setImmediate;else{var Fe=te,ln=[],ti="zero-timeout-message",Rs=n(function(){if(typeof Fe.importScripts<"u"||!Fe.postMessage)return!1;var i=!0,t=Fe.onmessage;return Fe.onmessage=function(){i=!1},Fe.postMessage("","*"),Fe.onmessage=t,i},"canUsePostMessage");if(Rs()){xn=n(function(i){ln.push(i),Fe.postMessage(ti,"*")},"bfsSetImmediate");var ei=n(function(i){if(i.source===self&&i.data===ti&&(i.stopPropagation?i.stopPropagation():i.cancelBubble=!0,ln.length>0)){var t=ln.shift();return t()}},"handleMessage");Fe.addEventListener?Fe.addEventListener("message",ei,!0):Fe.attachEvent("onmessage",ei)}else if(Fe.MessageChannel){var ni=new Fe.MessageChannel;ni.port1.onmessage=function(i){if(ln.length>0)return ln.shift()()},xn=n(function(i){ln.push(i),ni.port2.postMessage("")},"bfsSetImmediate")}else xn=n(function(i){return setTimeout(i,0)},"bfsSetImmediate")}var dr=xn,bn=n(function(){this._locked=!1,this._waiters=[]},"Mutex");bn.prototype.lock=n(function(t){if(this._locked){this._waiters.push(t);return}this._locked=!0,t()},"lock"),bn.prototype.unlock=n(function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();if(t){dr(t);return}this._locked=!1},"unlock"),bn.prototype.tryLock=n(function(){return this._locked?!1:(this._locked=!0,!0)},"tryLock"),bn.prototype.isLocked=n(function(){return this._locked},"isLocked");var St=n(function(t){this._fs=t,this._mu=new bn},"LockedFS");St.prototype.getName=n(function(){return"LockedFS<"+this._fs.getName()+">"},"getName"),St.prototype.getFSUnlocked=n(function(){return this._fs},"getFSUnlocked"),St.prototype.initialize=n(function(t){this._fs.initialize(t)},"initialize"),St.prototype.diskSpace=n(function(t,r){this._fs.diskSpace(t,r)},"diskSpace"),St.prototype.isReadOnly=n(function(){return this._fs.isReadOnly()},"isReadOnly"),St.prototype.supportsLinks=n(function(){return this._fs.supportsLinks()},"supportsLinks"),St.prototype.supportsProps=n(function(){return this._fs.supportsProps()},"supportsProps"),St.prototype.supportsSynch=n(function(){return this._fs.supportsSynch()},"supportsSynch"),St.prototype.rename=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.rename(t,r,function(s){o._mu.unlock(),e(s)})})},"rename"),St.prototype.renameSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,r)},"renameSync"),St.prototype.stat=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.stat(t,r,function(s,a){o._mu.unlock(),e(s,a)})})},"stat"),St.prototype.statSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,r)},"statSync"),St.prototype.open=n(function(t,r,e,o){var s=this;this._mu.lock(function(){s._fs.open(t,r,e,function(a,u){s._mu.unlock(),o(a,u)})})},"open"),St.prototype.openSync=n(function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,r,e)},"openSync"),St.prototype.unlink=n(function(t,r){var e=this;this._mu.lock(function(){e._fs.unlink(t,function(o){e._mu.unlock(),r(o)})})},"unlink"),St.prototype.unlinkSync=n(function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},"unlinkSync"),St.prototype.rmdir=n(function(t,r){var e=this;this._mu.lock(function(){e._fs.rmdir(t,function(o){e._mu.unlock(),r(o)})})},"rmdir"),St.prototype.rmdirSync=n(function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},"rmdirSync"),St.prototype.mkdir=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.mkdir(t,r,function(s){o._mu.unlock(),e(s)})})},"mkdir"),St.prototype.mkdirSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,r)},"mkdirSync"),St.prototype.readdir=n(function(t,r){var e=this;this._mu.lock(function(){e._fs.readdir(t,function(o,s){e._mu.unlock(),r(o,s)})})},"readdir"),St.prototype.readdirSync=n(function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},"readdirSync"),St.prototype.exists=n(function(t,r){var e=this;this._mu.lock(function(){e._fs.exists(t,function(o){e._mu.unlock(),r(o)})})},"exists"),St.prototype.existsSync=n(function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},"existsSync"),St.prototype.realpath=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.realpath(t,r,function(s,a){o._mu.unlock(),e(s,a)})})},"realpath"),St.prototype.realpathSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,r)},"realpathSync"),St.prototype.truncate=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.truncate(t,r,function(s){o._mu.unlock(),e(s)})})},"truncate"),St.prototype.truncateSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,r)},"truncateSync"),St.prototype.readFile=n(function(t,r,e,o){var s=this;this._mu.lock(function(){s._fs.readFile(t,r,e,function(a,u){s._mu.unlock(),o(a,u)})})},"readFile"),St.prototype.readFileSync=n(function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,r,e)},"readFileSync"),St.prototype.writeFile=n(function(t,r,e,o,s,a){var u=this;this._mu.lock(function(){u._fs.writeFile(t,r,e,o,s,function(p){u._mu.unlock(),a(p)})})},"writeFile"),St.prototype.writeFileSync=n(function(t,r,e,o,s){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,r,e,o,s)},"writeFileSync"),St.prototype.appendFile=n(function(t,r,e,o,s,a){var u=this;this._mu.lock(function(){u._fs.appendFile(t,r,e,o,s,function(p){u._mu.unlock(),a(p)})})},"appendFile"),St.prototype.appendFileSync=n(function(t,r,e,o,s){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,r,e,o,s)},"appendFileSync"),St.prototype.chmod=n(function(t,r,e,o){var s=this;this._mu.lock(function(){s._fs.chmod(t,r,e,function(a){s._mu.unlock(),o(a)})})},"chmod"),St.prototype.chmodSync=n(function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,r,e)},"chmodSync"),St.prototype.chown=n(function(t,r,e,o,s){var a=this;this._mu.lock(function(){a._fs.chown(t,r,e,o,function(u){a._mu.unlock(),s(u)})})},"chown"),St.prototype.chownSync=n(function(t,r,e,o){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,r,e,o)},"chownSync"),St.prototype.utimes=n(function(t,r,e,o){var s=this;this._mu.lock(function(){s._fs.utimes(t,r,e,function(a){s._mu.unlock(),o(a)})})},"utimes"),St.prototype.utimesSync=n(function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,r,e)},"utimesSync"),St.prototype.link=n(function(t,r,e){var o=this;this._mu.lock(function(){o._fs.link(t,r,function(s){o._mu.unlock(),e(s)})})},"link"),St.prototype.linkSync=n(function(t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,r)},"linkSync"),St.prototype.symlink=n(function(t,r,e,o){var s=this;this._mu.lock(function(){s._fs.symlink(t,r,e,function(a){s._mu.unlock(),o(a)})})},"symlink"),St.prototype.symlinkSync=n(function(t,r,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,r,e)},"symlinkSync"),St.prototype.readlink=n(function(t,r){var e=this;this._mu.lock(function(){e._fs.readlink(t,function(o,s){e._mu.unlock(),r(o,s)})})},"readlink"),St.prototype.readlinkSync=n(function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)},"readlinkSync");var Pe="/.deletedFiles.log";function ri(i){return 146|i}n(ri,"makeModeWritable");function Se(i){return C.getFileFlag(i)}n(Se,"getFlag");var ii=function(i){function t(r,e,o,s,a){i.call(this,r,e,o,s,a)}return n(t,"OverlayFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.sync=n(function(e){var o=this;if(!this.isDirty()){e(null);return}this._fs._syncAsync(this,function(s){o.resetDirty(),e(s)})},"sync"),t.prototype.syncSync=n(function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},"syncSync"),t.prototype.close=n(function(e){this.sync(e)},"close"),t.prototype.closeSync=n(function(){this.syncSync()},"closeSync"),t}(fe),oi=function(i){function t(r,e){if(i.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=r,this._readable=e,this._writable.isReadOnly())throw new c(f.EINVAL,"Writable file system must be writable.")}return n(t,"UnlockedOverlayFS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.getOverlayedFileSystems=n(function(){return{readable:this._readable,writable:this._writable}},"getOverlayedFileSystems"),t.prototype._syncAsync=n(function(e,o){var s=this;this.createParentDirectoriesAsync(e.getPath(),function(a){if(a)return o(a);s._writable.writeFile(e.getPath(),e.getBuffer(),null,Se("w"),e.getStats().mode,o)})},"_syncAsync"),t.prototype._syncSync=n(function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,Se("w"),e.getStats().mode)},"_syncSync"),t.prototype.getName=n(function(){return In.Name},"getName"),t.prototype.initialize=n(function(e){var o=this,s=this._initializeCallbacks,a=n(function(u){o._isInitialized=!u,o._initializeCallbacks=[],s.forEach(function(p){return p(u)})},"end");if(this._isInitialized)return e();s.push(e),s.length===1&&this._writable.readFile(Pe,"utf8",Se("r"),function(u,p){if(u){if(u.errno!==f.ENOENT)return a(u)}else o._deleteLog=p;o._reparseDeletionLog(),a()})},"initialize"),t.prototype.isReadOnly=n(function(){return!1},"isReadOnly"),t.prototype.supportsSynch=n(function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},"supportsSynch"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return this._readable.supportsProps()&&this._writable.supportsProps()},"supportsProps"),t.prototype.getDeletionLog=n(function(){return this._deleteLog},"getDeletionLog"),t.prototype.restoreDeletionLog=n(function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},"restoreDeletionLog"),t.prototype.rename=n(function(e,o,s){var a=this;if(!(!this.checkInitAsync(s)||this.checkPathAsync(e,s)||this.checkPathAsync(o,s))){if(e===Pe||o===Pe)return s(c.EPERM("Cannot rename deletion log."));if(e===o)return s();this.stat(e,!1,function(u,p){return u?s(u):a.stat(o,!1,function(g,T){var M=a;function X(it){var lt=it.shift();if(!lt)return s();var vt=d.resolve(e,lt),It=d.resolve(o,lt);M.rename(vt,It,function(Kt){if(Kt)return s(Kt);X(it)})}n(X,"copyDirContents");var tt=511;if(p.isDirectory()){if(g)return g.errno!==f.ENOENT?s(g):a._writable.exists(e,function(it){if(it)return a._writable.rename(e,o,s);a._writable.mkdir(o,tt,function(lt){if(lt)return s(lt);a._readable.readdir(e,function(vt,It){if(vt)return s();X(It)})})});if(tt=T.mode,!T.isDirectory())return s(c.ENOTDIR(o));a.readdir(o,function(it,lt){if(lt&&lt.length)return s(c.ENOTEMPTY(o));a._readable.readdir(e,function(vt,It){if(vt)return s();X(It)})})}if(T&&T.isDirectory())return s(c.EISDIR(o));a.readFile(e,null,Se("r"),function(it,lt){return it?s(it):a.writeFile(o,lt,null,Se("w"),p.mode,function(vt){return vt?s(vt):a.unlink(e,s)})})})})}},"rename"),t.prototype.renameSync=n(function(e,o){var s=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(o),e===Pe||o===Pe)throw c.EPERM("Cannot rename deletion log.");var a=this.statSync(e,!1);if(a.isDirectory()){if(e===o)return;var u=511;if(this.existsSync(o)){var p=this.statSync(o,!1);if(u=p.mode,p.isDirectory()){if(this.readdirSync(o).length>0)throw c.ENOTEMPTY(o)}else throw c.ENOTDIR(o)}this._writable.existsSync(e)?this._writable.renameSync(e,o):this._writable.existsSync(o)||this._writable.mkdirSync(o,u),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach(function(g){s.renameSync(d.resolve(e,g),d.resolve(o,g))})}else{if(this.existsSync(o)&&this.statSync(o,!1).isDirectory())throw c.EISDIR(o);this.writeFileSync(o,this.readFileSync(e,null,Se("r")),null,Se("w"),a.mode)}e!==o&&this.existsSync(e)&&this.unlinkSync(e)},"renameSync"),t.prototype.stat=n(function(e,o,s){var a=this;!this.checkInitAsync(s)||this._writable.stat(e,o,function(u,p){u&&u.errno===f.ENOENT?(a._deletedFiles[e]&&s(c.ENOENT(e)),a._readable.stat(e,o,function(g,T){T&&(T=T.clone(),T.mode=ri(T.mode)),s(g,T)})):s(u,p)})},"stat"),t.prototype.statSync=n(function(e,o){this.checkInitialized();try{return this._writable.statSync(e,o)}catch{if(this._deletedFiles[e])throw c.ENOENT(e);var s=this._readable.statSync(e,o).clone();return s.mode=ri(s.mode),s}},"statSync"),t.prototype.open=n(function(e,o,s,a){var u=this;!this.checkInitAsync(a)||this.checkPathAsync(e,a)||this.stat(e,!1,function(p,g){if(g)switch(o.pathExistsAction()){case D.TRUNCATE_FILE:return u.createParentDirectoriesAsync(e,function(T){if(T)return a(T);u._writable.open(e,o,s,a)});case D.NOP:return u._writable.exists(e,function(T){T?u._writable.open(e,o,s,a):(g=g.clone(),g.mode=s,u._readable.readFile(e,null,Se("r"),function(M,X){if(M)return a(M);g.size===-1&&(g.size=X.length);var tt=new ii(u,e,o,g,X);a(null,tt)}))});default:return a(c.EEXIST(e))}else switch(o.pathNotExistsAction()){case D.CREATE_FILE:return u.createParentDirectoriesAsync(e,function(T){return T?a(T):u._writable.open(e,o,s,a)});default:return a(c.ENOENT(e))}})},"open"),t.prototype.openSync=n(function(e,o,s){if(this.checkInitialized(),this.checkPath(e),e===Pe)throw c.EPERM("Cannot open deletion log.");if(this.existsSync(e))switch(o.pathExistsAction()){case D.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,o,s);case D.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,o,s);var a=this._readable.readFileSync(e,null,Se("r")),u=this._readable.statSync(e,!1).clone();return u.mode=s,new ii(this,e,o,u,a);default:throw c.EEXIST(e)}else switch(o.pathNotExistsAction()){case D.CREATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,o,s);default:throw c.ENOENT(e)}},"openSync"),t.prototype.unlink=n(function(e,o){var s=this;!this.checkInitAsync(o)||this.checkPathAsync(e,o)||this.exists(e,function(a){if(!a)return o(c.ENOENT(e));s._writable.exists(e,function(u){if(u)return s._writable.unlink(e,function(p){if(p)return o(p);s.exists(e,function(g){g&&s.deletePath(e),o(null)})});s.deletePath(e),o(null)})})},"unlink"),t.prototype.unlinkSync=n(function(e){if(this.checkInitialized(),this.checkPath(e),this.existsSync(e))this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e);else throw c.ENOENT(e)},"unlinkSync"),t.prototype.rmdir=n(function(e,o){var s=this;if(!!this.checkInitAsync(o)){var a=n(function(){s.readdir(e,function(u,p){if(u)return o(u);if(p.length)return o(c.ENOTEMPTY(e));s.deletePath(e),o(null)})},"rmdirLower");this.exists(e,function(u){if(!u)return o(c.ENOENT(e));s._writable.exists(e,function(p){p?s._writable.rmdir(e,function(g){if(g)return o(g);s._readable.exists(e,function(T){T?a():o()})}):a()})})}},"rmdir"),t.prototype.rmdirSync=n(function(e){if(this.checkInitialized(),this.existsSync(e)){if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw c.ENOTEMPTY(e);this.deletePath(e)}}else throw c.ENOENT(e)},"rmdirSync"),t.prototype.mkdir=n(function(e,o,s){var a=this;!this.checkInitAsync(s)||this.exists(e,function(u){if(u)return s(c.EEXIST(e));a.createParentDirectoriesAsync(e,function(p){if(p)return s(p);a._writable.mkdir(e,o,s)})})},"mkdir"),t.prototype.mkdirSync=n(function(e,o){if(this.checkInitialized(),this.existsSync(e))throw c.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,o)},"mkdirSync"),t.prototype.readdir=n(function(e,o){var s=this;!this.checkInitAsync(o)||this.stat(e,!1,function(a,u){if(a)return o(a);if(!u.isDirectory())return o(c.ENOTDIR(e));s._writable.readdir(e,function(p,g){if(p&&p.code!=="ENOENT")return o(p);(p||!g)&&(g=[]),s._readable.readdir(e,function(T,M){(T||!M)&&(M=[]);var X={},tt=g.concat(M.filter(function(it){return!s._deletedFiles[e+"/"+it]})).filter(function(it){var lt=!X[it];return X[it]=!0,lt});o(null,tt)})})})},"readdir"),t.prototype.readdirSync=n(function(e){var o=this;this.checkInitialized();var s=this.statSync(e,!1);if(!s.isDirectory())throw c.ENOTDIR(e);var a=[];try{a=a.concat(this._writable.readdirSync(e))}catch{}try{a=a.concat(this._readable.readdirSync(e).filter(function(p){return!o._deletedFiles[e+"/"+p]}))}catch{}var u={};return a.filter(function(p){var g=!u[p];return u[p]=!0,g})},"readdirSync"),t.prototype.exists=n(function(e,o){var s=this;this.checkInitialized(),this._writable.exists(e,function(a){if(a)return o(!0);s._readable.exists(e,function(u){o(u&&s._deletedFiles[e]!==!0)})})},"exists"),t.prototype.existsSync=n(function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&this._deletedFiles[e]!==!0},"existsSync"),t.prototype.chmod=n(function(e,o,s,a){var u=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(p){if(p)return a(p);u._writable.chmod(e,o,s,a)})},"chmod"),t.prototype.chmodSync=n(function(e,o,s){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.chmodSync(e,o,s)})},"chmodSync"),t.prototype.chown=n(function(e,o,s,a,u){var p=this;!this.checkInitAsync(u)||this.operateOnWritableAsync(e,function(g){if(g)return u(g);p._writable.chown(e,o,s,a,u)})},"chown"),t.prototype.chownSync=n(function(e,o,s,a){var u=this;this.checkInitialized(),this.operateOnWritable(e,function(){u._writable.chownSync(e,o,s,a)})},"chownSync"),t.prototype.utimes=n(function(e,o,s,a){var u=this;!this.checkInitAsync(a)||this.operateOnWritableAsync(e,function(p){if(p)return a(p);u._writable.utimes(e,o,s,a)})},"utimes"),t.prototype.utimesSync=n(function(e,o,s){var a=this;this.checkInitialized(),this.operateOnWritable(e,function(){a._writable.utimesSync(e,o,s)})},"utimesSync"),t.prototype.deletePath=n(function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+`
`)},"deletePath"),t.prototype.updateLog=n(function(e){var o=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Pe,this._deleteLog,"utf8",C.getFileFlag("w"),420,function(s){o._deleteLogUpdatePending=!1,s?o._deleteLogError=s:o._deleteLogUpdateNeeded&&(o._deleteLogUpdateNeeded=!1,o.updateLog(""))}))},"updateLog"),t.prototype._reparseDeletionLog=n(function(){var e=this;this._deletedFiles={},this._deleteLog.split(`
`).forEach(function(o){e._deletedFiles[o.slice(1)]=o.slice(0,1)==="d"})},"_reparseDeletionLog"),t.prototype.checkInitialized=n(function(){if(this._isInitialized){if(this._deleteLogError!==null){var e=this._deleteLogError;throw this._deleteLogError=null,e}}else throw new c(f.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")},"checkInitialized"),t.prototype.checkInitAsync=n(function(e){if(this._isInitialized){if(this._deleteLogError!==null){var o=this._deleteLogError;return this._deleteLogError=null,e(o),!1}}else return e(new c(f.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;return!0},"checkInitAsync"),t.prototype.checkPath=n(function(e){if(e===Pe)throw c.EPERM(e)},"checkPath"),t.prototype.checkPathAsync=n(function(e,o){return e===Pe?(o(c.EPERM(e)),!0):!1},"checkPathAsync"),t.prototype.createParentDirectoriesAsync=n(function(e,o){var s=d.dirname(e),a=[],u=this;this._writable.stat(s,!1,p);function p(T,M){T?(a.push(s),s=d.dirname(s),u._writable.stat(s,!1,p)):g()}n(p,"statDone");function g(){if(!a.length)return o();var T=a.pop();u._readable.stat(T,!1,function(M,X){if(!X)return o();u._writable.mkdir(T,X.mode,function(tt){if(tt)return o(tt);g()})})}n(g,"createParents")},"createParentDirectoriesAsync"),t.prototype.createParentDirectories=n(function(e){for(var o=this,s=d.dirname(e),a=[];!this._writable.existsSync(s);)a.push(s),s=d.dirname(s);a=a.reverse(),a.forEach(function(u){o._writable.mkdirSync(u,o.statSync(u,!1).mode)})},"createParentDirectories"),t.prototype.operateOnWritable=n(function(e,o){if(this.existsSync(e))this._writable.existsSync(e)||this.copyToWritable(e),o();else throw c.ENOENT(e)},"operateOnWritable"),t.prototype.operateOnWritableAsync=n(function(e,o){var s=this;this.exists(e,function(a){if(!a)return o(c.ENOENT(e));s._writable.exists(e,function(u){if(u)o();else return s.copyToWritableAsync(e,o)})})},"operateOnWritableAsync"),t.prototype.copyToWritable=n(function(e){var o=this.statSync(e,!1);o.isDirectory()?this._writable.mkdirSync(e,o.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,Se("r")),null,Se("w"),this.statSync(e,!1).mode)},"copyToWritable"),t.prototype.copyToWritableAsync=n(function(e,o){var s=this;this.stat(e,!1,function(a,u){if(a)return o(a);if(u.isDirectory())return s._writable.mkdir(e,u.mode,o);s._readable.readFile(e,null,Se("r"),function(p,g){if(p)return o(p);s.writeFile(e,g,null,Se("w"),u.mode,o)})})},"copyToWritableAsync"),t}($),In=function(i){function t(r,e,o){o===void 0&&(o=!0),i.call(this,new oi(r,e)),Ot(o,t.Name,{readable:"readable file system",writable:"writable file system"})}return n(t,"OverlayFS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){try{var s=new t(e.writable,e.readable,!1);s.initialize(function(a){o(a,s)},!1)}catch(a){o(a)}},"Create"),t.isAvailable=n(function(){return oi.isAvailable()},"isAvailable"),t.prototype.initialize=n(function(e,o){o===void 0&&(o=!0),o&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),i.prototype.initialize.call(this,e)},"initialize"),t.prototype.getOverlayedFileSystems=n(function(){return i.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},"getOverlayedFileSystems"),t.prototype.unwrap=n(function(){return i.prototype.getFSUnlocked.call(this)},"unwrap"),t}(St);In.Name="OverlayFS",In.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}};var Yt;(function(i){i[i.CB=0]="CB",i[i.FD=1]="FD",i[i.API_ERROR=2]="API_ERROR",i[i.STATS=3]="STATS",i[i.PROBE=4]="PROBE",i[i.FILEFLAG=5]="FILEFLAG",i[i.BUFFER=6]="BUFFER",i[i.ERROR=7]="ERROR"})(Yt||(Yt={}));var yr=n(function(){this._callbacks={},this._nextId=0},"CallbackArgumentConverter");yr.prototype.toRemoteArg=n(function(t){var r=this._nextId++;return this._callbacks[r]=t,{type:Yt.CB,id:r}},"toRemoteArg"),yr.prototype.toLocalArg=n(function(t){var r=this._callbacks[t];return delete this._callbacks[t],r},"toLocalArg");var Hn=n(function(){this._fileDescriptors={},this._nextId=0},"FileDescriptorArgumentConverter");Hn.prototype.toRemoteArg=n(function(t,r,e,o){var s=this._nextId++,a,u;this._fileDescriptors[s]=t,t.stat(function(p,g){p?o(p):(u=Je(g.toBuffer()),e.isReadable()?t.read(m.alloc(g.size),0,g.size,0,function(T,M,X){T?o(T):(a=Je(X),o(null,{type:Yt.FD,id:s,data:a,stat:u,path:r,flag:e.getFlagString()}))}):o(null,{type:Yt.FD,id:s,data:new ArrayBuffer(0),stat:u,path:r,flag:e.getFlagString()}))})},"toRemoteArg"),Hn.prototype.applyFdAPIRequest=n(function(t,r){var e=this,o=t.args[0];this._applyFdChanges(o,function(s,a){s?r(s):a[t.method](function(u){t.method==="close"&&delete e._fileDescriptors[o.id],r(u)})})},"applyFdAPIRequest"),Hn.prototype._applyFdChanges=n(function(t,r){var e=this._fileDescriptors[t.id],o=Qe(t.data),s=j.fromBuffer(Qe(t.stat)),a=C.getFileFlag(t.flag);a.isWriteable()?e.write(o,0,o.length,a.isAppendable()?e.getPos():0,function(u){function p(){e.stat(function(g,T){g?r(g):T.mode!==s.mode?e.chmod(s.mode,function(M){r(M,e)}):r(g,e)})}n(p,"applyStatChanges"),u?r(u):a.isAppendable()?p():e.truncate(o.length,function(){p()})}):r(null,e)},"_applyFdChanges");function Vn(i){return{type:Yt.API_ERROR,errorData:Je(i.writeToBuffer())}}n(Vn,"apiErrorLocal2Remote");function si(i){return c.fromBuffer(Qe(i.errorData))}n(si,"apiErrorRemote2Local");function ai(i){return{type:Yt.ERROR,name:i.name,message:i.message,stack:i.stack}}n(ai,"errorLocal2Remote");function fi(i){var t=te[i.name];typeof t!="function"&&(t=Error);var r=new t(i.message);return r.stack=i.stack,r}n(fi,"errorRemote2Local");function ui(i){return{type:Yt.STATS,statsData:Je(i.toBuffer())}}n(ui,"statsLocal2Remote");function ci(i){return j.fromBuffer(Qe(i.statsData))}n(ci,"statsRemote2Local");function li(i){return{type:Yt.FILEFLAG,flagStr:i.getFlagString()}}n(li,"fileFlagLocal2Remote");function hi(i){return C.getFileFlag(i.flagStr)}n(hi,"fileFlagRemote2Local");function Je(i){return Q(i)}n(Je,"bufferToTransferrableObject");function Qe(i){return Et(i)}n(Qe,"transferrableObjectToBuffer");function pi(i){return{type:Yt.BUFFER,data:Je(i)}}n(pi,"bufferLocal2Remote");function di(i){return Qe(i.data)}n(di,"bufferRemote2Local");function Ds(i){return i&&typeof i=="object"&&i.hasOwnProperty("browserfsMessage")&&i.browserfsMessage}n(Ds,"isAPIRequest");function Ts(i){return i&&typeof i=="object"&&i.hasOwnProperty("browserfsMessage")&&i.browserfsMessage}n(Ts,"isAPIResponse");var yi=function(i){function t(r,e,o,s,a,u){i.call(this,r,e,o,s,u),this._remoteFdId=a}return n(t,"WorkerFile"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=n(function(){return this._remoteFdId},"getRemoteFdId"),t.prototype.toRemoteArg=n(function(){return{type:Yt.FD,id:this._remoteFdId,data:Je(this.getBuffer()),stat:Je(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},"toRemoteArg"),t.prototype.sync=n(function(e){this._syncClose("sync",e)},"sync"),t.prototype.close=n(function(e){this._syncClose("close",e)},"close"),t.prototype._syncClose=n(function(e,o){var s=this;this.isDirty()?this._fs.syncClose(e,this,function(a){a||s.resetDirty(),o(a)}):o()},"_syncClose"),t}(fe),Zn=function(i){function t(r,e){var o=this;e===void 0&&(e=!0),i.call(this),this._callbackConverter=new yr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=r,Ot(e,t.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",function(s){var a=s.data;if(Ts(a)){var u,p=a.args,g=new Array(p.length);for(u=0;u<g.length;u++)g[u]=o._argRemote2Local(p[u]);o._callbackConverter.toLocalArg(a.cbId).apply(null,g)}})}return n(t,"WorkerFS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){var s=new t(e.worker,!1);s.initialize(function(){o(null,s)})},"Create"),t.isAvailable=n(function(){return typeof importScripts<"u"||typeof Worker<"u"},"isAvailable"),t.attachRemoteListener=n(function(e){var o=new Hn;function s(u,p,g){switch(typeof u){case"object":u instanceof j?g(null,ui(u)):u instanceof c?g(null,Vn(u)):u instanceof wt?g(null,o.toRemoteArg(u,p[0],p[1],g)):u instanceof C?g(null,li(u)):u instanceof m?g(null,pi(u)):u instanceof Error?g(null,ai(u)):g(null,u);break;default:g(null,u);break}}n(s,"argLocal2Remote");function a(u,p){if(!u)return u;switch(typeof u){case"object":if(typeof u.type=="number"){var g=u;switch(g.type){case Yt.CB:var T=u.id;return function(){var M=arguments,X,tt=new Array(arguments.length),it,lt=arguments.length;function vt(It){lt>0&&(lt=-1,it={browserfsMessage:!0,cbId:T,args:[Vn(It)]},e.postMessage(it))}for(n(vt,"abortAndSendError"),X=0;X<arguments.length;X++)(function(It,Kt){s(Kt,p,function(ce,De){tt[It]=De,ce?vt(ce):--lt===0&&(it={browserfsMessage:!0,cbId:T,args:tt},e.postMessage(it))})})(X,M[X]);arguments.length===0&&(it={browserfsMessage:!0,cbId:T,args:tt},e.postMessage(it))};case Yt.API_ERROR:return si(g);case Yt.STATS:return ci(g);case Yt.FILEFLAG:return hi(g);case Yt.BUFFER:return di(g);case Yt.ERROR:return fi(g);default:return u}}else return u;default:return u}}n(a,"argRemote2Local"),e.addEventListener("message",function(u){var p=u.data;if(Ds(p)){var g=p.args,T=new Array(g.length);switch(p.method){case"close":case"sync":(function(){var tt=g[1];o.applyFdAPIRequest(p,function(it){var lt={browserfsMessage:!0,cbId:tt.id,args:it?[Vn(it)]:[]};e.postMessage(lt)})})();break;case"probe":(function(){var tt=ct.getRootFS(),it=g[1],lt={type:Yt.PROBE,isReadOnly:tt.isReadOnly(),supportsLinks:tt.supportsLinks(),supportsProps:tt.supportsProps()},vt={browserfsMessage:!0,cbId:it.id,args:[lt]};e.postMessage(vt)})();break;default:for(var M=0;M<g.length;M++)T[M]=a(g[M],T);var X=ct.getRootFS();X[p.method].apply(X,T);break}}})},"attachRemoteListener"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype.initialize=n(function(e){var o=this;if(this._isInitialized)e();else{var s={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(Pt()),this._callbackConverter.toRemoteArg(function(a){o._isInitialized=!0,o._isReadOnly=a.isReadOnly,o._supportLinks=a.supportsLinks,o._supportProps=a.supportsProps,e()})]};this._worker.postMessage(s)}},"initialize"),t.prototype.isReadOnly=n(function(){return this._isReadOnly},"isReadOnly"),t.prototype.supportsSynch=n(function(){return!1},"supportsSynch"),t.prototype.supportsLinks=n(function(){return this._supportLinks},"supportsLinks"),t.prototype.supportsProps=n(function(){return this._supportProps},"supportsProps"),t.prototype.rename=n(function(e,o,s){this._rpc("rename",arguments)},"rename"),t.prototype.stat=n(function(e,o,s){this._rpc("stat",arguments)},"stat"),t.prototype.open=n(function(e,o,s,a){this._rpc("open",arguments)},"open"),t.prototype.unlink=n(function(e,o){this._rpc("unlink",arguments)},"unlink"),t.prototype.rmdir=n(function(e,o){this._rpc("rmdir",arguments)},"rmdir"),t.prototype.mkdir=n(function(e,o,s){this._rpc("mkdir",arguments)},"mkdir"),t.prototype.readdir=n(function(e,o){this._rpc("readdir",arguments)},"readdir"),t.prototype.exists=n(function(e,o){this._rpc("exists",arguments)},"exists"),t.prototype.realpath=n(function(e,o,s){this._rpc("realpath",arguments)},"realpath"),t.prototype.truncate=n(function(e,o,s){this._rpc("truncate",arguments)},"truncate"),t.prototype.readFile=n(function(e,o,s,a){this._rpc("readFile",arguments)},"readFile"),t.prototype.writeFile=n(function(e,o,s,a,u,p){this._rpc("writeFile",arguments)},"writeFile"),t.prototype.appendFile=n(function(e,o,s,a,u,p){this._rpc("appendFile",arguments)},"appendFile"),t.prototype.chmod=n(function(e,o,s,a){this._rpc("chmod",arguments)},"chmod"),t.prototype.chown=n(function(e,o,s,a,u){this._rpc("chown",arguments)},"chown"),t.prototype.utimes=n(function(e,o,s,a){this._rpc("utimes",arguments)},"utimes"),t.prototype.link=n(function(e,o,s){this._rpc("link",arguments)},"link"),t.prototype.symlink=n(function(e,o,s,a){this._rpc("symlink",arguments)},"symlink"),t.prototype.readlink=n(function(e,o){this._rpc("readlink",arguments)},"readlink"),t.prototype.syncClose=n(function(e,o,s){this._worker.postMessage({browserfsMessage:!0,method:e,args:[o.toRemoteArg(),this._callbackConverter.toRemoteArg(s)]})},"syncClose"),t.prototype._argRemote2Local=n(function(e){if(!e)return e;switch(typeof e){case"object":if(typeof e.type=="number"){var o=e;switch(o.type){case Yt.API_ERROR:return si(o);case Yt.FD:var s=o;return new yi(this,s.path,C.getFileFlag(s.flag),j.fromBuffer(Qe(s.stat)),s.id,Qe(s.data));case Yt.STATS:return ci(o);case Yt.FILEFLAG:return hi(o);case Yt.BUFFER:return di(o);case Yt.ERROR:return fi(o);default:return e}}else return e;default:return e}},"_argRemote2Local"),t.prototype._rpc=n(function(e,o){for(var s=this,a=new Array(o.length),u=0;u<o.length;u++)a[u]=s._argLocal2Remote(o[u]);var p={browserfsMessage:!0,method:e,args:a};this._worker.postMessage(p)},"_rpc"),t.prototype._argLocal2Remote=n(function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof j?ui(e):e instanceof c?Vn(e):e instanceof yi?e.toRemoteArg():e instanceof C?li(e):e instanceof m?pi(e):e instanceof Error?ai(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},"_argLocal2Remote"),t}($);Zn.Name="WorkerFS",Zn.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(i,t){i.postMessage?t():t(new c(f.EINVAL,"option must be a Web Worker instance."))}}};function As(i,t,r){var e=new XMLHttpRequest;e.open("GET",i,!0);var o=!0;switch(t){case"buffer":e.responseType="arraybuffer";break;case"json":try{e.responseType="json",o=e.responseType==="json"}catch{o=!1}break;default:return r(new c(f.EINVAL,"Invalid download type: "+t))}e.onreadystatechange=function(s){if(e.readyState===4)if(e.status===200)switch(t){case"buffer":return r(null,e.response?m.from(e.response):Pt());case"json":return o?r(null,e.response):r(null,JSON.parse(e.responseText))}else return r(new c(e.status,"XHR error."))},e.send()}n(As,"asyncDownloadFileModern");function Cs(i,t){var r=new XMLHttpRequest;r.open("GET",i,!1);var e=null,o=null;if(r.overrideMimeType("text/plain; charset=x-user-defined"),r.onreadystatechange=function(s){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":var a=r.responseText;e=m.alloc(a.length);for(var u=0;u<a.length;u++)e[u]=a.charCodeAt(u);return;case"json":e=JSON.parse(r.responseText);return}else{o=new c(r.status,"XHR error.");return}},r.send(),o)throw o;return e}n(Cs,"syncDownloadFileModern");function Ms(i,t){var r=new XMLHttpRequest;switch(r.open("GET",i,!1),t){case"buffer":r.responseType="arraybuffer";break;case"json":break;default:throw new c(f.EINVAL,"Invalid download type: "+t)}var e,o;if(r.onreadystatechange=function(s){if(r.readyState===4)if(r.status===200)switch(t){case"buffer":e=m.from(r.response);break;case"json":e=JSON.parse(r.response);break}else o=new c(r.status,"XHR error.")},r.send(),o)throw o;return e}n(Ms,"syncDownloadFileIE10");function vi(i,t,r){var e=new XMLHttpRequest;e.open("HEAD",t,i),e.onreadystatechange=function(o){if(e.readyState===4)if(e.status===200)try{return r(null,parseInt(e.getResponseHeader("Content-Length")||"-1",10))}catch{return r(new c(f.EIO,"XHR HEAD error: Could not read content-length."))}else return r(new c(e.status,"XHR HEAD error."))},e.send()}n(vi,"getFileSize");var gi=As,Ps=_t&&typeof Blob<"u"?Ms:Cs;function js(i){var t=-1;return vi(!1,i,function(r,e){if(r)throw r;t=e}),t}n(js,"getFileSizeSync");function Bs(i,t){vi(!0,i,t)}n(Bs,"getFileSizeAsync");var xe=n(function(){this._index={},this.addPath("/",new ge)},"FileIndex");xe.fromListing=n(function(t){var r=new xe,e=new ge;r._index["/"]=e;for(var o=[["",t,e]];o.length>0;){var s=void 0,a=o.pop(),u=a[0],p=a[1],g=a[2];for(var T in p)if(p.hasOwnProperty(T)){var M=p[T],X=u+"/"+T;M?(r._index[X]=s=new ge,o.push([X,M,s])):s=new hn(new j(P.FILE,-1,365)),g&&(g._ls[T]=s)}}return r},"fromListing"),xe.prototype.fileIterator=n(function(t){var r=this;for(var e in r._index)if(r._index.hasOwnProperty(e))for(var o=r._index[e],s=o.getListing(),a=0,u=s;a<u.length;a+=1){var p=u[a],g=o.getItem(p);je(g)&&t(g.getData())}},"fileIterator"),xe.prototype.addPath=n(function(t,r){if(!r)throw new Error("Inode must be specified");if(t[0]!=="/")throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===r;var e=this._split_path(t),o=e[0],s=e[1],a=this._index[o];return a===void 0&&t!=="/"&&(a=new ge,!this.addPath(o,a))||t!=="/"&&!a.addItem(s,r)?!1:(He(r)&&(this._index[t]=r),!0)},"addPath"),xe.prototype.addPathFast=n(function(t,r){var e=t.lastIndexOf("/"),o=e===0?"/":t.substring(0,e),s=t.substring(e+1),a=this._index[o];return a===void 0&&(a=new ge,this.addPathFast(o,a)),a.addItem(s,r)?(r.isDir()&&(this._index[t]=r),!0):!1},"addPathFast"),xe.prototype.removePath=n(function(t){var r=this,e=this._split_path(t),o=e[0],s=e[1],a=this._index[o];if(a===void 0)return null;var u=a.remItem(s);if(u===null)return null;if(He(u)){for(var p=u.getListing(),g=0,T=p;g<T.length;g+=1){var M=T[g];r.removePath(t+"/"+M)}t!=="/"&&delete this._index[t]}return u},"removePath"),xe.prototype.ls=n(function(t){var r=this._index[t];return r===void 0?null:r.getListing()},"ls"),xe.prototype.getInode=n(function(t){var r=this._split_path(t),e=r[0],o=r[1],s=this._index[e];return s===void 0?null:e===t?s:s.getItem(o)},"getInode"),xe.prototype._split_path=n(function(t){var r=d.dirname(t),e=t.substr(r.length+(r==="/"?0:1));return[r,e]},"_split_path");var hn=n(function(t){this.data=t},"FileInode");hn.prototype.isFile=n(function(){return!0},"isFile"),hn.prototype.isDir=n(function(){return!1},"isDir"),hn.prototype.getData=n(function(){return this.data},"getData"),hn.prototype.setData=n(function(t){this.data=t},"setData");var ge=n(function(t){t===void 0&&(t=null),this.data=t,this._ls={}},"DirInode");ge.prototype.isFile=n(function(){return!1},"isFile"),ge.prototype.isDir=n(function(){return!0},"isDir"),ge.prototype.getData=n(function(){return this.data},"getData"),ge.prototype.getStats=n(function(){return new j(P.DIRECTORY,4096,365)},"getStats"),ge.prototype.getListing=n(function(){return Object.keys(this._ls)},"getListing"),ge.prototype.getItem=n(function(t){var r=this._ls[t];return r||null},"getItem"),ge.prototype.addItem=n(function(t,r){return t in this._ls?!1:(this._ls[t]=r,!0)},"addItem"),ge.prototype.remItem=n(function(t){var r=this._ls[t];return r===void 0?null:(delete this._ls[t],r)},"remItem");function je(i){return!!i&&i.isFile()}n(je,"isFileInode");function He(i){return!!i&&i.isDir()}n(He,"isDirInode");function Us(i,t,r){try{r(null,i.toString(t))}catch(e){r(e)}}n(Us,"tryToString");var Xn=function(i){function t(r,e,o){e===void 0&&(e=""),o===void 0&&(o=!0),i.call(this),r||(r="index.json"),e.length>0&&e.charAt(e.length-1)!=="/"&&(e=e+"/"),this.prefixUrl=e;var s=null;if(typeof r=="string"){if(s=this._requestFileSync(r,"json"),!s)throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else s=r;Ot(o,t.Name,{index:typeof r=="string"?r:"file index as an object",baseUrl:e}),this._index=xe.fromListing(s)}return n(t,"XmlHttpRequest"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){e.index===void 0&&(e.index="index.json"),typeof e.index=="string"?t.FromURL(e.index,o,e.baseUrl,!1):o(null,new t(e.index,e.baseUrl,!1))},"Create"),t.isAvailable=n(function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest!==null},"isAvailable"),t.FromURL=n(function(e,o,s,a){s===void 0&&(s=e.slice(0,e.lastIndexOf("/")+1)),a===void 0&&(a=!0),a&&console.warn(`[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: "`+e+'", baseUrl: "'+s+`" }, cb)' instead.`),gi(e,"json",function(u,p){u?o(u):o(null,new t(p,s,!1))})},"FromURL"),t.prototype.empty=n(function(){this._index.fileIterator(function(e){e.fileData=null})},"empty"),t.prototype.getName=n(function(){return t.Name},"getName"),t.prototype.diskSpace=n(function(e,o){o(0,0)},"diskSpace"),t.prototype.isReadOnly=n(function(){return!0},"isReadOnly"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.preloadFile=n(function(e,o){var s=this._index.getInode(e);if(je(s)){if(s===null)throw c.ENOENT(e);var a=s.getData();a.size=o.length,a.fileData=o}else throw c.EISDIR(e)},"preloadFile"),t.prototype.stat=n(function(e,o,s){var a=this._index.getInode(e);if(a===null)return s(c.ENOENT(e));var u;je(a)?(u=a.getData(),u.size<0?this._requestFileSizeAsync(e,function(p,g){if(p)return s(p);u.size=g,s(null,u.clone())}):s(null,u.clone())):He(a)?(u=a.getStats(),s(null,u)):s(c.FileError(f.EINVAL,e))},"stat"),t.prototype.statSync=n(function(e,o){var s=this._index.getInode(e);if(s===null)throw c.ENOENT(e);var a;if(je(s))a=s.getData(),a.size<0&&(a.size=this._requestFileSizeSync(e));else if(He(s))a=s.getStats();else throw c.FileError(f.EINVAL,e);return a},"statSync"),t.prototype.open=n(function(e,o,s,a){if(o.isWriteable())return a(new c(f.EPERM,e));var u=this,p=this._index.getInode(e);if(p===null)return a(c.ENOENT(e));if(je(p)){var g=p.getData();switch(o.pathExistsAction()){case D.THROW_EXCEPTION:case D.TRUNCATE_FILE:return a(c.EEXIST(e));case D.NOP:if(g.fileData)return a(null,new le(u,e,o,g.clone(),g.fileData));this._requestFileAsync(e,"buffer",function(T,M){return T?a(T):(g.size=M.length,g.fileData=M,a(null,new le(u,e,o,g.clone(),M)))});break;default:return a(new c(f.EINVAL,"Invalid FileMode object."))}}else return a(c.EISDIR(e))},"open"),t.prototype.openSync=n(function(e,o,s){if(o.isWriteable())throw new c(f.EPERM,e);var a=this._index.getInode(e);if(a===null)throw c.ENOENT(e);if(je(a)){var u=a.getData();switch(o.pathExistsAction()){case D.THROW_EXCEPTION:case D.TRUNCATE_FILE:throw c.EEXIST(e);case D.NOP:if(u.fileData)return new le(this,e,o,u.clone(),u.fileData);var p=this._requestFileSync(e,"buffer");return u.size=p.length,u.fileData=p,new le(this,e,o,u.clone(),p);default:throw new c(f.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e)},"openSync"),t.prototype.readdir=n(function(e,o){try{o(null,this.readdirSync(e))}catch(s){o(s)}},"readdir"),t.prototype.readdirSync=n(function(e){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);if(He(o))return o.getListing();throw c.ENOTDIR(e)},"readdirSync"),t.prototype.readFile=n(function(e,o,s,a){var u=a;this.open(e,s,420,function(p,g){if(p)return a(p);a=n(function(X,tt){g.close(function(it){return X||(X=it),u(X,tt)})},"cb");var T=g,M=T.getBuffer();o===null?a(p,Rt(M)):Us(M,o,a)})},"readFile"),t.prototype.readFileSync=n(function(e,o,s){var a=this.openSync(e,s,420);try{var u=a,p=u.getBuffer();return o===null?Rt(p):p.toString(o)}finally{a.closeSync()}},"readFileSync"),t.prototype.getXhrPath=n(function(e){return e.charAt(0)==="/"&&(e=e.slice(1)),this.prefixUrl+e},"getXhrPath"),t.prototype._requestFileAsync=n(function(e,o,s){gi(this.getXhrPath(e),o,s)},"_requestFileAsync"),t.prototype._requestFileSync=n(function(e,o){return Ps(this.getXhrPath(e),o)},"_requestFileSync"),t.prototype._requestFileSizeAsync=n(function(e,o){Bs(this.getXhrPath(e),o)},"_requestFileSizeAsync"),t.prototype._requestFileSizeSync=n(function(e){return js(this.getXhrPath(e))},"_requestFileSizeSync"),t}($);Xn.Name="XmlHttpRequest",Xn.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var $e=n(function(){},"ExtendedASCII");$e.str2byte=n(function(t,r){for(var e=t.length>r.length?r.length:t.length,o=0;o<e;o++){var s=t.charCodeAt(o);if(s>127){var a=$e.extendedChars.indexOf(t.charAt(o));a>-1&&(s=a+128)}r[s]=o}return e},"str2byte"),$e.byte2str=n(function(t){for(var r=new Array(t.length),e=0;e<t.length;e++){var o=t[e];o>127?r[e]=$e.extendedChars[o-128]:r[e]=String.fromCharCode(o)}return r.join("")},"byte2str"),$e.byteLength=n(function(t){return t.length},"byteLength"),$e.extendedChars=["\xC7","\xFC","\xE9","\xE2","\xE4","\xE0","\xE5","\xE7","\xEA","\xEB","\xE8","\xEF","\xEE","\xEC","\xC4","\xC5","\xC9","\xE6","\xC6","\xF4","\xF6","\xF2","\xFB","\xF9","\xFF","\xD6","\xDC","\xF8","\xA3","\xD8","\xD7","\u0192","\xE1","\xED","\xF3","\xFA","\xF1","\xD1","\xAA","\xBA","\xBF","\xAE","\xAC","\xBD","\xBC","\xA1","\xAB","\xBB","_","_","_","\xA6","\xA6","\xC1","\xC2","\xC0","\xA9","\xA6","\xA6","+","+","\xA2","\xA5","+","+","-","-","+","-","+","\xE3","\xC3","+","+","-","-","\xA6","-","+","\xA4","\xF0","\xD0","\xCA","\xCB","\xC8","i","\xCD","\xCE","\xCF","+","+","_","_","\xA6","\xCC","_","\xD3","\xDF","\xD4","\xD2","\xF5","\xD5","\xB5","\xFE","\xDE","\xDA","\xDB","\xD9","\xFD","\xDD","\xAF","\xB4","\xAD","\xB1","_","\xBE","\xB6","\xA7","\xF7","\xB8","\xB0","\xA8","\xB7","\xB9","\xB3","\xB2","_"," "];var zs=y(31).inflateRaw,wi={},mi;(function(i){i[i.MSDOS=0]="MSDOS",i[i.AMIGA=1]="AMIGA",i[i.OPENVMS=2]="OPENVMS",i[i.UNIX=3]="UNIX",i[i.VM_CMS=4]="VM_CMS",i[i.ATARI_ST=5]="ATARI_ST",i[i.OS2_HPFS=6]="OS2_HPFS",i[i.MAC=7]="MAC",i[i.Z_SYSTEM=8]="Z_SYSTEM",i[i.CP_M=9]="CP_M",i[i.NTFS=10]="NTFS",i[i.MVS=11]="MVS",i[i.VSE=12]="VSE",i[i.ACORN_RISC=13]="ACORN_RISC",i[i.VFAT=14]="VFAT",i[i.ALT_MVS=15]="ALT_MVS",i[i.BEOS=16]="BEOS",i[i.TANDEM=17]="TANDEM",i[i.OS_400=18]="OS_400",i[i.OSX=19]="OSX"})(mi||(mi={}));var pn;(function(i){i[i.STORED=0]="STORED",i[i.SHRUNK=1]="SHRUNK",i[i.REDUCED_1=2]="REDUCED_1",i[i.REDUCED_2=3]="REDUCED_2",i[i.REDUCED_3=4]="REDUCED_3",i[i.REDUCED_4=5]="REDUCED_4",i[i.IMPLODE=6]="IMPLODE",i[i.DEFLATE=8]="DEFLATE",i[i.DEFLATE64=9]="DEFLATE64",i[i.TERSE_OLD=10]="TERSE_OLD",i[i.BZIP2=12]="BZIP2",i[i.LZMA=14]="LZMA",i[i.TERSE_NEW=18]="TERSE_NEW",i[i.LZ77=19]="LZ77",i[i.WAVPACK=97]="WAVPACK",i[i.PPMD=98]="PPMD"})(pn||(pn={}));function Si(i,t){var r=t&31,e=(t>>5&15)-1,o=(t>>9)+1980,s=i&31,a=i>>5&63,u=i>>11;return new Date(o,e,r,u,a,s)}n(Si,"msdos2date");function Yn(i,t,r,e){return e===0?"":t?i.toString("utf8",r,r+e):$e.byte2str(i.slice(r,r+e))}n(Yn,"safeToString");var _e=n(function(t){if(this.data=t,t.readUInt32LE(0)!==67324752)throw new c(f.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))},"FileHeader");_e.prototype.versionNeeded=n(function(){return this.data.readUInt16LE(4)},"versionNeeded"),_e.prototype.flags=n(function(){return this.data.readUInt16LE(6)},"flags"),_e.prototype.compressionMethod=n(function(){return this.data.readUInt16LE(8)},"compressionMethod"),_e.prototype.lastModFileTime=n(function(){return Si(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},"lastModFileTime"),_e.prototype.rawLastModFileTime=n(function(){return this.data.readUInt32LE(10)},"rawLastModFileTime"),_e.prototype.crc32=n(function(){return this.data.readUInt32LE(14)},"crc32"),_e.prototype.fileNameLength=n(function(){return this.data.readUInt16LE(26)},"fileNameLength"),_e.prototype.extraFieldLength=n(function(){return this.data.readUInt16LE(28)},"extraFieldLength"),_e.prototype.fileName=n(function(){return Yn(this.data,this.useUTF8(),30,this.fileNameLength())},"fileName"),_e.prototype.extraField=n(function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},"extraField"),_e.prototype.totalSize=n(function(){return 30+this.fileNameLength()+this.extraFieldLength()},"totalSize"),_e.prototype.useUTF8=n(function(){return(this.flags()&2048)===2048},"useUTF8");var kn=n(function(t,r,e){this.header=t,this.record=r,this.data=e},"FileData");kn.prototype.decompress=n(function(){var t=this.header.compressionMethod(),r=wi[t];if(r)return r(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var e=pn[t];throw e||(e="Unknown: "+t),new c(f.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+e)},"decompress"),kn.prototype.getHeader=n(function(){return this.header},"getHeader"),kn.prototype.getRecord=n(function(){return this.record},"getRecord"),kn.prototype.getRawData=n(function(){return this.data},"getRawData");var Tt=n(function(t,r){if(this.zipData=t,this.data=r,this.data.readUInt32LE(0)!==33639248)throw new c(f.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()},"CentralDirectory");Tt.prototype.versionMadeBy=n(function(){return this.data.readUInt16LE(4)},"versionMadeBy"),Tt.prototype.versionNeeded=n(function(){return this.data.readUInt16LE(6)},"versionNeeded"),Tt.prototype.flag=n(function(){return this.data.readUInt16LE(8)},"flag"),Tt.prototype.compressionMethod=n(function(){return this.data.readUInt16LE(10)},"compressionMethod"),Tt.prototype.lastModFileTime=n(function(){return Si(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},"lastModFileTime"),Tt.prototype.rawLastModFileTime=n(function(){return this.data.readUInt32LE(12)},"rawLastModFileTime"),Tt.prototype.crc32=n(function(){return this.data.readUInt32LE(16)},"crc32"),Tt.prototype.compressedSize=n(function(){return this.data.readUInt32LE(20)},"compressedSize"),Tt.prototype.uncompressedSize=n(function(){return this.data.readUInt32LE(24)},"uncompressedSize"),Tt.prototype.fileNameLength=n(function(){return this.data.readUInt16LE(28)},"fileNameLength"),Tt.prototype.extraFieldLength=n(function(){return this.data.readUInt16LE(30)},"extraFieldLength"),Tt.prototype.fileCommentLength=n(function(){return this.data.readUInt16LE(32)},"fileCommentLength"),Tt.prototype.diskNumberStart=n(function(){return this.data.readUInt16LE(34)},"diskNumberStart"),Tt.prototype.internalAttributes=n(function(){return this.data.readUInt16LE(36)},"internalAttributes"),Tt.prototype.externalAttributes=n(function(){return this.data.readUInt32LE(38)},"externalAttributes"),Tt.prototype.headerRelativeOffset=n(function(){return this.data.readUInt32LE(42)},"headerRelativeOffset"),Tt.prototype.produceFilename=n(function(){var t=Yn(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},"produceFilename"),Tt.prototype.fileName=n(function(){return this._filename},"fileName"),Tt.prototype.rawFileName=n(function(){return this.data.slice(46,46+this.fileNameLength())},"rawFileName"),Tt.prototype.extraField=n(function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},"extraField"),Tt.prototype.fileComment=n(function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Yn(this.data,this.useUTF8(),t,this.fileCommentLength())},"fileComment"),Tt.prototype.rawFileComment=n(function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},"rawFileComment"),Tt.prototype.totalSize=n(function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},"totalSize"),Tt.prototype.isDirectory=n(function(){var t=this.fileName();return!!(this.externalAttributes()&16)||t.charAt(t.length-1)==="/"},"isDirectory"),Tt.prototype.isFile=n(function(){return!this.isDirectory()},"isFile"),Tt.prototype.useUTF8=n(function(){return(this.flag()&2048)===2048},"useUTF8"),Tt.prototype.isEncrypted=n(function(){return(this.flag()&1)===1},"isEncrypted"),Tt.prototype.getFileData=n(function(){var t=this.headerRelativeOffset(),r=new _e(this.zipData.slice(t));return new kn(r,this,this.zipData.slice(t+r.totalSize()))},"getFileData"),Tt.prototype.getData=n(function(){return this.getFileData().decompress()},"getData"),Tt.prototype.getRawData=n(function(){return this.getFileData().getRawData()},"getRawData"),Tt.prototype.getStats=n(function(){return new j(P.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())},"getStats");var Ne=n(function(t){if(this.data=t,this.data.readUInt32LE(0)!==101010256)throw new c(f.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))},"EndOfCentralDirectory");Ne.prototype.diskNumber=n(function(){return this.data.readUInt16LE(4)},"diskNumber"),Ne.prototype.cdDiskNumber=n(function(){return this.data.readUInt16LE(6)},"cdDiskNumber"),Ne.prototype.cdDiskEntryCount=n(function(){return this.data.readUInt16LE(8)},"cdDiskEntryCount"),Ne.prototype.cdTotalEntryCount=n(function(){return this.data.readUInt16LE(10)},"cdTotalEntryCount"),Ne.prototype.cdSize=n(function(){return this.data.readUInt32LE(12)},"cdSize"),Ne.prototype.cdOffset=n(function(){return this.data.readUInt32LE(16)},"cdOffset"),Ne.prototype.cdZipCommentLength=n(function(){return this.data.readUInt16LE(20)},"cdZipCommentLength"),Ne.prototype.cdZipComment=n(function(){return Yn(this.data,!0,22,this.cdZipCommentLength())},"cdZipComment"),Ne.prototype.rawCdZipComment=n(function(){return this.data.slice(22,22+this.cdZipCommentLength())},"rawCdZipComment");var _i=n(function(t,r,e,o){this.index=t,this.directoryEntries=r,this.eocd=e,this.data=o},"ZipTOC"),tn=function(i){function t(r,e,o){e===void 0&&(e=""),o===void 0&&(o=!0),i.call(this),this.name=e,this._index=new xe,this._directoryEntries=[],this._eocd=null,Ot(o,t.Name,{zipData:"zip data as a Buffer",name:e}),r instanceof _i?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return n(t,"ZipFS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){try{t.computeIndex(e.zipData,function(s){var a=new t(s,e.name,!1);o(null,a)},!1)}catch(s){o(s)}},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.RegisterDecompressionMethod=n(function(e,o){wi[e]=o},"RegisterDecompressionMethod"),t.computeIndex=n(function(e,o,s){s===void 0&&(s=!0),s&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var a=new xe,u=t.getEOCD(e);if(u.diskNumber()!==u.cdDiskNumber())throw new c(f.EINVAL,"ZipFS does not support spanned zip files.");var p=u.cdOffset();if(p===4294967295)throw new c(f.EINVAL,"ZipFS does not support Zip64.");var g=p+u.cdSize();t.computeIndexResponsive(e,a,p,g,o,[],u)},"computeIndex"),t.getEOCD=n(function(e){for(var o=22,s=Math.min(o+65535,e.length-1),a=o;a<s;a++)if(e.readUInt32LE(e.length-a)===101010256)return new Ne(e.slice(e.length-a));throw new c(f.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},"getEOCD"),t.addToIndex=n(function(e,o){var s=e.fileName();if(s.charAt(0)==="/")throw new Error("WHY IS THIS ABSOLUTE");s.charAt(s.length-1)==="/"&&(s=s.substr(0,s.length-1)),e.isDirectory()?o.addPathFast("/"+s,new ge(e)):o.addPathFast("/"+s,new hn(e))},"addToIndex"),t.computeIndexResponsive=n(function(e,o,s,a,u,p,g){if(s<a){for(var T=0;T++<200&&s<a;){var M=new Tt(e,e.slice(s));t.addToIndex(M,o),s+=M.totalSize(),p.push(M)}dr(function(){t.computeIndexResponsive(e,o,s,a,u,p,g)})}else u(new _i(o,p,g,e))},"computeIndexResponsive"),t.prototype.getName=n(function(){return t.Name+(this.name!==""?" "+this.name:"")},"getName"),t.prototype.getCentralDirectoryEntry=n(function(e){var o=this._index.getInode(e);if(o===null)throw c.ENOENT(e);if(je(o))return o.getData();if(He(o))return o.getData();throw c.EPERM("Invalid inode: "+o)},"getCentralDirectoryEntry"),t.prototype.getCentralDirectoryEntryAt=n(function(e){var o=this._directoryEntries[e];if(!o)throw new RangeError("Invalid directory index: "+e+".");return o},"getCentralDirectoryEntryAt"),t.prototype.getNumberOfCentralDirectoryEntries=n(function(){return this._directoryEntries.length},"getNumberOfCentralDirectoryEntries"),t.prototype.getEndOfCentralDirectory=n(function(){return this._eocd},"getEndOfCentralDirectory"),t.prototype.diskSpace=n(function(e,o){o(this.data.length,0)},"diskSpace"),t.prototype.isReadOnly=n(function(){return!0},"isReadOnly"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.statSync=n(function(e,o){var s=this._index.getInode(e);if(s===null)throw c.ENOENT(e);var a;if(je(s))a=s.getData().getStats();else if(He(s))a=s.getStats();else throw new c(f.EINVAL,"Invalid inode.");return a},"statSync"),t.prototype.openSync=n(function(e,o,s){if(o.isWriteable())throw new c(f.EPERM,e);var a=this._index.getInode(e);if(a)if(je(a)){var u=a.getData(),p=u.getStats();switch(o.pathExistsAction()){case D.THROW_EXCEPTION:case D.TRUNCATE_FILE:throw c.EEXIST(e);case D.NOP:return new le(this,e,o,p,u.getData());default:throw new c(f.EINVAL,"Invalid FileMode object.")}}else throw c.EISDIR(e);else throw c.ENOENT(e)},"openSync"),t.prototype.readdirSync=n(function(e){var o=this._index.getInode(e);if(o){if(He(o))return o.getListing();throw c.ENOTDIR(e)}else throw c.ENOENT(e)},"readdirSync"),t.prototype.readFileSync=n(function(e,o,s){var a=this.openSync(e,s,420);try{var u=a,p=u.getBuffer();return o===null?Rt(p):p.toString(o)}finally{a.closeSync()}},"readFileSync"),t.prototype.populateIndex=n(function(){var e=this,o=this._eocd=t.getEOCD(this.data);if(o.diskNumber()!==o.cdDiskNumber())throw new c(f.EINVAL,"ZipFS does not support spanned zip files.");var s=o.cdOffset();if(s===4294967295)throw new c(f.EINVAL,"ZipFS does not support Zip64.");for(var a=s+o.cdSize();s<a;){var u=new Tt(e.data,e.data.slice(s));s+=u.totalSize(),t.addToIndex(u,e._index),e._directoryEntries.push(u)}},"populateIndex"),t}(ie);tn.Name="ZipFS",tn.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:N},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},tn.CompressionMethod=pn,tn.RegisterDecompressionMethod(pn.DEFLATE,function(i,t,r){return kt(zs(i.slice(0,t),{chunkSize:r}))}),tn.RegisterDecompressionMethod(pn.STORED,function(i,t,r){return Rt(i,0,r)});var Ws="IEEE_P1282";function we(i,t,r){return i.toString("ascii",t,t+r).trim()}n(we,"getASCIIString");function vr(i,t,r){if(r===1)return String.fromCharCode(i[t]);for(var e=Math.floor(r/2),o=new Array(e),s=0;s<e;s++){var a=t+(s<<1);o[s]=String.fromCharCode(i[a+1]|i[a]<<8)}return o.join("")}n(vr,"getJolietString");function Re(i,t){var r=parseInt(we(i,t,4),10),e=parseInt(we(i,t+4,2),10),o=parseInt(we(i,t+6,2),10),s=parseInt(we(i,t+8,2),10),a=parseInt(we(i,t+10,2),10),u=parseInt(we(i,t+12,2),10),p=parseInt(we(i,t+14,2),10);return new Date(r,e,o,s,a,u,p*100)}n(Re,"getDate");function en(i,t){var r=i[t],e=i[t+1],o=i[t+2],s=i[t+3],a=i[t+4],u=i[t+5];return new Date(r,e-1,o,s,a,u)}n(en,"getShortFormDate");function Hs(i,t){var r=i.slice(t),e=new ee(r);switch(e.signatureWord()){case 17221:return new Ii(r);case 20548:return new Xs(r);case 21328:return new ki(r);case 21332:return new Oi(r);case 17746:return new Li(r);case 17747:return new Ys(r);case 20568:return new Ri(r);case 20558:return new Ks(r);case 21324:return new gr(r);case 20045:return new Di(r);case 17228:return new wr(r);case 20556:return new qs(r);case 21061:return new Ti(r);case 21574:return new Ai(r);case 21318:return new Gs(r);case 21074:return new Ni(r);default:return e}}n(Hs,"constructSystemUseEntry");function Ei(i,t,r,e){r=r-4;for(var o=new Array;t<r;){var s=Hs(i,t),a=s.length();if(a===0)return o;if(t+=a,s instanceof Oi)break;s instanceof Ii?o=o.concat(s.getEntries(e)):o.push(s)}return o}n(Ei,"constructSystemUseEntries");var dn=n(function(t){this._data=t},"VolumeDescriptor");dn.prototype.type=n(function(){return this._data[0]},"type"),dn.prototype.standardIdentifier=n(function(){return we(this._data,1,5)},"standardIdentifier"),dn.prototype.version=n(function(){return this._data[6]},"version"),dn.prototype.data=n(function(){return this._data.slice(7,2048)},"data");var Fi=function(i){function t(r){i.call(this,r),this._root=null}return n(t,"PrimaryOrSupplementaryVolumeDescriptor"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=n(function(){return this._getString32(8)},"systemIdentifier"),t.prototype.volumeIdentifier=n(function(){return this._getString32(40)},"volumeIdentifier"),t.prototype.volumeSpaceSize=n(function(){return this._data.readUInt32LE(80)},"volumeSpaceSize"),t.prototype.volumeSetSize=n(function(){return this._data.readUInt16LE(120)},"volumeSetSize"),t.prototype.volumeSequenceNumber=n(function(){return this._data.readUInt16LE(124)},"volumeSequenceNumber"),t.prototype.logicalBlockSize=n(function(){return this._data.readUInt16LE(128)},"logicalBlockSize"),t.prototype.pathTableSize=n(function(){return this._data.readUInt32LE(132)},"pathTableSize"),t.prototype.locationOfTypeLPathTable=n(function(){return this._data.readUInt32LE(140)},"locationOfTypeLPathTable"),t.prototype.locationOfOptionalTypeLPathTable=n(function(){return this._data.readUInt32LE(144)},"locationOfOptionalTypeLPathTable"),t.prototype.locationOfTypeMPathTable=n(function(){return this._data.readUInt32BE(148)},"locationOfTypeMPathTable"),t.prototype.locationOfOptionalTypeMPathTable=n(function(){return this._data.readUInt32BE(152)},"locationOfOptionalTypeMPathTable"),t.prototype.rootDirectoryEntry=n(function(e){return this._root===null&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},"rootDirectoryEntry"),t.prototype.volumeSetIdentifier=n(function(){return this._getString(190,128)},"volumeSetIdentifier"),t.prototype.publisherIdentifier=n(function(){return this._getString(318,128)},"publisherIdentifier"),t.prototype.dataPreparerIdentifier=n(function(){return this._getString(446,128)},"dataPreparerIdentifier"),t.prototype.applicationIdentifier=n(function(){return this._getString(574,128)},"applicationIdentifier"),t.prototype.copyrightFileIdentifier=n(function(){return this._getString(702,38)},"copyrightFileIdentifier"),t.prototype.abstractFileIdentifier=n(function(){return this._getString(740,36)},"abstractFileIdentifier"),t.prototype.bibliographicFileIdentifier=n(function(){return this._getString(776,37)},"bibliographicFileIdentifier"),t.prototype.volumeCreationDate=n(function(){return Re(this._data,813)},"volumeCreationDate"),t.prototype.volumeModificationDate=n(function(){return Re(this._data,830)},"volumeModificationDate"),t.prototype.volumeExpirationDate=n(function(){return Re(this._data,847)},"volumeExpirationDate"),t.prototype.volumeEffectiveDate=n(function(){return Re(this._data,864)},"volumeEffectiveDate"),t.prototype.fileStructureVersion=n(function(){return this._data[881]},"fileStructureVersion"),t.prototype.applicationUsed=n(function(){return this._data.slice(883,883+512)},"applicationUsed"),t.prototype.reserved=n(function(){return this._data.slice(1395,1395+653)},"reserved"),t.prototype._getString32=n(function(e){return this._getString(e,32)},"_getString32"),t}(dn),Vs=function(i){function t(r){if(i.call(this,r),this.type()!==1)throw new c(f.EIO,"Invalid primary volume descriptor.")}return n(t,"PrimaryVolumeDescriptor"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.name=n(function(){return"ISO9660"},"name"),t.prototype._constructRootDirectoryRecord=n(function(e){return new xi(e,-1)},"_constructRootDirectoryRecord"),t.prototype._getString=n(function(e,o){return this._getString(e,o)},"_getString"),t}(Fi),Zs=function(i){function t(r){if(i.call(this,r),this.type()!==2)throw new c(f.EIO,"Invalid supplementary volume descriptor.");var e=this.escapeSequence(),o=e[2];if(e[0]!==37||e[1]!==47||o!==64&&o!==67&&o!==69)throw new c(f.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+e.toString())}return n(t,"SupplementaryVolumeDescriptor"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.name=n(function(){return"Joliet"},"name"),t.prototype.escapeSequence=n(function(){return this._data.slice(88,120)},"escapeSequence"),t.prototype._constructRootDirectoryRecord=n(function(e){return new bi(e,-1)},"_constructRootDirectoryRecord"),t.prototype._getString=n(function(e,o){return vr(this._data,e,o)},"_getString"),t}(Fi),Vt=n(function(t,r){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=r},"DirectoryRecord");Vt.prototype.hasRockRidge=n(function(){return this._rockRidgeOffset>-1},"hasRockRidge"),Vt.prototype.getRockRidgeOffset=n(function(){return this._rockRidgeOffset},"getRockRidgeOffset"),Vt.prototype.rootCheckForRockRidge=n(function(t){var r=this.getDirectory(t);this._rockRidgeOffset=r.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},"rootCheckForRockRidge"),Vt.prototype.length=n(function(){return this._data[0]},"length"),Vt.prototype.extendedAttributeRecordLength=n(function(){return this._data[1]},"extendedAttributeRecordLength"),Vt.prototype.lba=n(function(){return this._data.readUInt32LE(2)*2048},"lba"),Vt.prototype.dataLength=n(function(){return this._data.readUInt32LE(10)},"dataLength"),Vt.prototype.recordingDate=n(function(){return en(this._data,18)},"recordingDate"),Vt.prototype.fileFlags=n(function(){return this._data[25]},"fileFlags"),Vt.prototype.fileUnitSize=n(function(){return this._data[26]},"fileUnitSize"),Vt.prototype.interleaveGapSize=n(function(){return this._data[27]},"interleaveGapSize"),Vt.prototype.volumeSequenceNumber=n(function(){return this._data.readUInt16LE(28)},"volumeSequenceNumber"),Vt.prototype.identifier=n(function(){return this._getString(33,this._data[32])},"identifier"),Vt.prototype.fileName=n(function(t){if(this.hasRockRidge()){var r=this._rockRidgeFilename(t);if(r!==null)return r}var e=this.identifier();if(this.isDirectory(t))return e;var o=e.indexOf(";");return o===-1?e:e[o-1]==="."?e.slice(0,o-1):e.slice(0,o)},"fileName"),Vt.prototype.isDirectory=n(function(t){var r=!!(this.fileFlags()&2);return!r&&this.hasRockRidge()&&(r=this.getSUEntries(t).filter(function(e){return e instanceof wr}).length>0),r},"isDirectory"),Vt.prototype.isSymlink=n(function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter(function(r){return r instanceof gr}).length>0},"isSymlink"),Vt.prototype.getSymlinkPath=n(function(t){for(var r="",e=this.getSUEntries(t),o=this._getGetString(),s=0,a=e;s<a.length;s+=1){var u=a[s];if(u instanceof gr){for(var p=u.componentRecords(),g=0,T=p;g<T.length;g+=1){var M=T[g],X=M.flags();X&2?r+="./":X&4?r+="../":X&8?r+="/":(r+=M.content(o),X&1||(r+="/"))}if(!u.continueFlag())break}}return r.length>1&&r[r.length-1]==="/"?r.slice(0,r.length-1):r},"getSymlinkPath"),Vt.prototype.getFile=n(function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return this._fileOrDir===null&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},"getFile"),Vt.prototype.getDirectory=n(function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return this._fileOrDir===null&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},"getDirectory"),Vt.prototype.getSUEntries=n(function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},"getSUEntries"),Vt.prototype._rockRidgeFilename=n(function(t){var r=this.getSUEntries(t).filter(function(p){return p instanceof Di});if(r.length===0||r[0].flags()&6)return null;for(var e="",o=this._getGetString(),s=0,a=r;s<a.length;s+=1){var u=a[s];if(e+=u.name(o),!(u.flags()&1))break}return e},"_rockRidgeFilename"),Vt.prototype._constructSUEntries=n(function(t){var r=33+this._data[32];r%2===1&&r++,r+=this._rockRidgeOffset,this._suEntries=Ei(this._data,r,this.length(),t)},"_constructSUEntries"),Vt.prototype._getRockRidgeOffset=n(function(t){this._rockRidgeOffset=0;var r=this.getSUEntries(t);if(r.length>0){var e=r[0];if(e instanceof ki&&e.checkBytesPass())for(var o=1;o<r.length;o++){var s=r[o];if(s instanceof Ni||s instanceof Li&&s.extensionIdentifier()===Ws)return e.bytesSkipped()}}return this._rockRidgeOffset=-1,-1},"_getRockRidgeOffset");var xi=function(i){function t(r,e){i.call(this,r,e)}return n(t,"ISODirectoryRecord"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._getString=n(function(e,o){return we(this._data,e,o)},"_getString"),t.prototype._constructDirectory=n(function(e){return new Js(this,e)},"_constructDirectory"),t.prototype._getGetString=n(function(){return we},"_getGetString"),t}(Vt),bi=function(i){function t(r,e){i.call(this,r,e)}return n(t,"JolietDirectoryRecord"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._getString=n(function(e,o){return vr(this._data,e,o)},"_getString"),t.prototype._constructDirectory=n(function(e){return new Qs(this,e)},"_constructDirectory"),t.prototype._getGetString=n(function(){return vr},"_getGetString"),t}(Vt),ee=n(function(t){this._data=t},"SystemUseEntry");ee.prototype.signatureWord=n(function(){return this._data.readUInt16BE(0)},"signatureWord"),ee.prototype.signatureWordString=n(function(){return we(this._data,0,2)},"signatureWordString"),ee.prototype.length=n(function(){return this._data[2]},"length"),ee.prototype.suVersion=n(function(){return this._data[3]},"suVersion");var Ii=function(i){function t(r){i.call(this,r),this._entries=null}return n(t,"CEEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.continuationLba=n(function(){return this._data.readUInt32LE(4)},"continuationLba"),t.prototype.continuationLbaOffset=n(function(){return this._data.readUInt32LE(12)},"continuationLbaOffset"),t.prototype.continuationLength=n(function(){return this._data.readUInt32LE(20)},"continuationLength"),t.prototype.getEntries=n(function(e){if(!this._entries){var o=this.continuationLba()*2048+this.continuationLbaOffset();this._entries=Ei(e,o,this.continuationLength(),e)}return this._entries},"getEntries"),t}(ee),Xs=function(i){function t(r){i.call(this,r)}return n(t,"PDEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}(ee),ki=function(i){function t(r){i.call(this,r)}return n(t,"SPEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=n(function(){return this._data[4]===190&&this._data[5]===239},"checkBytesPass"),t.prototype.bytesSkipped=n(function(){return this._data[6]},"bytesSkipped"),t}(ee),Oi=function(i){function t(r){i.call(this,r)}return n(t,"STEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}(ee),Li=function(i){function t(r){i.call(this,r)}return n(t,"EREntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.identifierLength=n(function(){return this._data[4]},"identifierLength"),t.prototype.descriptorLength=n(function(){return this._data[5]},"descriptorLength"),t.prototype.sourceLength=n(function(){return this._data[6]},"sourceLength"),t.prototype.extensionVersion=n(function(){return this._data[7]},"extensionVersion"),t.prototype.extensionIdentifier=n(function(){return we(this._data,8,this.identifierLength())},"extensionIdentifier"),t.prototype.extensionDescriptor=n(function(){return we(this._data,8+this.identifierLength(),this.descriptorLength())},"extensionDescriptor"),t.prototype.extensionSource=n(function(){return we(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},"extensionSource"),t}(ee),Ys=function(i){function t(r){i.call(this,r)}return n(t,"ESEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=n(function(){return this._data[4]},"extensionSequence"),t}(ee),Ni=function(i){function t(r){i.call(this,r)}return n(t,"RREntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}(ee),Ri=function(i){function t(r){i.call(this,r)}return n(t,"PXEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.mode=n(function(){return this._data.readUInt32LE(4)},"mode"),t.prototype.fileLinks=n(function(){return this._data.readUInt32LE(12)},"fileLinks"),t.prototype.uid=n(function(){return this._data.readUInt32LE(20)},"uid"),t.prototype.gid=n(function(){return this._data.readUInt32LE(28)},"gid"),t.prototype.inode=n(function(){return this._data.readUInt32LE(36)},"inode"),t}(ee),Ks=function(i){function t(r){i.call(this,r)}return n(t,"PNEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.devTHigh=n(function(){return this._data.readUInt32LE(4)},"devTHigh"),t.prototype.devTLow=n(function(){return this._data.readUInt32LE(12)},"devTLow"),t}(ee),gr=function(i){function t(r){i.call(this,r)}return n(t,"SLEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=n(function(){return this._data[4]},"flags"),t.prototype.continueFlag=n(function(){return this.flags()&1},"continueFlag"),t.prototype.componentRecords=n(function(){for(var e=this,o=new Array,s=5;s<this.length();){var a=new On(e._data.slice(s));o.push(a),s+=a.length()}return o},"componentRecords"),t}(ee),On=n(function(t){this._data=t},"SLComponentRecord");On.prototype.flags=n(function(){return this._data[0]},"flags"),On.prototype.length=n(function(){return 2+this.componentLength()},"length"),On.prototype.componentLength=n(function(){return this._data[1]},"componentLength"),On.prototype.content=n(function(t){return t(this._data,2,this.componentLength())},"content");var Di=function(i){function t(r){i.call(this,r)}return n(t,"NMEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=n(function(){return this._data[4]},"flags"),t.prototype.name=n(function(e){return e(this._data,5,this.length()-5)},"name"),t}(ee),wr=function(i){function t(r){i.call(this,r)}return n(t,"CLEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=n(function(){return this._data.readUInt32LE(4)},"childDirectoryLba"),t}(ee),qs=function(i){function t(r){i.call(this,r)}return n(t,"PLEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=n(function(){return this._data.readUInt32LE(4)},"parentDirectoryLba"),t}(ee),Ti=function(i){function t(r){i.call(this,r)}return n(t,"REEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t}(ee),Ai=function(i){function t(r){i.call(this,r)}return n(t,"TFEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flags=n(function(){return this._data[4]},"flags"),t.prototype.creation=n(function(){return this.flags()&1?this._longFormDates()?Re(this._data,5):en(this._data,5):null},"creation"),t.prototype.modify=n(function(){if(this.flags()&2){var e=this.flags()&1?1:0;return this._longFormDates?Re(this._data,5+e*17):en(this._data,5+e*7)}else return null},"modify"),t.prototype.access=n(function(){if(this.flags()&4){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,this._longFormDates?Re(this._data,5+e*17):en(this._data,5+e*7)}else return null},"access"),t.prototype.backup=n(function(){if(this.flags()&16){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,this._longFormDates?Re(this._data,5+e*17):en(this._data,5+e*7)}else return null},"backup"),t.prototype.expiration=n(function(){if(this.flags()&32){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,this._longFormDates?Re(this._data,5+e*17):en(this._data,5+e*7)}else return null},"expiration"),t.prototype.effective=n(function(){if(this.flags()&64){var e=this.flags()&1?1:0;return e+=this.flags()&2?1:0,e+=this.flags()&4?1:0,e+=this.flags()&16?1:0,e+=this.flags()&32?1:0,this._longFormDates?Re(this._data,5+e*17):en(this._data,5+e*7)}else return null},"effective"),t.prototype._longFormDates=n(function(){return!!this.flags()},"_longFormDates"),t}(ee),Gs=function(i){function t(r){i.call(this,r)}return n(t,"SFEntry"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=n(function(){return this._data.readUInt32LE(4)},"virtualSizeHigh"),t.prototype.virtualSizeLow=n(function(){return this._data.readUInt32LE(12)},"virtualSizeLow"),t.prototype.tableDepth=n(function(){return this._data[20]},"tableDepth"),t}(ee),Ln=n(function(t,r){var e=this;this._fileList=[],this._fileMap={},this._record=t;var o=t.lba(),s=o+t.dataLength();if(!(t.fileFlags()&2)){var a=t.getSUEntries(r).filter(function(T){return T instanceof wr})[0];o=a.childDirectoryLba()*2048,s=1/0}for(;o<s;){var u=r[o];if(u===0){o++;continue}var p=e._constructDirectoryRecord(r.slice(o)),g=p.fileName(r);g!=="\0"&&g!==""?(!p.hasRockRidge()||p.getSUEntries(r).filter(function(T){return T instanceof Ti}).length===0)&&(e._fileMap[g]=p,e._fileList.push(g)):s===1/0&&(s=o+p.dataLength()),o+=p.length()}},"Directory");Ln.prototype.getRecord=n(function(t){return this._fileMap[t]},"getRecord"),Ln.prototype.getFileList=n(function(){return this._fileList},"getFileList"),Ln.prototype.getDotEntry=n(function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))},"getDotEntry");var Js=function(i){function t(r,e){i.call(this,r,e)}return n(t,"ISODirectory"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=n(function(e){return new xi(e,this._record.getRockRidgeOffset())},"_constructDirectoryRecord"),t}(Ln),Qs=function(i){function t(r,e){i.call(this,r,e)}return n(t,"JolietDirectory"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=n(function(e){return new bi(e,this._record.getRockRidgeOffset())},"_constructDirectoryRecord"),t}(Ln),Kn=function(i){function t(r,e,o){var s=this;e===void 0&&(e=""),o===void 0&&(o=!0),i.call(this),this._data=r,Ot(o,t.Name,{data:"ISO data as a Buffer",name:e});for(var a=!1,u=16*2048,p=new Array;!a;){var g=r.slice(u),T=new dn(g);switch(T.type()){case 1:p.push(new Vs(g));break;case 2:p.push(new Zs(g));break;case 255:a=!0;break}u+=2048}if(p.length===0)throw new c(f.EIO,"Unable to find a suitable volume descriptor.");p.forEach(function(M){(!s._pvd||s._pvd.type()!==2)&&(s._pvd=M)}),this._root=this._pvd.rootDirectoryEntry(r),this._name=e}return n(t,"IsoFS"),i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.Create=n(function(e,o){var s,a;try{s=new t(e.data,e.name,!1)}catch(u){u=u}finally{o(a,s)}},"Create"),t.isAvailable=n(function(){return!0},"isAvailable"),t.prototype.getName=n(function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},"getName"),t.prototype.diskSpace=n(function(e,o){o(this._data.length,0)},"diskSpace"),t.prototype.isReadOnly=n(function(){return!0},"isReadOnly"),t.prototype.supportsLinks=n(function(){return!1},"supportsLinks"),t.prototype.supportsProps=n(function(){return!1},"supportsProps"),t.prototype.supportsSynch=n(function(){return!0},"supportsSynch"),t.prototype.statSync=n(function(e,o){var s=this._getDirectoryRecord(e);if(s===null)throw c.ENOENT(e);return this._getStats(e,s)},"statSync"),t.prototype.openSync=n(function(e,o,s){if(o.isWriteable())throw new c(f.EPERM,e);var a=this._getDirectoryRecord(e);if(a){if(a.isSymlink(this._data))return this.openSync(d.resolve(e,a.getSymlinkPath(this._data)),o,s);if(a.isDirectory(this._data))throw c.EISDIR(e);var u=a.getFile(this._data),p=this._getStats(e,a);switch(o.pathExistsAction()){case D.THROW_EXCEPTION:case D.TRUNCATE_FILE:throw c.EEXIST(e);case D.NOP:return new le(this,e,o,p,u);default:throw new c(f.EINVAL,"Invalid FileMode object.")}}else throw c.ENOENT(e)},"openSync"),t.prototype.readdirSync=n(function(e){var o=this._getDirectoryRecord(e);if(o){if(o.isDirectory(this._data))return o.getDirectory(this._data).getFileList().slice(0);throw c.ENOTDIR(e)}else throw c.ENOENT(e)},"readdirSync"),t.prototype.readFileSync=n(function(e,o,s){var a=this.openSync(e,s,420);try{var u=a,p=u.getBuffer();return o===null?Rt(p):p.toString(o)}finally{a.closeSync()}},"readFileSync"),t.prototype._getDirectoryRecord=n(function(e){var o=this;if(e==="/")return this._root;for(var s=e.split("/").slice(1),a=this._root,u=0,p=s;u<p.length;u+=1){var g=p[u];if(a.isDirectory(o._data)){if(a=a.getDirectory(o._data).getRecord(g),!a)return null}else return null}return a},"_getDirectoryRecord"),t.prototype._getStats=n(function(e,o){if(o.isSymlink(this._data)){var s=d.resolve(e,o.getSymlinkPath(this._data)),a=this._getDirectoryRecord(s);return a?this._getStats(s,a):null}else{var u=o.dataLength(),p=365,g=o.recordingDate(),T=g,M=g,X=g;if(o.hasRockRidge())for(var tt=o.getSUEntries(this._data),it=0,lt=tt;it<lt.length;it+=1){var vt=lt[it];if(vt instanceof Ri)p=vt.mode();else if(vt instanceof Ai){var It=vt.flags();It&4&&(T=vt.access()),It&2&&(M=vt.modify()),It&1&&(X=vt.creation())}}return p=p&365,new j(o.isDirectory(this._data)?P.DIRECTORY:P.FILE,u,p,T,M,X)}},"_getStats"),t}(ie);Kn.Name="IsoFS",Kn.Options={data:{type:"object",description:"The ISO file in a buffer",validator:N}},[I,Mn,Pn,fn,Bn,un,_n,Kn,Fn,cn,In,Zn,Xn,tn].forEach(function(i){var t=i.Create;i.Create=function(r,e){var o=typeof r=="function",s=o?r:e,a=o?{}:r;function u(p){p?s(p):t.call(i,a,s)}n(u,"wrappedCb"),R(i,a,u)}});var qn={AsyncMirror:I,Dropbox:Mn,Emscripten:Pn,FolderAdapter:fn,HTML5FS:Bn,InMemory:un,IndexedDB:_n,IsoFS:Kn,LocalStorage:Fn,MountableFileSystem:cn,OverlayFS:In,WorkerFS:Zn,XmlHttpRequest:Xn,ZipFS:tn};k.initializeTTYs&&k.initializeTTYs();function $s(i){i.Buffer=m,i.process=k;var t=i.require?i.require:null;i.require=function(r){var e=Ci(r);return e||t.apply(null,Array.prototype.slice.call(arguments,0))}}n($s,"install");function ta(i,t){qn[i]=t}n(ta,"registerFileSystem");function Ci(i){switch(i){case"fs":return ct;case"path":return d;case"buffer":return F;case"process":return k;case"bfs_utils":return G;default:return qn[i]}}n(Ci,"BFSRequire");function Mi(i){return ct.initialize(i)}n(Mi,"initialize");function ea(i,t){mr(i,function(r,e){e?(Mi(e),t()):t(r)})}n(ea,"configure");function mr(i,t){var r=i.fs;if(!r)return t(new c(f.EPERM,'Missing "fs" property on configuration object.'));var e=i.options,o=0,s=!1;function a(){if(!s){s=!0;var g=qn[r];g?g.Create(e,t):t(new c(f.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(n(a,"finish"),e!==null&&typeof e=="object"){var u=!1,p=Object.keys(e).filter(function(g){return g!=="fs"});p.forEach(function(g){var T=e[g];T!==null&&typeof T=="object"&&T.fs&&(o++,mr(T,function(M,X){if(o--,M){if(s)return;s=!0,t(M)}else e[g]=X,o===0&&u&&a()}))}),u=!0}o===0&&a()}n(mr,"getFileSystem"),"ab".substr(-1)!=="b"&&(String.prototype.substr=function(i){return function(t,r){return t<0&&(t=this.length+t),i.call(this,t,r)}}(String.prototype.substr)),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(i,t){i===void 0&&(i=0),t===void 0&&(t=this.length);var r=this;return i<0&&(i=this.length+i,i<0&&(i=0)),t<0&&(t=this.length+t,t<0&&(t=0)),t<i&&(t=i),new Uint8Array(r.buffer,r.byteOffset+i,t-i)})),v.install=$s,v.registerFileSystem=ta,v.BFSRequire=Ci,v.initialize=Mi,v.configure=ea,v.getFileSystem=mr,v.EmscriptenFS=Ft,v.FileSystem=qn,v.Errors=A,v.setImmediate=dr}).call(v,y(1),function(){return this}(),y(5)(w),y(6))},function(w,v,y){w.exports=y(2).Buffer},function(w,v,y){(function(f){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/var b=y(3),E=y(4);v.Buffer=f,v.SlowBuffer=Z,v.INSPECT_MAX_BYTES=50;var k=2147483647;v.kMaxLength=k,f.TYPED_ARRAY_SUPPORT=F(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function F(){try{var I=new Uint8Array(1);return I.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},I.foo()===42}catch{return!1}}n(F,"typedArraySupport");function d(I){if(I>k)throw new RangeError("Invalid typed array length");var l=new Uint8Array(I);return l.__proto__=f.prototype,l}n(d,"createBuffer");function f(I,l,h){if(typeof I=="number"){if(typeof l=="string")throw new Error("If encoding is specified then the first argument must be a string");return D(I)}return x(I,l,h)}n(f,"Buffer"),typeof Symbol<"u"&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192;function x(I,l,h){if(typeof I=="number")throw new TypeError('"value" argument must not be a number');return fe(I)?j(I,l,h):typeof I=="string"?C(I,l):et(I)}n(x,"from"),f.from=function(I,l,h){return x(I,l,h)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array;function c(I){if(typeof I!="number")throw new TypeError('"size" argument must be a number');if(I<0)throw new RangeError('"size" argument must not be negative')}n(c,"assertSize");function A(I,l,h){return c(I),I<=0?d(I):l!==void 0?typeof h=="string"?d(I).fill(l,h):d(I).fill(l):d(I)}n(A,"alloc"),f.alloc=function(I,l,h){return A(I,l,h)};function D(I){return c(I),d(I<0?0:H(I)|0)}n(D,"allocUnsafe"),f.allocUnsafe=function(I){return D(I)},f.allocUnsafeSlow=function(I){return D(I)};function C(I,l){if((typeof l!="string"||l==="")&&(l="utf8"),!f.isEncoding(l))throw new TypeError('"encoding" must be a valid string encoding');var h=bt(I,l)|0,L=d(h),B=L.write(I,l);return B!==h&&(L=L.slice(0,B)),L}n(C,"fromString");function P(I){for(var l=I.length<0?0:H(I.length)|0,h=d(l),L=0;L<l;L+=1)h[L]=I[L]&255;return h}n(P,"fromArrayLike");function j(I,l,h){if(l<0||I.byteLength<l)throw new RangeError("'offset' is out of bounds");if(I.byteLength<l+(h||0))throw new RangeError("'length' is out of bounds");var L;return l===void 0&&h===void 0?L=new Uint8Array(I):h===void 0?L=new Uint8Array(I,l):L=new Uint8Array(I,l,h),L.__proto__=f.prototype,L}n(j,"fromArrayBuffer");function et(I){if(f.isBuffer(I)){var l=H(I.length)|0,h=d(l);return h.length===0||I.copy(h,0,0,l),h}if(I){if(le(I)||"length"in I)return typeof I.length!="number"||Ie(I.length)?d(0):P(I);if(I.type==="Buffer"&&Array.isArray(I.data))return P(I.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}n(et,"fromObject");function H(I){if(I>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return I|0}n(H,"checked");function Z(I){return+I!=I&&(I=0),f.alloc(+I)}n(Z,"SlowBuffer"),f.isBuffer=n(function(l){return l!=null&&l._isBuffer===!0},"isBuffer"),f.compare=n(function(l,h){if(!f.isBuffer(l)||!f.isBuffer(h))throw new TypeError("Arguments must be Buffers");if(l===h)return 0;for(var L=l.length,B=h.length,Y=0,J=Math.min(L,B);Y<J;++Y)if(l[Y]!==h[Y]){L=l[Y],B=h[Y];break}return L<B?-1:B<L?1:0},"compare"),f.isEncoding=n(function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),f.concat=n(function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return f.alloc(0);var L;if(h===void 0)for(h=0,L=0;L<l.length;++L)h+=l[L].length;var B=f.allocUnsafe(h),Y=0;for(L=0;L<l.length;++L){var J=l[L];if(!f.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(B,Y),Y+=J.length}return B},"concat");function bt(I,l){if(f.isBuffer(I))return I.length;if(le(I)||fe(I))return I.byteLength;typeof I!="string"&&(I=""+I);var h=I.length;if(h===0)return 0;for(var L=!1;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":case void 0:return dt(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return ie(I).length;default:if(L)return dt(I).length;l=(""+l).toLowerCase(),L=!0}}n(bt,"byteLength"),f.byteLength=bt;function nt(I,l,h){var L=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(I||(I="utf8");;)switch(I){case"hex":return kt(this,l,h);case"utf8":case"utf-8":return Jt(this,l,h);case"ascii":return Q(this,l,h);case"latin1":case"binary":return ht(this,l,h);case"base64":return _t(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,l,h);default:if(L)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),L=!0}}n(nt,"slowToString"),f.prototype._isBuffer=!0;function xt(I,l,h){var L=I[l];I[l]=I[h],I[h]=L}n(xt,"swap"),f.prototype.swap16=n(function(){var l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<l;h+=2)xt(this,h,h+1);return this},"swap16"),f.prototype.swap32=n(function(){var l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<l;h+=4)xt(this,h,h+3),xt(this,h+1,h+2);return this},"swap32"),f.prototype.swap64=n(function(){var l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<l;h+=8)xt(this,h,h+7),xt(this,h+1,h+6),xt(this,h+2,h+5),xt(this,h+3,h+4);return this},"swap64"),f.prototype.toString=n(function(){var l=this.length;return l===0?"":arguments.length===0?Jt(this,0,l):nt.apply(this,arguments)},"toString"),f.prototype.equals=n(function(l){if(!f.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:f.compare(this,l)===0},"equals"),f.prototype.inspect=n(function(){var l="",h=v.INSPECT_MAX_BYTES;return this.length>0&&(l=this.toString("hex",0,h).match(/.{2}/g).join(" "),this.length>h&&(l+=" ... ")),"<Buffer "+l+">"},"inspect"),f.prototype.compare=n(function(l,h,L,B,Y){if(!f.isBuffer(l))throw new TypeError("Argument must be a Buffer");if(h===void 0&&(h=0),L===void 0&&(L=l?l.length:0),B===void 0&&(B=0),Y===void 0&&(Y=this.length),h<0||L>l.length||B<0||Y>this.length)throw new RangeError("out of range index");if(B>=Y&&h>=L)return 0;if(B>=Y)return-1;if(h>=L)return 1;if(h>>>=0,L>>>=0,B>>>=0,Y>>>=0,this===l)return 0;for(var J=Y-B,Lt=L-h,At=Math.min(J,Lt),jt=this.slice(B,Y),Qt=l.slice(h,L),Mt=0;Mt<At;++Mt)if(jt[Mt]!==Qt[Mt]){J=jt[Mt],Lt=Qt[Mt];break}return J<Lt?-1:Lt<J?1:0},"compare");function yt(I,l,h,L,B){if(I.length===0)return-1;if(typeof h=="string"?(L=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ie(h)&&(h=B?0:I.length-1),h<0&&(h=I.length+h),h>=I.length){if(B)return-1;h=I.length-1}else if(h<0)if(B)h=0;else return-1;if(typeof l=="string"&&(l=f.from(l,L)),f.isBuffer(l))return l.length===0?-1:z(I,l,h,L,B);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(I,l,h):Uint8Array.prototype.lastIndexOf.call(I,l,h):z(I,[l],h,L,B);throw new TypeError("val must be string, number or Buffer")}n(yt,"bidirectionalIndexOf");function z(I,l,h,L,B){var Y=1,J=I.length,Lt=l.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(I.length<2||l.length<2)return-1;Y=2,J/=2,Lt/=2,h/=2}function At(on,Ze){return Y===1?on[Ze]:on.readUInt16BE(Ze*Y)}n(At,"read");var jt;if(B){var Qt=-1;for(jt=h;jt<J;jt++)if(At(I,jt)===At(l,Qt===-1?0:jt-Qt)){if(Qt===-1&&(Qt=jt),jt-Qt+1===Lt)return Qt*Y}else Qt!==-1&&(jt-=jt-Qt),Qt=-1}else for(h+Lt>J&&(h=J-Lt),jt=h;jt>=0;jt--){for(var Mt=!0,ke=0;ke<Lt;ke++)if(At(I,jt+ke)!==At(l,ke)){Mt=!1;break}if(Mt)return jt}return-1}n(z,"arrayIndexOf"),f.prototype.includes=n(function(l,h,L){return this.indexOf(l,h,L)!==-1},"includes"),f.prototype.indexOf=n(function(l,h,L){return yt(this,l,h,L,!0)},"indexOf"),f.prototype.lastIndexOf=n(function(l,h,L){return yt(this,l,h,L,!1)},"lastIndexOf");function rt(I,l,h,L){h=Number(h)||0;var B=I.length-h;L?(L=Number(L),L>B&&(L=B)):L=B;var Y=l.length;if(Y%2!==0)throw new TypeError("Invalid hex string");L>Y/2&&(L=Y/2);for(var J=0;J<L;++J){var Lt=parseInt(l.substr(J*2,2),16);if(Ie(Lt))return J;I[h+J]=Lt}return J}n(rt,"hexWrite");function ct(I,l,h,L){return wt(dt(l,I.length-h),I,h,L)}n(ct,"utf8Write");function Nt(I,l,h,L){return wt(Ft(l),I,h,L)}n(Nt,"asciiWrite");function gt(I,l,h,L){return Nt(I,l,h,L)}n(gt,"latin1Write");function Ct(I,l,h,L){return wt(ie(l),I,h,L)}n(Ct,"base64Write");function Ot(I,l,h,L){return wt($(l,I.length-h),I,h,L)}n(Ot,"ucs2Write"),f.prototype.write=n(function(l,h,L,B){if(h===void 0)B="utf8",L=this.length,h=0;else if(L===void 0&&typeof h=="string")B=h,L=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(L)?(L=L>>>0,B===void 0&&(B="utf8")):(B=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Y=this.length-h;if((L===void 0||L>Y)&&(L=Y),l.length>0&&(L<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");for(var J=!1;;)switch(B){case"hex":return rt(this,l,h,L);case"utf8":case"utf-8":return ct(this,l,h,L);case"ascii":return Nt(this,l,h,L);case"latin1":case"binary":return gt(this,l,h,L);case"base64":return Ct(this,l,h,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,l,h,L);default:if(J)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),J=!0}},"write"),f.prototype.toJSON=n(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function _t(I,l,h){return l===0&&h===I.length?b.fromByteArray(I):b.fromByteArray(I.slice(l,h))}n(_t,"base64Slice");function Jt(I,l,h){h=Math.min(I.length,h);for(var L=[],B=l;B<h;){var Y=I[B],J=null,Lt=Y>239?4:Y>223?3:Y>191?2:1;if(B+Lt<=h){var At,jt,Qt,Mt;switch(Lt){case 1:Y<128&&(J=Y);break;case 2:At=I[B+1],(At&192)===128&&(Mt=(Y&31)<<6|At&63,Mt>127&&(J=Mt));break;case 3:At=I[B+1],jt=I[B+2],(At&192)===128&&(jt&192)===128&&(Mt=(Y&15)<<12|(At&63)<<6|jt&63,Mt>2047&&(Mt<55296||Mt>57343)&&(J=Mt));break;case 4:At=I[B+1],jt=I[B+2],Qt=I[B+3],(At&192)===128&&(jt&192)===128&&(Qt&192)===128&&(Mt=(Y&15)<<18|(At&63)<<12|(jt&63)<<6|Qt&63,Mt>65535&&Mt<1114112&&(J=Mt))}}J===null?(J=65533,Lt=1):J>65535&&(J-=65536,L.push(J>>>10&1023|55296),J=56320|J&1023),L.push(J),B+=Lt}return U(L)}n(Jt,"utf8Slice");var W=4096;function U(I){var l=I.length;if(l<=W)return String.fromCharCode.apply(String,I);for(var h="",L=0;L<l;)h+=String.fromCharCode.apply(String,I.slice(L,L+=W));return h}n(U,"decodeCodePointsArray");function Q(I,l,h){var L="";h=Math.min(I.length,h);for(var B=l;B<h;++B)L+=String.fromCharCode(I[B]&127);return L}n(Q,"asciiSlice");function ht(I,l,h){var L="";h=Math.min(I.length,h);for(var B=l;B<h;++B)L+=String.fromCharCode(I[B]);return L}n(ht,"latin1Slice");function kt(I,l,h){var L=I.length;(!l||l<0)&&(l=0),(!h||h<0||h>L)&&(h=L);for(var B="",Y=l;Y<h;++Y)B+=ot(I[Y]);return B}n(kt,"hexSlice");function mt(I,l,h){for(var L=I.slice(l,h),B="",Y=0;Y<L.length;Y+=2)B+=String.fromCharCode(L[Y]+L[Y+1]*256);return B}n(mt,"utf16leSlice"),f.prototype.slice=n(function(l,h){var L=this.length;l=~~l,h=h===void 0?L:~~h,l<0?(l+=L,l<0&&(l=0)):l>L&&(l=L),h<0?(h+=L,h<0&&(h=0)):h>L&&(h=L),h<l&&(h=l);var B=this.subarray(l,h);return B.__proto__=f.prototype,B},"slice");function Et(I,l,h){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+l>h)throw new RangeError("Trying to access beyond buffer length")}n(Et,"checkOffset"),f.prototype.readUIntLE=n(function(l,h,L){l=l>>>0,h=h>>>0,L||Et(l,h,this.length);for(var B=this[l],Y=1,J=0;++J<h&&(Y*=256);)B+=this[l+J]*Y;return B},"readUIntLE"),f.prototype.readUIntBE=n(function(l,h,L){l=l>>>0,h=h>>>0,L||Et(l,h,this.length);for(var B=this[l+--h],Y=1;h>0&&(Y*=256);)B+=this[l+--h]*Y;return B},"readUIntBE"),f.prototype.readUInt8=n(function(l,h){return l=l>>>0,h||Et(l,1,this.length),this[l]},"readUInt8"),f.prototype.readUInt16LE=n(function(l,h){return l=l>>>0,h||Et(l,2,this.length),this[l]|this[l+1]<<8},"readUInt16LE"),f.prototype.readUInt16BE=n(function(l,h){return l=l>>>0,h||Et(l,2,this.length),this[l]<<8|this[l+1]},"readUInt16BE"),f.prototype.readUInt32LE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},"readUInt32LE"),f.prototype.readUInt32BE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},"readUInt32BE"),f.prototype.readIntLE=n(function(l,h,L){l=l>>>0,h=h>>>0,L||Et(l,h,this.length);for(var B=this[l],Y=1,J=0;++J<h&&(Y*=256);)B+=this[l+J]*Y;return Y*=128,B>=Y&&(B-=Math.pow(2,8*h)),B},"readIntLE"),f.prototype.readIntBE=n(function(l,h,L){l=l>>>0,h=h>>>0,L||Et(l,h,this.length);for(var B=h,Y=1,J=this[l+--B];B>0&&(Y*=256);)J+=this[l+--B]*Y;return Y*=128,J>=Y&&(J-=Math.pow(2,8*h)),J},"readIntBE"),f.prototype.readInt8=n(function(l,h){return l=l>>>0,h||Et(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},"readInt8"),f.prototype.readInt16LE=n(function(l,h){l=l>>>0,h||Et(l,2,this.length);var L=this[l]|this[l+1]<<8;return L&32768?L|4294901760:L},"readInt16LE"),f.prototype.readInt16BE=n(function(l,h){l=l>>>0,h||Et(l,2,this.length);var L=this[l+1]|this[l]<<8;return L&32768?L|4294901760:L},"readInt16BE"),f.prototype.readInt32LE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},"readInt32LE"),f.prototype.readInt32BE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},"readInt32BE"),f.prototype.readFloatLE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),E.read(this,l,!0,23,4)},"readFloatLE"),f.prototype.readFloatBE=n(function(l,h){return l=l>>>0,h||Et(l,4,this.length),E.read(this,l,!1,23,4)},"readFloatBE"),f.prototype.readDoubleLE=n(function(l,h){return l=l>>>0,h||Et(l,8,this.length),E.read(this,l,!0,52,8)},"readDoubleLE"),f.prototype.readDoubleBE=n(function(l,h){return l=l>>>0,h||Et(l,8,this.length),E.read(this,l,!1,52,8)},"readDoubleBE");function Rt(I,l,h,L,B,Y){if(!f.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>B||l<Y)throw new RangeError('"value" argument is out of bounds');if(h+L>I.length)throw new RangeError("Index out of range")}n(Rt,"checkInt"),f.prototype.writeUIntLE=n(function(l,h,L,B){if(l=+l,h=h>>>0,L=L>>>0,!B){var Y=Math.pow(2,8*L)-1;Rt(this,l,h,L,Y,0)}var J=1,Lt=0;for(this[h]=l&255;++Lt<L&&(J*=256);)this[h+Lt]=l/J&255;return h+L},"writeUIntLE"),f.prototype.writeUIntBE=n(function(l,h,L,B){if(l=+l,h=h>>>0,L=L>>>0,!B){var Y=Math.pow(2,8*L)-1;Rt(this,l,h,L,Y,0)}var J=L-1,Lt=1;for(this[h+J]=l&255;--J>=0&&(Lt*=256);)this[h+J]=l/Lt&255;return h+L},"writeUIntBE"),f.prototype.writeUInt8=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,1,255,0),this[h]=l&255,h+1},"writeUInt8"),f.prototype.writeUInt16LE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},"writeUInt16LE"),f.prototype.writeUInt16BE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},"writeUInt16BE"),f.prototype.writeUInt32LE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},"writeUInt32LE"),f.prototype.writeUInt32BE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},"writeUInt32BE"),f.prototype.writeIntLE=n(function(l,h,L,B){if(l=+l,h=h>>>0,!B){var Y=Math.pow(2,8*L-1);Rt(this,l,h,L,Y-1,-Y)}var J=0,Lt=1,At=0;for(this[h]=l&255;++J<L&&(Lt*=256);)l<0&&At===0&&this[h+J-1]!==0&&(At=1),this[h+J]=(l/Lt>>0)-At&255;return h+L},"writeIntLE"),f.prototype.writeIntBE=n(function(l,h,L,B){if(l=+l,h=h>>>0,!B){var Y=Math.pow(2,8*L-1);Rt(this,l,h,L,Y-1,-Y)}var J=L-1,Lt=1,At=0;for(this[h+J]=l&255;--J>=0&&(Lt*=256);)l<0&&At===0&&this[h+J+1]!==0&&(At=1),this[h+J]=(l/Lt>>0)-At&255;return h+L},"writeIntBE"),f.prototype.writeInt8=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},"writeInt8"),f.prototype.writeInt16LE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},"writeInt16LE"),f.prototype.writeInt16BE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},"writeInt16BE"),f.prototype.writeInt32LE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},"writeInt32LE"),f.prototype.writeInt32BE=n(function(l,h,L){return l=+l,h=h>>>0,L||Rt(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},"writeInt32BE");function Zt(I,l,h,L,B,Y){if(h+L>I.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}n(Zt,"checkIEEE754");function Pt(I,l,h,L,B){return l=+l,h=h>>>0,B||Zt(I,l,h,4),E.write(I,l,h,L,23,4),h+4}n(Pt,"writeFloat"),f.prototype.writeFloatLE=n(function(l,h,L){return Pt(this,l,h,!0,L)},"writeFloatLE"),f.prototype.writeFloatBE=n(function(l,h,L){return Pt(this,l,h,!1,L)},"writeFloatBE");function N(I,l,h,L,B){return l=+l,h=h>>>0,B||Zt(I,l,h,8),E.write(I,l,h,L,52,8),h+8}n(N,"writeDouble"),f.prototype.writeDoubleLE=n(function(l,h,L){return N(this,l,h,!0,L)},"writeDoubleLE"),f.prototype.writeDoubleBE=n(function(l,h,L){return N(this,l,h,!1,L)},"writeDoubleBE"),f.prototype.copy=n(function(l,h,L,B){if(L||(L=0),!B&&B!==0&&(B=this.length),h>=l.length&&(h=l.length),h||(h=0),B>0&&B<L&&(B=L),B===L||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("sourceStart out of bounds");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),l.length-h<B-L&&(B=l.length-h+L);var Y=B-L,J;if(this===l&&L<h&&h<B)for(J=Y-1;J>=0;--J)l[J+h]=this[J+L];else if(Y<1e3)for(J=0;J<Y;++J)l[J+h]=this[J+L];else Uint8Array.prototype.set.call(l,this.subarray(L,L+Y),h);return Y},"copy"),f.prototype.fill=n(function(l,h,L,B){if(typeof l=="string"){if(typeof h=="string"?(B=h,h=0,L=this.length):typeof L=="string"&&(B=L,L=this.length),l.length===1){var Y=l.charCodeAt(0);Y<256&&(l=Y)}if(B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!f.isEncoding(B))throw new TypeError("Unknown encoding: "+B)}else typeof l=="number"&&(l=l&255);if(h<0||this.length<h||this.length<L)throw new RangeError("Out of range index");if(L<=h)return this;h=h>>>0,L=L===void 0?this.length:L>>>0,l||(l=0);var J;if(typeof l=="number")for(J=h;J<L;++J)this[J]=l;else{var Lt=f.isBuffer(l)?l:new f(l,B),At=Lt.length;for(J=0;J<L-h;++J)this[J+h]=Lt[J%At]}return this},"fill");var R=/[^+/0-9A-Za-z-_]/g;function G(I){if(I=I.trim().replace(R,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}n(G,"base64clean");function ot(I){return I<16?"0"+I.toString(16):I.toString(16)}n(ot,"toHex");function dt(I,l){l=l||1/0;for(var h,L=I.length,B=null,Y=[],J=0;J<L;++J){if(h=I.charCodeAt(J),h>55295&&h<57344){if(!B){if(h>56319){(l-=3)>-1&&Y.push(239,191,189);continue}else if(J+1===L){(l-=3)>-1&&Y.push(239,191,189);continue}B=h;continue}if(h<56320){(l-=3)>-1&&Y.push(239,191,189),B=h;continue}h=(B-55296<<10|h-56320)+65536}else B&&(l-=3)>-1&&Y.push(239,191,189);if(B=null,h<128){if((l-=1)<0)break;Y.push(h)}else if(h<2048){if((l-=2)<0)break;Y.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;Y.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;Y.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return Y}n(dt,"utf8ToBytes");function Ft(I){for(var l=[],h=0;h<I.length;++h)l.push(I.charCodeAt(h)&255);return l}n(Ft,"asciiToBytes");function $(I,l){for(var h,L,B,Y=[],J=0;J<I.length&&!((l-=2)<0);++J)h=I.charCodeAt(J),L=h>>8,B=h%256,Y.push(B),Y.push(L);return Y}n($,"utf16leToBytes");function ie(I){return b.toByteArray(G(I))}n(ie,"base64ToBytes");function wt(I,l,h,L){for(var B=0;B<L&&!(B+h>=l.length||B>=I.length);++B)l[B+h]=I[B];return B}n(wt,"blitBuffer");function fe(I){return I instanceof ArrayBuffer||I!=null&&I.constructor!=null&&I.constructor.name==="ArrayBuffer"&&typeof I.byteLength=="number"}n(fe,"isArrayBuffer");function le(I){return typeof ArrayBuffer.isView=="function"&&ArrayBuffer.isView(I)}n(le,"isArrayBufferView");function Ie(I){return I!==I}n(Ie,"numberIsNaN")}).call(v,y(1))},function(w,v){v.byteLength=f,v.toByteArray=x,v.fromByteArray=D;for(var y=[],m=[],b=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,F=E.length;k<F;++k)y[k]=E[k],m[E.charCodeAt(k)]=k;m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63;function d(C){var P=C.length;if(P%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return C[P-2]==="="?2:C[P-1]==="="?1:0}n(d,"placeHoldersCount");function f(C){return C.length*3/4-d(C)}n(f,"byteLength");function x(C){var P,j,et,H,Z,bt,nt=C.length;Z=d(C),bt=new b(nt*3/4-Z),et=Z>0?nt-4:nt;var xt=0;for(P=0,j=0;P<et;P+=4,j+=3)H=m[C.charCodeAt(P)]<<18|m[C.charCodeAt(P+1)]<<12|m[C.charCodeAt(P+2)]<<6|m[C.charCodeAt(P+3)],bt[xt++]=H>>16&255,bt[xt++]=H>>8&255,bt[xt++]=H&255;return Z===2?(H=m[C.charCodeAt(P)]<<2|m[C.charCodeAt(P+1)]>>4,bt[xt++]=H&255):Z===1&&(H=m[C.charCodeAt(P)]<<10|m[C.charCodeAt(P+1)]<<4|m[C.charCodeAt(P+2)]>>2,bt[xt++]=H>>8&255,bt[xt++]=H&255),bt}n(x,"toByteArray");function c(C){return y[C>>18&63]+y[C>>12&63]+y[C>>6&63]+y[C&63]}n(c,"tripletToBase64");function A(C,P,j){for(var et,H=[],Z=P;Z<j;Z+=3)et=(C[Z]<<16)+(C[Z+1]<<8)+C[Z+2],H.push(c(et));return H.join("")}n(A,"encodeChunk");function D(C){for(var P,j=C.length,et=j%3,H="",Z=[],bt=16383,nt=0,xt=j-et;nt<xt;nt+=bt)Z.push(A(C,nt,nt+bt>xt?xt:nt+bt));return et===1?(P=C[j-1],H+=y[P>>2],H+=y[P<<4&63],H+="=="):et===2&&(P=(C[j-2]<<8)+C[j-1],H+=y[P>>10],H+=y[P>>4&63],H+=y[P<<2&63],H+="="),Z.push(H),Z.join("")}n(D,"fromByteArray")},function(w,v){v.read=function(y,m,b,E,k){var F,d,f=k*8-E-1,x=(1<<f)-1,c=x>>1,A=-7,D=b?k-1:0,C=b?-1:1,P=y[m+D];for(D+=C,F=P&(1<<-A)-1,P>>=-A,A+=f;A>0;F=F*256+y[m+D],D+=C,A-=8);for(d=F&(1<<-A)-1,F>>=-A,A+=E;A>0;d=d*256+y[m+D],D+=C,A-=8);if(F===0)F=1-c;else{if(F===x)return d?NaN:(P?-1:1)*(1/0);d=d+Math.pow(2,E),F=F-c}return(P?-1:1)*d*Math.pow(2,F-E)},v.write=function(y,m,b,E,k,F){var d,f,x,c=F*8-k-1,A=(1<<c)-1,D=A>>1,C=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=E?0:F-1,j=E?1:-1,et=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(f=isNaN(m)?1:0,d=A):(d=Math.floor(Math.log(m)/Math.LN2),m*(x=Math.pow(2,-d))<1&&(d--,x*=2),d+D>=1?m+=C/x:m+=C*Math.pow(2,1-D),m*x>=2&&(d++,x/=2),d+D>=A?(f=0,d=A):d+D>=1?(f=(m*x-1)*Math.pow(2,k),d=d+D):(f=m*Math.pow(2,D-1)*Math.pow(2,k),d=0));k>=8;y[b+P]=f&255,P+=j,f/=256,k-=8);for(d=d<<k|f,c+=k;c>0;y[b+P]=d&255,P+=j,d/=256,c-=8);y[b+P-j]|=et*128}},function(w,v){w.exports=function(y){return y.webpackPolyfill||(y.deprecate=function(){},y.paths=[],y.children=[],y.webpackPolyfill=1),y}},function(w,v,y){var m=y(7),b=new m,E={};function k(d){E[d]||(typeof b[d]=="function"?E[d]=function(){return b[d].apply(b,arguments)}:E[d]=b[d])}n(k,"defineKey");for(var F in b)k(F);E.initializeTTYs=function(){b.stdin===null&&(b.initializeTTYs(),E.stdin=b.stdin,E.stdout=b.stdout,E.stderr=b.stderr)},b.nextTick(function(){E.initializeTTYs()}),w.exports=E},function(w,v,y){(function(m){var b=this&&this.__extends||function(x,c){for(var A in c)c.hasOwnProperty(A)&&(x[A]=c[A]);function D(){this.constructor=x}n(D,"__"),x.prototype=c===null?Object.create(c):(D.prototype=c.prototype,new D)},E=y(8),k=null,F=function(){function x(c,A){this.fun=c,this.array=A}return n(x,"Item"),x.prototype.run=function(){this.fun.apply(null,this.array)},x}(),d=function(){function x(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return n(x,"NextTickQueue"),x.prototype.push=function(c){var A=this;this._queue.push(c)===1&&!this._draining&&setTimeout(function(){return A._drainQueue()},0)},x.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},x.prototype._drainQueue=function(){var c=this;if(!this._draining){var A=setTimeout(function(){return c._cleanUpNextTick()});this._draining=!0;for(var D=this._queue.length;D;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<D;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,D=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(A)}},x}(),f=function(x){b(c,x);function c(){x.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new d,this.execPath=m,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=Math.random()*1e3|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return n(c,"Process"),c.prototype.chdir=function(A){k===null&&(k=y(9)),this._cwd=k.resolve(A)},c.prototype.cwd=function(){return this._cwd},c.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},c.prototype.nextTick=function(A){for(var D=[],C=1;C<arguments.length;C++)D[C-1]=arguments[C];this._queue.push(new F(A,D))},c.prototype.abort=function(){this.emit("abort")},c.prototype.exit=function(A){this.exitCode=A,this.emit("exit",[A])},c.prototype.getgid=function(){return this._gid},c.prototype.setgid=function(A){typeof A=="number"?this._gid=A:this._gid=1},c.prototype.getuid=function(){return this._uid},c.prototype.setuid=function(A){typeof A=="number"?this._uid=A:this._uid=1},c.prototype.kill=function(A,D){this.emit("kill",[A,D])},c.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},c.prototype.umask=function(A){A===void 0&&(A=this._mask);var D=this._mask;return this._mask=A,this.emit("umask",[A]),D},c.prototype.hrtime=function(){var A;typeof performance<"u"?A=performance.now():Date.now?A=Date.now():A=new Date().getTime();var D=A/1e3|0;return A-=D*1e3,A=A*1e6|0,[D,A]},c.prototype.initializeTTYs=function(){if(this.stdout===null){var A=y(10);this.stdout=new A,this.stderr=new A,this.stdin=new A}},c.prototype.disconnect=function(){},c}(E.EventEmitter);w.exports=f}).call(v,"/")},function(w,v){function y(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}n(y,"EventEmitter"),w.exports=y,y.EventEmitter=y,y.prototype._events=void 0,y.prototype._maxListeners=void 0,y.defaultMaxListeners=10,y.prototype.setMaxListeners=function(F){if(!b(F)||F<0||isNaN(F))throw TypeError("n must be a positive number");return this._maxListeners=F,this},y.prototype.emit=function(F){var d,f,x,c,A,D;if(this._events||(this._events={}),F==="error"&&(!this._events.error||E(this._events.error)&&!this._events.error.length)){if(d=arguments[1],d instanceof Error)throw d;var C=new Error('Uncaught, unspecified "error" event. ('+d+")");throw C.context=d,C}if(f=this._events[F],k(f))return!1;if(m(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),f.apply(this,c)}else if(E(f))for(c=Array.prototype.slice.call(arguments,1),D=f.slice(),x=D.length,A=0;A<x;A++)D[A].apply(this,c);return!0},y.prototype.addListener=function(F,d){var f;if(!m(d))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",F,m(d.listener)?d.listener:d),this._events[F]?E(this._events[F])?this._events[F].push(d):this._events[F]=[this._events[F],d]:this._events[F]=d,E(this._events[F])&&!this._events[F].warned&&(k(this._maxListeners)?f=y.defaultMaxListeners:f=this._maxListeners,f&&f>0&&this._events[F].length>f&&(this._events[F].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[F].length),typeof console.trace=="function"&&console.trace())),this},y.prototype.on=y.prototype.addListener,y.prototype.once=function(F,d){if(!m(d))throw TypeError("listener must be a function");var f=!1;function x(){this.removeListener(F,x),f||(f=!0,d.apply(this,arguments))}return n(x,"g"),x.listener=d,this.on(F,x),this},y.prototype.removeListener=function(F,d){var f,x,c,A;if(!m(d))throw TypeError("listener must be a function");if(!this._events||!this._events[F])return this;if(f=this._events[F],c=f.length,x=-1,f===d||m(f.listener)&&f.listener===d)delete this._events[F],this._events.removeListener&&this.emit("removeListener",F,d);else if(E(f)){for(A=c;A-- >0;)if(f[A]===d||f[A].listener&&f[A].listener===d){x=A;break}if(x<0)return this;f.length===1?(f.length=0,delete this._events[F]):f.splice(x,1),this._events.removeListener&&this.emit("removeListener",F,d)}return this},y.prototype.removeAllListeners=function(F){var d,f;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[F]&&delete this._events[F],this;if(arguments.length===0){for(d in this._events)d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events={},this}if(f=this._events[F],m(f))this.removeListener(F,f);else if(f)for(;f.length;)this.removeListener(F,f[f.length-1]);return delete this._events[F],this},y.prototype.listeners=function(F){var d;return!this._events||!this._events[F]?d=[]:m(this._events[F])?d=[this._events[F]]:d=this._events[F].slice(),d},y.prototype.listenerCount=function(F){if(this._events){var d=this._events[F];if(m(d))return 1;if(d)return d.length}return 0},y.listenerCount=function(F,d){return F.listenerCount(d)};function m(F){return typeof F=="function"}n(m,"isFunction");function b(F){return typeof F=="number"}n(b,"isNumber");function E(F){return typeof F=="object"&&F!==null}n(E,"isObject");function k(F){return F===void 0}n(k,"isUndefined")},function(w,v,y){(function(m){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function E(F){var d=b.exec(F);return d.shift(),d}n(E,"posixSplitPath");var k=function(){function F(){}return n(F,"path"),F.normalize=function(d){d===""&&(d=".");var f=d.charAt(0)===F.sep;d=F._removeDuplicateSeps(d);for(var x=d.split(F.sep),c=[],A=0;A<x.length;A++){var D=x[A];D!=="."&&(D===".."&&(f||!f&&c.length>0&&c[0]!=="..")?c.pop():c.push(D))}if(!f&&c.length<2)switch(c.length){case 1:c[0]===""&&c.unshift(".");break;default:c.push(".")}return d=c.join(F.sep),f&&d.charAt(0)!==F.sep&&(d=F.sep+d),d},F.join=function(){for(var d=[],f=0;f<arguments.length;f++)d[f-0]=arguments[f];for(var x=[],c=0;c<d.length;c++){var A=d[c];if(typeof A!="string")throw new TypeError("Invalid argument type to path.join: "+typeof A);A!==""&&x.push(A)}return F.normalize(x.join(F.sep))},F.resolve=function(){for(var d=[],f=0;f<arguments.length;f++)d[f-0]=arguments[f];for(var x=[],c=0;c<d.length;c++){var A=d[c];if(typeof A!="string")throw new TypeError("Invalid argument type to path.join: "+typeof A);A!==""&&(A.charAt(0)===F.sep&&(x=[]),x.push(A))}var D=F.normalize(x.join(F.sep));if(D.length>1&&D.charAt(D.length-1)===F.sep)return D.substr(0,D.length-1);if(D.charAt(0)!==F.sep){D.charAt(0)==="."&&(D.length===1||D.charAt(1)===F.sep)&&(D=D.length===1?"":D.substr(2));var C=m.cwd();D!==""?D=this.normalize(C+(C!=="/"?F.sep:"")+D):D=C}return D},F.relative=function(d,f){var x;d=F.resolve(d),f=F.resolve(f);var c=d.split(F.sep),A=f.split(F.sep);A.shift(),c.shift();var D=0,C=[];for(x=0;x<c.length;x++){var P=c[x];if(P!==A[x]){D=c.length-x;break}}C=A.slice(x),c.length===1&&c[0]===""&&(D=0),D>c.length&&(D=c.length);var j="";for(x=0;x<D;x++)j+="../";return j+=C.join(F.sep),j.length>1&&j.charAt(j.length-1)===F.sep&&(j=j.substr(0,j.length-1)),j},F.dirname=function(d){d=F._removeDuplicateSeps(d);var f=d.charAt(0)===F.sep,x=d.split(F.sep);return x.pop()===""&&x.length>0&&x.pop(),x.length>1||x.length===1&&!f?x.join(F.sep):f?F.sep:"."},F.basename=function(d,f){if(f===void 0&&(f=""),d==="")return d;d=F.normalize(d);var x=d.split(F.sep),c=x[x.length-1];if(c===""&&x.length>1)return x[x.length-2];if(f.length>0){var A=c.substr(c.length-f.length);if(A===f)return c.substr(0,c.length-f.length)}return c},F.extname=function(d){d=F.normalize(d);var f=d.split(F.sep);if(d=f.pop(),d===""&&f.length>0&&(d=f.pop()),d==="..")return"";var x=d.lastIndexOf(".");return x===-1||x===0?"":d.substr(x)},F.isAbsolute=function(d){return d.length>0&&d.charAt(0)===F.sep},F._makeLong=function(d){return d},F.parse=function(d){var f=E(d);return{root:f[0],dir:f[0]+f[1].slice(0,-1),base:f[2],ext:f[3],name:f[2].slice(0,f[2].length-f[3].length)}},F.format=function(d){if(d===null||typeof d!="object")throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof d);var f=d.root||"";if(typeof f!="string")throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof d.root);var x=d.dir?d.dir+F.sep:"",c=d.base||"";return x+c},F._removeDuplicateSeps=function(d){return d=d.replace(this._replaceRegex,this.sep),d},F.sep="/",F._replaceRegex=new RegExp("//+","g"),F.delimiter=":",F.posix=F,F.win32=F,F}();w.exports=k}).call(v,y(6))},function(w,v,y){(function(m){var b=this&&this.__extends||function(F,d){for(var f in d)d.hasOwnProperty(f)&&(F[f]=d[f]);function x(){this.constructor=F}n(x,"__"),F.prototype=d===null?Object.create(d):(x.prototype=d.prototype,new x)},E=y(11),k=function(F){b(d,F);function d(){F.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return n(d,"TTY"),d.prototype.setRawMode=function(f){this.isRaw!==f&&(this.isRaw=f,this.emit("modeChange"))},d.prototype.changeColumns=function(f){f!==this.columns&&(this.columns=f,this.emit("resize"))},d.prototype.changeRows=function(f){f!==this.rows&&(this.rows=f,this.emit("resize"))},d.isatty=function(f){return f&&f instanceof d},d.prototype._write=function(f,x,c){var A;try{var D;typeof f=="string"?D=new m(f,x):D=f,this._bufferedWrites.push(D),this._waitingForWrites&&this._read(1024)}catch(C){A=C}finally{c(A)}},d.prototype._read=function(f){if(this._bufferedWrites.length===0)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),!!this._waitingForWrites););},d}(E.Duplex);w.exports=k}).call(v,y(1))},function(w,v,y){w.exports=E;var m=y(8).EventEmitter,b=y(12);b(E,m),E.Readable=y(13),E.Writable=y(27),E.Duplex=y(28),E.Transform=y(29),E.PassThrough=y(30),E.Stream=E;function E(){m.call(this)}n(E,"Stream"),E.prototype.pipe=function(k,F){var d=this;function f(j){k.writable&&k.write(j)===!1&&d.pause&&d.pause()}n(f,"ondata"),d.on("data",f);function x(){d.readable&&d.resume&&d.resume()}n(x,"ondrain"),k.on("drain",x),!k._isStdio&&(!F||F.end!==!1)&&(d.on("end",A),d.on("close",D));var c=!1;function A(){c||(c=!0,k.end())}n(A,"onend");function D(){c||(c=!0,typeof k.destroy=="function"&&k.destroy())}n(D,"onclose");function C(j){if(P(),m.listenerCount(this,"error")===0)throw j}n(C,"onerror"),d.on("error",C),k.on("error",C);function P(){d.removeListener("data",f),k.removeListener("drain",x),d.removeListener("end",A),d.removeListener("close",D),d.removeListener("error",C),k.removeListener("error",C),d.removeListener("end",P),d.removeListener("close",P),k.removeListener("close",P)}return n(P,"cleanup"),d.on("end",P),d.on("close",P),k.on("close",P),k.emit("pipe",d),k}},function(w,v){typeof Object.create=="function"?w.exports=n(function(m,b){m.super_=b,m.prototype=Object.create(b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})},"inherits"):w.exports=n(function(m,b){m.super_=b;var E=n(function(){},"TempCtor");E.prototype=b.prototype,m.prototype=new E,m.prototype.constructor=m},"inherits")},function(w,v,y){(function(m){var b=function(){try{return y(11)}catch{}}();v=w.exports=y(14),v.Stream=b||v,v.Readable=v,v.Writable=y(22),v.Duplex=y(21),v.Transform=y(25),v.PassThrough=y(26),!m.browser&&m.env.READABLE_STREAM==="disable"&&b&&(w.exports=b)}).call(v,y(6))},function(w,v,y){(function(m){w.exports=H;var b=y(15),E=y(16),k;H.ReadableState=et,y(8).EventEmitter;var F=n(function(N,R){return N.listeners(R).length},"EElistenerCount"),d;(function(){try{d=y(11)}catch{}finally{d||(d=y(8).EventEmitter)}})();var f=y(2).Buffer,x=y(17),c=y(18);c.inherits=y(12);var A=y(19),D=void 0;A&&A.debuglog?D=A.debuglog("stream"):D=n(function(){},"debug");var C=y(20),P;c.inherits(H,d);function j(N,R,G){if(typeof N.prependListener=="function")return N.prependListener(R,G);!N._events||!N._events[R]?N.on(R,G):E(N._events[R])?N._events[R].unshift(G):N._events[R]=[G,N._events[R]]}n(j,"prependListener");function et(N,R){k=k||y(21),N=N||{},this.objectMode=!!N.objectMode,R instanceof k&&(this.objectMode=this.objectMode||!!N.readableObjectMode);var G=N.highWaterMark,ot=this.objectMode?16:16*1024;this.highWaterMark=G||G===0?G:ot,this.highWaterMark=~~this.highWaterMark,this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=N.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,N.encoding&&(P||(P=y(24).StringDecoder),this.decoder=new P(N.encoding),this.encoding=N.encoding)}n(et,"ReadableState");function H(N){if(k=k||y(21),!(this instanceof H))return new H(N);this._readableState=new et(N,this),this.readable=!0,N&&typeof N.read=="function"&&(this._read=N.read),d.call(this)}n(H,"Readable"),H.prototype.push=function(N,R){var G=this._readableState;return!G.objectMode&&typeof N=="string"&&(R=R||G.defaultEncoding,R!==G.encoding&&(N=x.from(N,R),R="")),Z(this,G,N,R,!1)},H.prototype.unshift=function(N){var R=this._readableState;return Z(this,R,N,"",!0)},H.prototype.isPaused=function(){return this._readableState.flowing===!1};function Z(N,R,G,ot,dt){var Ft=z(R,G);if(Ft)N.emit("error",Ft);else if(G===null)R.reading=!1,rt(N,R);else if(R.objectMode||G&&G.length>0)if(R.ended&&!dt){var $=new Error("stream.push() after EOF");N.emit("error",$)}else if(R.endEmitted&&dt){var ie=new Error("stream.unshift() after end event");N.emit("error",ie)}else{var wt;R.decoder&&!dt&&!ot&&(G=R.decoder.write(G),wt=!R.objectMode&&G.length===0),dt||(R.reading=!1),wt||(R.flowing&&R.length===0&&!R.sync?(N.emit("data",G),N.read(0)):(R.length+=R.objectMode?1:G.length,dt?R.buffer.unshift(G):R.buffer.push(G),R.needReadable&&ct(N))),gt(N,R)}else dt||(R.reading=!1);return bt(R)}n(Z,"readableAddChunk");function bt(N){return!N.ended&&(N.needReadable||N.length<N.highWaterMark||N.length===0)}n(bt,"needMoreData"),H.prototype.setEncoding=function(N){return P||(P=y(24).StringDecoder),this._readableState.decoder=new P(N),this._readableState.encoding=N,this};var nt=8388608;function xt(N){return N>=nt?N=nt:(N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++),N}n(xt,"computeNewHighWaterMark");function yt(N,R){return N<=0||R.length===0&&R.ended?0:R.objectMode?1:N!==N?R.flowing&&R.length?R.buffer.head.data.length:R.length:(N>R.highWaterMark&&(R.highWaterMark=xt(N)),N<=R.length?N:R.ended?R.length:(R.needReadable=!0,0))}n(yt,"howMuchToRead"),H.prototype.read=function(N){D("read",N),N=parseInt(N,10);var R=this._readableState,G=N;if(N!==0&&(R.emittedReadable=!1),N===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return D("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?Et(this):ct(this),null;if(N=yt(N,R),N===0&&R.ended)return R.length===0&&Et(this),null;var ot=R.needReadable;D("need readable",ot),(R.length===0||R.length-N<R.highWaterMark)&&(ot=!0,D("length less than watermark",ot)),R.ended||R.reading?(ot=!1,D("reading or ended",ot)):ot&&(D("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(N=yt(G,R)));var dt;return N>0?dt=Q(N,R):dt=null,dt===null?(R.needReadable=!0,N=0):R.length-=N,R.length===0&&(R.ended||(R.needReadable=!0),G!==N&&R.ended&&Et(this)),dt!==null&&this.emit("data",dt),dt};function z(N,R){var G=null;return!f.isBuffer(R)&&typeof R!="string"&&R!==null&&R!==void 0&&!N.objectMode&&(G=new TypeError("Invalid non-string/buffer chunk")),G}n(z,"chunkInvalid");function rt(N,R){if(!R.ended){if(R.decoder){var G=R.decoder.end();G&&G.length&&(R.buffer.push(G),R.length+=R.objectMode?1:G.length)}R.ended=!0,ct(N)}}n(rt,"onEofChunk");function ct(N){var R=N._readableState;R.needReadable=!1,R.emittedReadable||(D("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?b(Nt,N):Nt(N))}n(ct,"emitReadable");function Nt(N){D("emit readable"),N.emit("readable"),U(N)}n(Nt,"emitReadable_");function gt(N,R){R.readingMore||(R.readingMore=!0,b(Ct,N,R))}n(gt,"maybeReadMore");function Ct(N,R){for(var G=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(D("maybeReadMore read 0"),N.read(0),G!==R.length);)G=R.length;R.readingMore=!1}n(Ct,"maybeReadMore_"),H.prototype._read=function(N){this.emit("error",new Error("_read() is not implemented"))},H.prototype.pipe=function(N,R){var G=this,ot=this._readableState;switch(ot.pipesCount){case 0:ot.pipes=N;break;case 1:ot.pipes=[ot.pipes,N];break;default:ot.pipes.push(N);break}ot.pipesCount+=1,D("pipe count=%d opts=%j",ot.pipesCount,R);var dt=(!R||R.end!==!1)&&N!==m.stdout&&N!==m.stderr,Ft=dt?ie:le;ot.endEmitted?b(Ft):G.once("end",Ft),N.on("unpipe",$);function $(Y){D("onunpipe"),Y===G&&le()}n($,"onunpipe");function ie(){D("onend"),N.end()}n(ie,"onend");var wt=Ot(G);N.on("drain",wt);var fe=!1;function le(){D("cleanup"),N.removeListener("close",h),N.removeListener("finish",L),N.removeListener("drain",wt),N.removeListener("error",l),N.removeListener("unpipe",$),G.removeListener("end",ie),G.removeListener("end",le),G.removeListener("data",I),fe=!0,ot.awaitDrain&&(!N._writableState||N._writableState.needDrain)&&wt()}n(le,"cleanup");var Ie=!1;G.on("data",I);function I(Y){D("ondata"),Ie=!1;var J=N.write(Y);J===!1&&!Ie&&((ot.pipesCount===1&&ot.pipes===N||ot.pipesCount>1&&Pt(ot.pipes,N)!==-1)&&!fe&&(D("false write response, pause",G._readableState.awaitDrain),G._readableState.awaitDrain++,Ie=!0),G.pause())}n(I,"ondata");function l(Y){D("onerror",Y),B(),N.removeListener("error",l),F(N,"error")===0&&N.emit("error",Y)}n(l,"onerror"),j(N,"error",l);function h(){N.removeListener("finish",L),B()}n(h,"onclose"),N.once("close",h);function L(){D("onfinish"),N.removeListener("close",h),B()}n(L,"onfinish"),N.once("finish",L);function B(){D("unpipe"),G.unpipe(N)}return n(B,"unpipe"),N.emit("pipe",G),ot.flowing||(D("pipe resume"),G.resume()),N};function Ot(N){return function(){var R=N._readableState;D("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&F(N,"data")&&(R.flowing=!0,U(N))}}n(Ot,"pipeOnDrain"),H.prototype.unpipe=function(N){var R=this._readableState;if(R.pipesCount===0)return this;if(R.pipesCount===1)return N&&N!==R.pipes?this:(N||(N=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,N&&N.emit("unpipe",this),this);if(!N){var G=R.pipes,ot=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var dt=0;dt<ot;dt++)G[dt].emit("unpipe",this);return this}var Ft=Pt(R.pipes,N);return Ft===-1?this:(R.pipes.splice(Ft,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),N.emit("unpipe",this),this)},H.prototype.on=function(N,R){var G=d.prototype.on.call(this,N,R);if(N==="data")this._readableState.flowing!==!1&&this.resume();else if(N==="readable"){var ot=this._readableState;!ot.endEmitted&&!ot.readableListening&&(ot.readableListening=ot.needReadable=!0,ot.emittedReadable=!1,ot.reading?ot.length&&ct(this):b(_t,this))}return G},H.prototype.addListener=H.prototype.on;function _t(N){D("readable nexttick read 0"),N.read(0)}n(_t,"nReadingNextTick"),H.prototype.resume=function(){var N=this._readableState;return N.flowing||(D("resume"),N.flowing=!0,Jt(this,N)),this};function Jt(N,R){R.resumeScheduled||(R.resumeScheduled=!0,b(W,N,R))}n(Jt,"resume");function W(N,R){R.reading||(D("resume read 0"),N.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,N.emit("resume"),U(N),R.flowing&&!R.reading&&N.read(0)}n(W,"resume_"),H.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function U(N){var R=N._readableState;for(D("flow",R.flowing);R.flowing&&N.read()!==null;);}n(U,"flow"),H.prototype.wrap=function(N){var R=this._readableState,G=!1,ot=this;N.on("end",function(){if(D("wrapped end"),R.decoder&&!R.ended){var $=R.decoder.end();$&&$.length&&ot.push($)}ot.push(null)}),N.on("data",function($){if(D("wrapped data"),R.decoder&&($=R.decoder.write($)),!(R.objectMode&&$==null)&&!(!R.objectMode&&(!$||!$.length))){var ie=ot.push($);ie||(G=!0,N.pause())}});for(var dt in N)this[dt]===void 0&&typeof N[dt]=="function"&&(this[dt]=function($){return function(){return N[$].apply(N,arguments)}}(dt));var Ft=["error","close","destroy","pause","resume"];return Zt(Ft,function($){N.on($,ot.emit.bind(ot,$))}),ot._read=function($){D("wrapped _read",$),G&&(G=!1,N.resume())},ot},H._fromList=Q;function Q(N,R){if(R.length===0)return null;var G;return R.objectMode?G=R.buffer.shift():!N||N>=R.length?(R.decoder?G=R.buffer.join(""):R.buffer.length===1?G=R.buffer.head.data:G=R.buffer.concat(R.length),R.buffer.clear()):G=ht(N,R.buffer,R.decoder),G}n(Q,"fromList");function ht(N,R,G){var ot;return N<R.head.data.length?(ot=R.head.data.slice(0,N),R.head.data=R.head.data.slice(N)):N===R.head.data.length?ot=R.shift():ot=G?kt(N,R):mt(N,R),ot}n(ht,"fromListPartial");function kt(N,R){var G=R.head,ot=1,dt=G.data;for(N-=dt.length;G=G.next;){var Ft=G.data,$=N>Ft.length?Ft.length:N;if($===Ft.length?dt+=Ft:dt+=Ft.slice(0,N),N-=$,N===0){$===Ft.length?(++ot,G.next?R.head=G.next:R.head=R.tail=null):(R.head=G,G.data=Ft.slice($));break}++ot}return R.length-=ot,dt}n(kt,"copyFromBufferString");function mt(N,R){var G=x.allocUnsafe(N),ot=R.head,dt=1;for(ot.data.copy(G),N-=ot.data.length;ot=ot.next;){var Ft=ot.data,$=N>Ft.length?Ft.length:N;if(Ft.copy(G,G.length-N,0,$),N-=$,N===0){$===Ft.length?(++dt,ot.next?R.head=ot.next:R.head=R.tail=null):(R.head=ot,ot.data=Ft.slice($));break}++dt}return R.length-=dt,G}n(mt,"copyFromBuffer");function Et(N){var R=N._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,b(Rt,R,N))}n(Et,"endReadable");function Rt(N,R){!N.endEmitted&&N.length===0&&(N.endEmitted=!0,R.readable=!1,R.emit("end"))}n(Rt,"endReadableNT");function Zt(N,R){for(var G=0,ot=N.length;G<ot;G++)R(N[G],G)}n(Zt,"forEach");function Pt(N,R){for(var G=0,ot=N.length;G<ot;G++)if(N[G]===R)return G;return-1}n(Pt,"indexOf")}).call(v,y(6))},function(w,v,y){(function(m){!m.version||m.version.indexOf("v0.")===0||m.version.indexOf("v1.")===0&&m.version.indexOf("v1.8.")!==0?w.exports=b:w.exports=m.nextTick;function b(E,k,F,d){if(typeof E!="function")throw new TypeError('"callback" argument must be a function');var f=arguments.length,x,c;switch(f){case 0:case 1:return m.nextTick(E);case 2:return m.nextTick(n(function(){E.call(null,k)},"afterTickOne"));case 3:return m.nextTick(n(function(){E.call(null,k,F)},"afterTickTwo"));case 4:return m.nextTick(n(function(){E.call(null,k,F,d)},"afterTickThree"));default:for(x=new Array(f-1),c=0;c<x.length;)x[c++]=arguments[c];return m.nextTick(n(function(){E.apply(null,x)},"afterTick"))}}n(b,"nextTick")}).call(v,y(6))},function(w,v){var y={}.toString;w.exports=Array.isArray||function(m){return y.call(m)=="[object Array]"}},function(w,v,y){(function(m){var b=y(2),E=b.Buffer,k=b.SlowBuffer,F=b.kMaxLength||2147483647;v.alloc=n(function(f,x,c){if(typeof E.alloc=="function")return E.alloc(f,x,c);if(typeof c=="number")throw new TypeError("encoding must not be number");if(typeof f!="number")throw new TypeError("size must be a number");if(f>F)throw new RangeError("size is too large");var A=c,D=x;D===void 0&&(A=void 0,D=0);var C=new E(f);if(typeof D=="string")for(var P=new E(D,A),j=P.length,et=-1;++et<f;)C[et]=P[et%j];else C.fill(D);return C},"alloc"),v.allocUnsafe=n(function(f){if(typeof E.allocUnsafe=="function")return E.allocUnsafe(f);if(typeof f!="number")throw new TypeError("size must be a number");if(f>F)throw new RangeError("size is too large");return new E(f)},"allocUnsafe"),v.from=n(function(f,x,c){if(typeof E.from=="function"&&(!m.Uint8Array||Uint8Array.from!==E.from))return E.from(f,x,c);if(typeof f=="number")throw new TypeError('"value" argument must not be a number');if(typeof f=="string")return new E(f,x);if(typeof ArrayBuffer<"u"&&f instanceof ArrayBuffer){var A=x;if(arguments.length===1)return new E(f);typeof A>"u"&&(A=0);var D=c;if(typeof D>"u"&&(D=f.byteLength-A),A>=f.byteLength)throw new RangeError("'offset' is out of bounds");if(D>f.byteLength-A)throw new RangeError("'length' is out of bounds");return new E(f.slice(A,A+D))}if(E.isBuffer(f)){var C=new E(f.length);return f.copy(C,0,0,f.length),C}if(f){if(Array.isArray(f)||typeof ArrayBuffer<"u"&&f.buffer instanceof ArrayBuffer||"length"in f)return new E(f);if(f.type==="Buffer"&&Array.isArray(f.data))return new E(f.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},"from"),v.allocUnsafeSlow=n(function(f){if(typeof E.allocUnsafeSlow=="function")return E.allocUnsafeSlow(f);if(typeof f!="number")throw new TypeError("size must be a number");if(f>=F)throw new RangeError("size is too large");return new k(f)},"allocUnsafeSlow")}).call(v,function(){return this}())},function(w,v,y){(function(m){function b(Z){return Array.isArray?Array.isArray(Z):H(Z)==="[object Array]"}n(b,"isArray"),v.isArray=b;function E(Z){return typeof Z=="boolean"}n(E,"isBoolean"),v.isBoolean=E;function k(Z){return Z===null}n(k,"isNull"),v.isNull=k;function F(Z){return Z==null}n(F,"isNullOrUndefined"),v.isNullOrUndefined=F;function d(Z){return typeof Z=="number"}n(d,"isNumber"),v.isNumber=d;function f(Z){return typeof Z=="string"}n(f,"isString"),v.isString=f;function x(Z){return typeof Z=="symbol"}n(x,"isSymbol"),v.isSymbol=x;function c(Z){return Z===void 0}n(c,"isUndefined"),v.isUndefined=c;function A(Z){return H(Z)==="[object RegExp]"}n(A,"isRegExp"),v.isRegExp=A;function D(Z){return typeof Z=="object"&&Z!==null}n(D,"isObject"),v.isObject=D;function C(Z){return H(Z)==="[object Date]"}n(C,"isDate"),v.isDate=C;function P(Z){return H(Z)==="[object Error]"||Z instanceof Error}n(P,"isError"),v.isError=P;function j(Z){return typeof Z=="function"}n(j,"isFunction"),v.isFunction=j;function et(Z){return Z===null||typeof Z=="boolean"||typeof Z=="number"||typeof Z=="string"||typeof Z=="symbol"||typeof Z>"u"}n(et,"isPrimitive"),v.isPrimitive=et,v.isBuffer=m.isBuffer;function H(Z){return Object.prototype.toString.call(Z)}n(H,"objectToString")}).call(v,y(1))},function(w,v){},function(w,v,y){y(2).Buffer;var m=y(17);w.exports=b;function b(){this.head=null,this.tail=null,this.length=0}n(b,"BufferList"),b.prototype.push=function(E){var k={data:E,next:null};this.length>0?this.tail.next=k:this.head=k,this.tail=k,++this.length},b.prototype.unshift=function(E){var k={data:E,next:this.head};this.length===0&&(this.tail=k),this.head=k,++this.length},b.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},b.prototype.clear=function(){this.head=this.tail=null,this.length=0},b.prototype.join=function(E){if(this.length===0)return"";for(var k=this.head,F=""+k.data;k=k.next;)F+=E+k.data;return F},b.prototype.concat=function(E){if(this.length===0)return m.alloc(0);if(this.length===1)return this.head.data;for(var k=m.allocUnsafe(E>>>0),F=this.head,d=0;F;)F.data.copy(k,d),d+=F.data.length,F=F.next;return k}},function(w,v,y){var m=Object.keys||function(C){var P=[];for(var j in C)P.push(j);return P};w.exports=c;var b=y(15),E=y(18);E.inherits=y(12);var k=y(14),F=y(22);E.inherits(c,k);for(var d=m(F.prototype),f=0;f<d.length;f++){var x=d[f];c.prototype[x]||(c.prototype[x]=F.prototype[x])}function c(C){if(!(this instanceof c))return new c(C);k.call(this,C),F.call(this,C),C&&C.readable===!1&&(this.readable=!1),C&&C.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,C&&C.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",A)}n(c,"Duplex");function A(){this.allowHalfOpen||this._writableState.ended||b(D,this)}n(A,"onend");function D(C){C.end()}n(D,"onEndNT")},function(w,v,y){(function(m){w.exports=j;var b=y(15),E=!m.browser&&["v0.10","v0.9."].indexOf(m.version.slice(0,5))>-1?setImmediate:b,k;j.WritableState=C;var F=y(18);F.inherits=y(12);var d={deprecate:y(23)},f;(function(){try{f=y(11)}catch{}finally{f||(f=y(8).EventEmitter)}})();var x=y(2).Buffer,c=y(17);F.inherits(j,f);function A(){}n(A,"nop");function D(W,U,Q){this.chunk=W,this.encoding=U,this.callback=Q,this.next=null}n(D,"WriteReq");function C(W,U){k=k||y(21),W=W||{},this.objectMode=!!W.objectMode,U instanceof k&&(this.objectMode=this.objectMode||!!W.writableObjectMode);var Q=W.highWaterMark,ht=this.objectMode?16:16*1024;this.highWaterMark=Q||Q===0?Q:ht,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var kt=W.decodeStrings===!1;this.decodeStrings=!kt,this.defaultEncoding=W.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(mt){z(U,mt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Jt(this)}n(C,"WritableState"),C.prototype.getBuffer=n(function(){for(var U=this.bufferedRequest,Q=[];U;)Q.push(U),U=U.next;return Q},"getBuffer"),function(){try{Object.defineProperty(C.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(W){return P.call(this,W)?!0:W&&W._writableState instanceof C}})):P=n(function(W){return W instanceof this},"realHasInstance");function j(W){if(k=k||y(21),!P.call(j,this)&&!(this instanceof k))return new j(W);this._writableState=new C(W,this),this.writable=!0,W&&(typeof W.write=="function"&&(this._write=W.write),typeof W.writev=="function"&&(this._writev=W.writev)),f.call(this)}n(j,"Writable"),j.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function et(W,U){var Q=new Error("write after end");W.emit("error",Q),b(U,Q)}n(et,"writeAfterEnd");function H(W,U,Q,ht){var kt=!0,mt=!1;return Q===null?mt=new TypeError("May not write null values to stream"):typeof Q!="string"&&Q!==void 0&&!U.objectMode&&(mt=new TypeError("Invalid non-string/buffer chunk")),mt&&(W.emit("error",mt),b(ht,mt),kt=!1),kt}n(H,"validChunk"),j.prototype.write=function(W,U,Q){var ht=this._writableState,kt=!1,mt=x.isBuffer(W);return typeof U=="function"&&(Q=U,U=null),mt?U="buffer":U||(U=ht.defaultEncoding),typeof Q!="function"&&(Q=A),ht.ended?et(this,Q):(mt||H(this,ht,W,Q))&&(ht.pendingcb++,kt=bt(this,ht,mt,W,U,Q)),kt},j.prototype.cork=function(){var W=this._writableState;W.corked++},j.prototype.uncork=function(){var W=this._writableState;W.corked&&(W.corked--,!W.writing&&!W.corked&&!W.finished&&!W.bufferProcessing&&W.bufferedRequest&&Nt(this,W))},j.prototype.setDefaultEncoding=n(function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+U);return this._writableState.defaultEncoding=U,this},"setDefaultEncoding");function Z(W,U,Q){return!W.objectMode&&W.decodeStrings!==!1&&typeof U=="string"&&(U=c.from(U,Q)),U}n(Z,"decodeChunk");function bt(W,U,Q,ht,kt,mt){Q||(ht=Z(U,ht,kt),x.isBuffer(ht)&&(kt="buffer"));var Et=U.objectMode?1:ht.length;U.length+=Et;var Rt=U.length<U.highWaterMark;if(Rt||(U.needDrain=!0),U.writing||U.corked){var Zt=U.lastBufferedRequest;U.lastBufferedRequest=new D(ht,kt,mt),Zt?Zt.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else nt(W,U,!1,Et,ht,kt,mt);return Rt}n(bt,"writeOrBuffer");function nt(W,U,Q,ht,kt,mt,Et){U.writelen=ht,U.writecb=Et,U.writing=!0,U.sync=!0,Q?W._writev(kt,U.onwrite):W._write(kt,mt,U.onwrite),U.sync=!1}n(nt,"doWrite");function xt(W,U,Q,ht,kt){--U.pendingcb,Q?b(kt,ht):kt(ht),W._writableState.errorEmitted=!0,W.emit("error",ht)}n(xt,"onwriteError");function yt(W){W.writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0}n(yt,"onwriteStateUpdate");function z(W,U){var Q=W._writableState,ht=Q.sync,kt=Q.writecb;if(yt(Q),U)xt(W,Q,ht,U,kt);else{var mt=gt(Q);!mt&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&Nt(W,Q),ht?E(rt,W,Q,mt,kt):rt(W,Q,mt,kt)}}n(z,"onwrite");function rt(W,U,Q,ht){Q||ct(W,U),U.pendingcb--,ht(),Ot(W,U)}n(rt,"afterWrite");function ct(W,U){U.length===0&&U.needDrain&&(U.needDrain=!1,W.emit("drain"))}n(ct,"onwriteDrain");function Nt(W,U){U.bufferProcessing=!0;var Q=U.bufferedRequest;if(W._writev&&Q&&Q.next){var ht=U.bufferedRequestCount,kt=new Array(ht),mt=U.corkedRequestsFree;mt.entry=Q;for(var Et=0;Q;)kt[Et]=Q,Q=Q.next,Et+=1;nt(W,U,!0,U.length,kt,"",mt.finish),U.pendingcb++,U.lastBufferedRequest=null,mt.next?(U.corkedRequestsFree=mt.next,mt.next=null):U.corkedRequestsFree=new Jt(U)}else{for(;Q;){var Rt=Q.chunk,Zt=Q.encoding,Pt=Q.callback,N=U.objectMode?1:Rt.length;if(nt(W,U,!1,N,Rt,Zt,Pt),Q=Q.next,U.writing)break}Q===null&&(U.lastBufferedRequest=null)}U.bufferedRequestCount=0,U.bufferedRequest=Q,U.bufferProcessing=!1}n(Nt,"clearBuffer"),j.prototype._write=function(W,U,Q){Q(new Error("_write() is not implemented"))},j.prototype._writev=null,j.prototype.end=function(W,U,Q){var ht=this._writableState;typeof W=="function"?(Q=W,W=null,U=null):typeof U=="function"&&(Q=U,U=null),W!=null&&this.write(W,U),ht.corked&&(ht.corked=1,this.uncork()),!ht.ending&&!ht.finished&&_t(this,ht,Q)};function gt(W){return W.ending&&W.length===0&&W.bufferedRequest===null&&!W.finished&&!W.writing}n(gt,"needFinish");function Ct(W,U){U.prefinished||(U.prefinished=!0,W.emit("prefinish"))}n(Ct,"prefinish");function Ot(W,U){var Q=gt(U);return Q&&(U.pendingcb===0?(Ct(W,U),U.finished=!0,W.emit("finish")):Ct(W,U)),Q}n(Ot,"finishMaybe");function _t(W,U,Q){U.ending=!0,Ot(W,U),Q&&(U.finished?b(Q):W.once("finish",Q)),U.ended=!0,W.writable=!1}n(_t,"endWritable");function Jt(W){var U=this;this.next=null,this.entry=null,this.finish=function(Q){var ht=U.entry;for(U.entry=null;ht;){var kt=ht.callback;W.pendingcb--,kt(Q),ht=ht.next}W.corkedRequestsFree?W.corkedRequestsFree.next=U:W.corkedRequestsFree=U}}n(Jt,"CorkedRequest")}).call(v,y(6))},function(w,v){(function(y){w.exports=m;function m(E,k){if(b("noDeprecation"))return E;var F=!1;function d(){if(!F){if(b("throwDeprecation"))throw new Error(k);b("traceDeprecation")?console.trace(k):console.warn(k),F=!0}return E.apply(this,arguments)}return n(d,"deprecated"),d}n(m,"deprecate");function b(E){try{if(!y.localStorage)return!1}catch{return!1}var k=y.localStorage[E];return k==null?!1:String(k).toLowerCase()==="true"}n(b,"config")}).call(v,function(){return this}())},function(w,v,y){var m=y(2).Buffer,b=m.isEncoding||function(x){switch(x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(x){if(x&&!b(x))throw new Error("Unknown encoding: "+x)}n(E,"assertEncoding");var k=v.StringDecoder=function(x){switch(this.encoding=(x||"utf8").toLowerCase().replace(/[-_]/,""),E(x),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=d;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=f;break;default:this.write=F;return}this.charBuffer=new m(6),this.charReceived=0,this.charLength=0};k.prototype.write=function(x){for(var c="";this.charLength;){var A=x.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:x.length;if(x.copy(this.charBuffer,this.charReceived,0,A),this.charReceived+=A,this.charReceived<this.charLength)return"";x=x.slice(A,x.length),c=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var C=c.charCodeAt(c.length-1);if(C>=55296&&C<=56319){this.charLength+=this.surrogateSize,c="";continue}if(this.charReceived=this.charLength=0,x.length===0)return c;break}this.detectIncompleteChar(x);var D=x.length;this.charLength&&(x.copy(this.charBuffer,0,x.length-this.charReceived,D),D-=this.charReceived),c+=x.toString(this.encoding,0,D);var D=c.length-1,C=c.charCodeAt(D);if(C>=55296&&C<=56319){var P=this.surrogateSize;return this.charLength+=P,this.charReceived+=P,this.charBuffer.copy(this.charBuffer,P,0,P),x.copy(this.charBuffer,0,0,P),c.substring(0,D)}return c},k.prototype.detectIncompleteChar=function(x){for(var c=x.length>=3?3:x.length;c>0;c--){var A=x[x.length-c];if(c==1&&A>>5==6){this.charLength=2;break}if(c<=2&&A>>4==14){this.charLength=3;break}if(c<=3&&A>>3==30){this.charLength=4;break}}this.charReceived=c},k.prototype.end=function(x){var c="";if(x&&x.length&&(c=this.write(x)),this.charReceived){var A=this.charReceived,D=this.charBuffer,C=this.encoding;c+=D.slice(0,A).toString(C)}return c};function F(x){return x.toString(this.encoding)}n(F,"passThroughWrite");function d(x){this.charReceived=x.length%2,this.charLength=this.charReceived?2:0}n(d,"utf16DetectIncompleteChar");function f(x){this.charReceived=x.length%3,this.charLength=this.charReceived?3:0}n(f,"base64DetectIncompleteChar")},function(w,v,y){w.exports=F;var m=y(21),b=y(18);b.inherits=y(12),b.inherits(F,m);function E(f){this.afterTransform=function(x,c){return k(f,x,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}n(E,"TransformState");function k(f,x,c){var A=f._transformState;A.transforming=!1;var D=A.writecb;if(!D)return f.emit("error",new Error("no writecb in Transform class"));A.writechunk=null,A.writecb=null,c!=null&&f.push(c),D(x);var C=f._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&f._read(C.highWaterMark)}n(k,"afterTransform");function F(f){if(!(this instanceof F))return new F(f);m.call(this,f),this._transformState=new E(this);var x=this;this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(c,A){d(x,c,A)}):d(x)})}n(F,"Transform"),F.prototype.push=function(f,x){return this._transformState.needTransform=!1,m.prototype.push.call(this,f,x)},F.prototype._transform=function(f,x,c){throw new Error("_transform() is not implemented")},F.prototype._write=function(f,x,c){var A=this._transformState;if(A.writecb=c,A.writechunk=f,A.writeencoding=x,!A.transforming){var D=this._readableState;(A.needTransform||D.needReadable||D.length<D.highWaterMark)&&this._read(D.highWaterMark)}},F.prototype._read=function(f){var x=this._transformState;x.writechunk!==null&&x.writecb&&!x.transforming?(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform)):x.needTransform=!0};function d(f,x,c){if(x)return f.emit("error",x);c!=null&&f.push(c);var A=f._writableState,D=f._transformState;if(A.length)throw new Error("Calling transform done when ws.length != 0");if(D.transforming)throw new Error("Calling transform done when still transforming");return f.push(null)}n(d,"done")},function(w,v,y){w.exports=E;var m=y(25),b=y(18);b.inherits=y(12),b.inherits(E,m);function E(k){if(!(this instanceof E))return new E(k);m.call(this,k)}n(E,"PassThrough"),E.prototype._transform=function(k,F,d){d(null,k)}},function(w,v,y){w.exports=y(22)},function(w,v,y){w.exports=y(21)},function(w,v,y){w.exports=y(25)},function(w,v,y){w.exports=y(26)},function(w,v,y){var m=y(32),b=y(33),E=y(38),k=y(39),F=y(40),d=y(41),f=y(42),x=Object.prototype.toString;function c(C){if(!(this instanceof c))return new c(C);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},C||{});var P=this.options;P.raw&&P.windowBits>=0&&P.windowBits<16&&(P.windowBits=-P.windowBits,P.windowBits===0&&(P.windowBits=-15)),P.windowBits>=0&&P.windowBits<16&&!(C&&C.windowBits)&&(P.windowBits+=32),P.windowBits>15&&P.windowBits<48&&(P.windowBits&15)===0&&(P.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var j=m.inflateInit2(this.strm,P.windowBits);if(j!==k.Z_OK)throw new Error(F[j]);this.header=new f,m.inflateGetHeader(this.strm,this.header)}n(c,"Inflate"),c.prototype.push=function(C,P){var j=this.strm,et=this.options.chunkSize,H=this.options.dictionary,Z,bt,nt,xt,yt,z,rt=!1;if(this.ended)return!1;bt=P===~~P?P:P===!0?k.Z_FINISH:k.Z_NO_FLUSH,typeof C=="string"?j.input=E.binstring2buf(C):x.call(C)==="[object ArrayBuffer]"?j.input=new Uint8Array(C):j.input=C,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new b.Buf8(et),j.next_out=0,j.avail_out=et),Z=m.inflate(j,k.Z_NO_FLUSH),Z===k.Z_NEED_DICT&&H&&(typeof H=="string"?z=E.string2buf(H):x.call(H)==="[object ArrayBuffer]"?z=new Uint8Array(H):z=H,Z=m.inflateSetDictionary(this.strm,z)),Z===k.Z_BUF_ERROR&&rt===!0&&(Z=k.Z_OK,rt=!1),Z!==k.Z_STREAM_END&&Z!==k.Z_OK)return this.onEnd(Z),this.ended=!0,!1;j.next_out&&(j.avail_out===0||Z===k.Z_STREAM_END||j.avail_in===0&&(bt===k.Z_FINISH||bt===k.Z_SYNC_FLUSH))&&(this.options.to==="string"?(nt=E.utf8border(j.output,j.next_out),xt=j.next_out-nt,yt=E.buf2string(j.output,nt),j.next_out=xt,j.avail_out=et-xt,xt&&b.arraySet(j.output,j.output,nt,xt,0),this.onData(yt)):this.onData(b.shrinkBuf(j.output,j.next_out))),j.avail_in===0&&j.avail_out===0&&(rt=!0)}while((j.avail_in>0||j.avail_out===0)&&Z!==k.Z_STREAM_END);return Z===k.Z_STREAM_END&&(bt=k.Z_FINISH),bt===k.Z_FINISH?(Z=m.inflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===k.Z_OK):(bt===k.Z_SYNC_FLUSH&&(this.onEnd(k.Z_OK),j.avail_out=0),!0)},c.prototype.onData=function(C){this.chunks.push(C)},c.prototype.onEnd=function(C){C===k.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function A(C,P){var j=new c(P);if(j.push(C,!0),j.err)throw j.msg||F[j.err];return j.result}n(A,"inflate");function D(C,P){return P=P||{},P.raw=!0,A(C,P)}n(D,"inflateRaw"),v.Inflate=c,v.inflate=A,v.inflateRaw=D,v.ungzip=A},function(w,v,y){var m=y(33),b=y(34),E=y(35),k=y(36),F=y(37),d=0,f=1,x=2,c=4,A=5,D=6,C=0,P=1,j=2,et=-2,H=-3,Z=-4,bt=-5,nt=8,xt=1,yt=2,z=3,rt=4,ct=5,Nt=6,gt=7,Ct=8,Ot=9,_t=10,Jt=11,W=12,U=13,Q=14,ht=15,kt=16,mt=17,Et=18,Rt=19,Zt=20,Pt=21,N=22,R=23,G=24,ot=25,dt=26,Ft=27,$=28,ie=29,wt=30,fe=31,le=32,Ie=852,I=592,l=15,h=l;function L(V){return(V>>>24&255)+(V>>>8&65280)+((V&65280)<<8)+((V&255)<<24)}n(L,"zswap32");function B(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}n(B,"InflateState");function Y(V){var at;return!V||!V.state?et:(at=V.state,V.total_in=V.total_out=at.total=0,V.msg="",at.wrap&&(V.adler=at.wrap&1),at.mode=xt,at.last=0,at.havedict=0,at.dmax=32768,at.head=null,at.hold=0,at.bits=0,at.lencode=at.lendyn=new m.Buf32(Ie),at.distcode=at.distdyn=new m.Buf32(I),at.sane=1,at.back=-1,C)}n(Y,"inflateResetKeep");function J(V){var at;return!V||!V.state?et:(at=V.state,at.wsize=0,at.whave=0,at.wnext=0,Y(V))}n(J,"inflateReset");function Lt(V,at){var S,ut;return!V||!V.state||(ut=V.state,at<0?(S=0,at=-at):(S=(at>>4)+1,at<48&&(at&=15)),at&&(at<8||at>15))?et:(ut.window!==null&&ut.wbits!==at&&(ut.window=null),ut.wrap=S,ut.wbits=at,J(V))}n(Lt,"inflateReset2");function At(V,at){var S,ut;return V?(ut=new B,V.state=ut,ut.window=null,S=Lt(V,at),S!==C&&(V.state=null),S):et}n(At,"inflateInit2");function jt(V){return At(V,h)}n(jt,"inflateInit");var Qt=!0,Mt,ke;function on(V){if(Qt){var at;for(Mt=new m.Buf32(512),ke=new m.Buf32(32),at=0;at<144;)V.lens[at++]=8;for(;at<256;)V.lens[at++]=9;for(;at<280;)V.lens[at++]=7;for(;at<288;)V.lens[at++]=8;for(F(f,V.lens,0,288,Mt,0,V.work,{bits:9}),at=0;at<32;)V.lens[at++]=5;F(x,V.lens,0,32,ke,0,V.work,{bits:5}),Qt=!1}V.lencode=Mt,V.lenbits=9,V.distcode=ke,V.distbits=5}n(on,"fixedtables");function Ze(V,at,S,ut){var Ut,st=V.state;return st.window===null&&(st.wsize=1<<st.wbits,st.wnext=0,st.whave=0,st.window=new m.Buf8(st.wsize)),ut>=st.wsize?(m.arraySet(st.window,at,S-st.wsize,st.wsize,0),st.wnext=0,st.whave=st.wsize):(Ut=st.wsize-st.wnext,Ut>ut&&(Ut=ut),m.arraySet(st.window,at,S-ut,Ut,st.wnext),ut-=Ut,ut?(m.arraySet(st.window,at,S-ut,ut,0),st.wnext=ut,st.whave=st.wsize):(st.wnext+=Ut,st.wnext===st.wsize&&(st.wnext=0),st.whave<st.wsize&&(st.whave+=Ut))),0}n(Ze,"updatewindow");function Xe(V,at){var S,ut,Ut,st,pe,ft,$t,q,K,sn,Wt,pt,Ye,Ce,Xt=0,Dt,oe,he,se,an,Ke,qt,de,re=new m.Buf8(4),Oe,Ee,Tn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return et;S=V.state,S.mode===W&&(S.mode=U),pe=V.next_out,Ut=V.output,$t=V.avail_out,st=V.next_in,ut=V.input,ft=V.avail_in,q=S.hold,K=S.bits,sn=ft,Wt=$t,de=C;t:for(;;)switch(S.mode){case xt:if(S.wrap===0){S.mode=U;break}for(;K<16;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(S.wrap&2&&q===35615){S.check=0,re[0]=q&255,re[1]=q>>>8&255,S.check=E(S.check,re,2,0),q=0,K=0,S.mode=yt;break}if(S.flags=0,S.head&&(S.head.done=!1),!(S.wrap&1)||(((q&255)<<8)+(q>>8))%31){V.msg="incorrect header check",S.mode=wt;break}if((q&15)!==nt){V.msg="unknown compression method",S.mode=wt;break}if(q>>>=4,K-=4,qt=(q&15)+8,S.wbits===0)S.wbits=qt;else if(qt>S.wbits){V.msg="invalid window size",S.mode=wt;break}S.dmax=1<<qt,V.adler=S.check=1,S.mode=q&512?_t:W,q=0,K=0;break;case yt:for(;K<16;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(S.flags=q,(S.flags&255)!==nt){V.msg="unknown compression method",S.mode=wt;break}if(S.flags&57344){V.msg="unknown header flags set",S.mode=wt;break}S.head&&(S.head.text=q>>8&1),S.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,S.check=E(S.check,re,2,0)),q=0,K=0,S.mode=z;case z:for(;K<32;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.head&&(S.head.time=q),S.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,re[2]=q>>>16&255,re[3]=q>>>24&255,S.check=E(S.check,re,4,0)),q=0,K=0,S.mode=rt;case rt:for(;K<16;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.head&&(S.head.xflags=q&255,S.head.os=q>>8),S.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,S.check=E(S.check,re,2,0)),q=0,K=0,S.mode=ct;case ct:if(S.flags&1024){for(;K<16;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.length=q,S.head&&(S.head.extra_len=q),S.flags&512&&(re[0]=q&255,re[1]=q>>>8&255,S.check=E(S.check,re,2,0)),q=0,K=0}else S.head&&(S.head.extra=null);S.mode=Nt;case Nt:if(S.flags&1024&&(pt=S.length,pt>ft&&(pt=ft),pt&&(S.head&&(qt=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),m.arraySet(S.head.extra,ut,st,pt,qt)),S.flags&512&&(S.check=E(S.check,ut,pt,st)),ft-=pt,st+=pt,S.length-=pt),S.length))break t;S.length=0,S.mode=gt;case gt:if(S.flags&2048){if(ft===0)break t;pt=0;do qt=ut[st+pt++],S.head&&qt&&S.length<65536&&(S.head.name+=String.fromCharCode(qt));while(qt&&pt<ft);if(S.flags&512&&(S.check=E(S.check,ut,pt,st)),ft-=pt,st+=pt,qt)break t}else S.head&&(S.head.name=null);S.length=0,S.mode=Ct;case Ct:if(S.flags&4096){if(ft===0)break t;pt=0;do qt=ut[st+pt++],S.head&&qt&&S.length<65536&&(S.head.comment+=String.fromCharCode(qt));while(qt&&pt<ft);if(S.flags&512&&(S.check=E(S.check,ut,pt,st)),ft-=pt,st+=pt,qt)break t}else S.head&&(S.head.comment=null);S.mode=Ot;case Ot:if(S.flags&512){for(;K<16;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(q!==(S.check&65535)){V.msg="header crc mismatch",S.mode=wt;break}q=0,K=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),V.adler=S.check=0,S.mode=W;break;case _t:for(;K<32;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}V.adler=S.check=L(q),q=0,K=0,S.mode=Jt;case Jt:if(S.havedict===0)return V.next_out=pe,V.avail_out=$t,V.next_in=st,V.avail_in=ft,S.hold=q,S.bits=K,j;V.adler=S.check=1,S.mode=W;case W:if(at===A||at===D)break t;case U:if(S.last){q>>>=K&7,K-=K&7,S.mode=Ft;break}for(;K<3;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}switch(S.last=q&1,q>>>=1,K-=1,q&3){case 0:S.mode=Q;break;case 1:if(on(S),S.mode=Zt,at===D){q>>>=2,K-=2;break t}break;case 2:S.mode=mt;break;case 3:V.msg="invalid block type",S.mode=wt}q>>>=2,K-=2;break;case Q:for(q>>>=K&7,K-=K&7;K<32;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if((q&65535)!==(q>>>16^65535)){V.msg="invalid stored block lengths",S.mode=wt;break}if(S.length=q&65535,q=0,K=0,S.mode=ht,at===D)break t;case ht:S.mode=kt;case kt:if(pt=S.length,pt){if(pt>ft&&(pt=ft),pt>$t&&(pt=$t),pt===0)break t;m.arraySet(Ut,ut,st,pt,pe),ft-=pt,st+=pt,$t-=pt,pe+=pt,S.length-=pt;break}S.mode=W;break;case mt:for(;K<14;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(S.nlen=(q&31)+257,q>>>=5,K-=5,S.ndist=(q&31)+1,q>>>=5,K-=5,S.ncode=(q&15)+4,q>>>=4,K-=4,S.nlen>286||S.ndist>30){V.msg="too many length or distance symbols",S.mode=wt;break}S.have=0,S.mode=Et;case Et:for(;S.have<S.ncode;){for(;K<3;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.lens[Tn[S.have++]]=q&7,q>>>=3,K-=3}for(;S.have<19;)S.lens[Tn[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,Oe={bits:S.lenbits},de=F(d,S.lens,0,19,S.lencode,0,S.work,Oe),S.lenbits=Oe.bits,de){V.msg="invalid code lengths set",S.mode=wt;break}S.have=0,S.mode=Rt;case Rt:for(;S.have<S.nlen+S.ndist;){for(;Xt=S.lencode[q&(1<<S.lenbits)-1],Dt=Xt>>>24,oe=Xt>>>16&255,he=Xt&65535,!(Dt<=K);){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(he<16)q>>>=Dt,K-=Dt,S.lens[S.have++]=he;else{if(he===16){for(Ee=Dt+2;K<Ee;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(q>>>=Dt,K-=Dt,S.have===0){V.msg="invalid bit length repeat",S.mode=wt;break}qt=S.lens[S.have-1],pt=3+(q&3),q>>>=2,K-=2}else if(he===17){for(Ee=Dt+3;K<Ee;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}q>>>=Dt,K-=Dt,qt=0,pt=3+(q&7),q>>>=3,K-=3}else{for(Ee=Dt+7;K<Ee;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}q>>>=Dt,K-=Dt,qt=0,pt=11+(q&127),q>>>=7,K-=7}if(S.have+pt>S.nlen+S.ndist){V.msg="invalid bit length repeat",S.mode=wt;break}for(;pt--;)S.lens[S.have++]=qt}}if(S.mode===wt)break;if(S.lens[256]===0){V.msg="invalid code -- missing end-of-block",S.mode=wt;break}if(S.lenbits=9,Oe={bits:S.lenbits},de=F(f,S.lens,0,S.nlen,S.lencode,0,S.work,Oe),S.lenbits=Oe.bits,de){V.msg="invalid literal/lengths set",S.mode=wt;break}if(S.distbits=6,S.distcode=S.distdyn,Oe={bits:S.distbits},de=F(x,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,Oe),S.distbits=Oe.bits,de){V.msg="invalid distances set",S.mode=wt;break}if(S.mode=Zt,at===D)break t;case Zt:S.mode=Pt;case Pt:if(ft>=6&&$t>=258){V.next_out=pe,V.avail_out=$t,V.next_in=st,V.avail_in=ft,S.hold=q,S.bits=K,k(V,Wt),pe=V.next_out,Ut=V.output,$t=V.avail_out,st=V.next_in,ut=V.input,ft=V.avail_in,q=S.hold,K=S.bits,S.mode===W&&(S.back=-1);break}for(S.back=0;Xt=S.lencode[q&(1<<S.lenbits)-1],Dt=Xt>>>24,oe=Xt>>>16&255,he=Xt&65535,!(Dt<=K);){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(oe&&(oe&240)===0){for(se=Dt,an=oe,Ke=he;Xt=S.lencode[Ke+((q&(1<<se+an)-1)>>se)],Dt=Xt>>>24,oe=Xt>>>16&255,he=Xt&65535,!(se+Dt<=K);){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}q>>>=se,K-=se,S.back+=se}if(q>>>=Dt,K-=Dt,S.back+=Dt,S.length=he,oe===0){S.mode=dt;break}if(oe&32){S.back=-1,S.mode=W;break}if(oe&64){V.msg="invalid literal/length code",S.mode=wt;break}S.extra=oe&15,S.mode=N;case N:if(S.extra){for(Ee=S.extra;K<Ee;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.length+=q&(1<<S.extra)-1,q>>>=S.extra,K-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=R;case R:for(;Xt=S.distcode[q&(1<<S.distbits)-1],Dt=Xt>>>24,oe=Xt>>>16&255,he=Xt&65535,!(Dt<=K);){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if((oe&240)===0){for(se=Dt,an=oe,Ke=he;Xt=S.distcode[Ke+((q&(1<<se+an)-1)>>se)],Dt=Xt>>>24,oe=Xt>>>16&255,he=Xt&65535,!(se+Dt<=K);){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}q>>>=se,K-=se,S.back+=se}if(q>>>=Dt,K-=Dt,S.back+=Dt,oe&64){V.msg="invalid distance code",S.mode=wt;break}S.offset=he,S.extra=oe&15,S.mode=G;case G:if(S.extra){for(Ee=S.extra;K<Ee;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}S.offset+=q&(1<<S.extra)-1,q>>>=S.extra,K-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){V.msg="invalid distance too far back",S.mode=wt;break}S.mode=ot;case ot:if($t===0)break t;if(pt=Wt-$t,S.offset>pt){if(pt=S.offset-pt,pt>S.whave&&S.sane){V.msg="invalid distance too far back",S.mode=wt;break}pt>S.wnext?(pt-=S.wnext,Ye=S.wsize-pt):Ye=S.wnext-pt,pt>S.length&&(pt=S.length),Ce=S.window}else Ce=Ut,Ye=pe-S.offset,pt=S.length;pt>$t&&(pt=$t),$t-=pt,S.length-=pt;do Ut[pe++]=Ce[Ye++];while(--pt);S.length===0&&(S.mode=Pt);break;case dt:if($t===0)break t;Ut[pe++]=S.length,$t--,S.mode=Pt;break;case Ft:if(S.wrap){for(;K<32;){if(ft===0)break t;ft--,q|=ut[st++]<<K,K+=8}if(Wt-=$t,V.total_out+=Wt,S.total+=Wt,Wt&&(V.adler=S.check=S.flags?E(S.check,Ut,Wt,pe-Wt):b(S.check,Ut,Wt,pe-Wt)),Wt=$t,(S.flags?q:L(q))!==S.check){V.msg="incorrect data check",S.mode=wt;break}q=0,K=0}S.mode=$;case $:if(S.wrap&&S.flags){for(;K<32;){if(ft===0)break t;ft--,q+=ut[st++]<<K,K+=8}if(q!==(S.total&4294967295)){V.msg="incorrect length check",S.mode=wt;break}q=0,K=0}S.mode=ie;case ie:de=P;break t;case wt:de=H;break t;case fe:return Z;case le:default:return et}return V.next_out=pe,V.avail_out=$t,V.next_in=st,V.avail_in=ft,S.hold=q,S.bits=K,(S.wsize||Wt!==V.avail_out&&S.mode<wt&&(S.mode<Ft||at!==c))&&Ze(V,V.output,V.next_out,Wt-V.avail_out),sn-=V.avail_in,Wt-=V.avail_out,V.total_in+=sn,V.total_out+=Wt,S.total+=Wt,S.wrap&&Wt&&(V.adler=S.check=S.flags?E(S.check,Ut,Wt,V.next_out-Wt):b(S.check,Ut,Wt,V.next_out-Wt)),V.data_type=S.bits+(S.last?64:0)+(S.mode===W?128:0)+(S.mode===Zt||S.mode===ht?256:0),(sn===0&&Wt===0||at===c)&&de===C&&(de=bt),de}n(Xe,"inflate");function nr(V){if(!V||!V.state)return et;var at=V.state;return at.window&&(at.window=null),V.state=null,C}n(nr,"inflateEnd");function rr(V,at){var S;return!V||!V.state||(S=V.state,(S.wrap&2)===0)?et:(S.head=at,at.done=!1,C)}n(rr,"inflateGetHeader");function ir(V,at){var S=at.length,ut,Ut,st;return!V||!V.state||(ut=V.state,ut.wrap!==0&&ut.mode!==Jt)?et:ut.mode===Jt&&(Ut=1,Ut=b(Ut,at,S,0),Ut!==ut.check)?H:(st=Ze(V,at,S,S),st?(ut.mode=fe,Z):(ut.havedict=1,C))}n(ir,"inflateSetDictionary"),v.inflateReset=J,v.inflateReset2=Lt,v.inflateResetKeep=Y,v.inflateInit=jt,v.inflateInit2=At,v.inflate=Xe,v.inflateEnd=nr,v.inflateGetHeader=rr,v.inflateSetDictionary=ir,v.inflateInfo="pako inflate (from Nodeca project)"},function(w,v){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";v.assign=function(E){for(var k=Array.prototype.slice.call(arguments,1);k.length;){var F=k.shift();if(!!F){if(typeof F!="object")throw new TypeError(F+"must be non-object");for(var d in F)F.hasOwnProperty(d)&&(E[d]=F[d])}}return E},v.shrinkBuf=function(E,k){return E.length===k?E:E.subarray?E.subarray(0,k):(E.length=k,E)};var m={arraySet:function(E,k,F,d,f){if(k.subarray&&E.subarray){E.set(k.subarray(F,F+d),f);return}for(var x=0;x<d;x++)E[f+x]=k[F+x]},flattenChunks:function(E){var k,F,d,f,x,c;for(d=0,k=0,F=E.length;k<F;k++)d+=E[k].length;for(c=new Uint8Array(d),f=0,k=0,F=E.length;k<F;k++)x=E[k],c.set(x,f),f+=x.length;return c}},b={arraySet:function(E,k,F,d,f){for(var x=0;x<d;x++)E[f+x]=k[F+x]},flattenChunks:function(E){return[].concat.apply([],E)}};v.setTyped=function(E){E?(v.Buf8=Uint8Array,v.Buf16=Uint16Array,v.Buf32=Int32Array,v.assign(v,m)):(v.Buf8=Array,v.Buf16=Array,v.Buf32=Array,v.assign(v,b))},v.setTyped(y)},function(w,v){function y(m,b,E,k){for(var F=m&65535|0,d=m>>>16&65535|0,f=0;E!==0;){f=E>2e3?2e3:E,E-=f;do F=F+b[k++]|0,d=d+F|0;while(--f);F%=65521,d%=65521}return F|d<<16|0}n(y,"adler32"),w.exports=y},function(w,v){function y(){for(var E,k=[],F=0;F<256;F++){E=F;for(var d=0;d<8;d++)E=E&1?3988292384^E>>>1:E>>>1;k[F]=E}return k}n(y,"makeTable");var m=y();function b(E,k,F,d){var f=m,x=d+F;E^=-1;for(var c=d;c<x;c++)E=E>>>8^f[(E^k[c])&255];return E^-1}n(b,"crc32"),w.exports=b},function(w,v){var y=30,m=12;w.exports=n(function(E,k){var F,d,f,x,c,A,D,C,P,j,et,H,Z,bt,nt,xt,yt,z,rt,ct,Nt,gt,Ct,Ot,_t;F=E.state,d=E.next_in,Ot=E.input,f=d+(E.avail_in-5),x=E.next_out,_t=E.output,c=x-(k-E.avail_out),A=x+(E.avail_out-257),D=F.dmax,C=F.wsize,P=F.whave,j=F.wnext,et=F.window,H=F.hold,Z=F.bits,bt=F.lencode,nt=F.distcode,xt=(1<<F.lenbits)-1,yt=(1<<F.distbits)-1;t:do{Z<15&&(H+=Ot[d++]<<Z,Z+=8,H+=Ot[d++]<<Z,Z+=8),z=bt[H&xt];e:for(;;){if(rt=z>>>24,H>>>=rt,Z-=rt,rt=z>>>16&255,rt===0)_t[x++]=z&65535;else if(rt&16){ct=z&65535,rt&=15,rt&&(Z<rt&&(H+=Ot[d++]<<Z,Z+=8),ct+=H&(1<<rt)-1,H>>>=rt,Z-=rt),Z<15&&(H+=Ot[d++]<<Z,Z+=8,H+=Ot[d++]<<Z,Z+=8),z=nt[H&yt];n:for(;;){if(rt=z>>>24,H>>>=rt,Z-=rt,rt=z>>>16&255,rt&16){if(Nt=z&65535,rt&=15,Z<rt&&(H+=Ot[d++]<<Z,Z+=8,Z<rt&&(H+=Ot[d++]<<Z,Z+=8)),Nt+=H&(1<<rt)-1,Nt>D){E.msg="invalid distance too far back",F.mode=y;break t}if(H>>>=rt,Z-=rt,rt=x-c,Nt>rt){if(rt=Nt-rt,rt>P&&F.sane){E.msg="invalid distance too far back",F.mode=y;break t}if(gt=0,Ct=et,j===0){if(gt+=C-rt,rt<ct){ct-=rt;do _t[x++]=et[gt++];while(--rt);gt=x-Nt,Ct=_t}}else if(j<rt){if(gt+=C+j-rt,rt-=j,rt<ct){ct-=rt;do _t[x++]=et[gt++];while(--rt);if(gt=0,j<ct){rt=j,ct-=rt;do _t[x++]=et[gt++];while(--rt);gt=x-Nt,Ct=_t}}}else if(gt+=j-rt,rt<ct){ct-=rt;do _t[x++]=et[gt++];while(--rt);gt=x-Nt,Ct=_t}for(;ct>2;)_t[x++]=Ct[gt++],_t[x++]=Ct[gt++],_t[x++]=Ct[gt++],ct-=3;ct&&(_t[x++]=Ct[gt++],ct>1&&(_t[x++]=Ct[gt++]))}else{gt=x-Nt;do _t[x++]=_t[gt++],_t[x++]=_t[gt++],_t[x++]=_t[gt++],ct-=3;while(ct>2);ct&&(_t[x++]=_t[gt++],ct>1&&(_t[x++]=_t[gt++]))}}else if((rt&64)===0){z=nt[(z&65535)+(H&(1<<rt)-1)];continue n}else{E.msg="invalid distance code",F.mode=y;break t}break}}else if((rt&64)===0){z=bt[(z&65535)+(H&(1<<rt)-1)];continue e}else if(rt&32){F.mode=m;break t}else{E.msg="invalid literal/length code",F.mode=y;break t}break}}while(d<f&&x<A);ct=Z>>3,d-=ct,Z-=ct<<3,H&=(1<<Z)-1,E.next_in=d,E.next_out=x,E.avail_in=d<f?5+(f-d):5-(d-f),E.avail_out=x<A?257+(A-x):257-(x-A),F.hold=H,F.bits=Z},"inflate_fast")},function(w,v,y){var m=y(33),b=15,E=852,k=592,F=0,d=1,f=2,x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],A=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],D=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=n(function(P,j,et,H,Z,bt,nt,xt){var yt=xt.bits,z=0,rt=0,ct=0,Nt=0,gt=0,Ct=0,Ot=0,_t=0,Jt=0,W=0,U,Q,ht,kt,mt,Et=null,Rt=0,Zt,Pt=new m.Buf16(b+1),N=new m.Buf16(b+1),R=null,G=0,ot,dt,Ft;for(z=0;z<=b;z++)Pt[z]=0;for(rt=0;rt<H;rt++)Pt[j[et+rt]]++;for(gt=yt,Nt=b;Nt>=1&&Pt[Nt]===0;Nt--);if(gt>Nt&&(gt=Nt),Nt===0)return Z[bt++]=1<<24|64<<16|0,Z[bt++]=1<<24|64<<16|0,xt.bits=1,0;for(ct=1;ct<Nt&&Pt[ct]===0;ct++);for(gt<ct&&(gt=ct),_t=1,z=1;z<=b;z++)if(_t<<=1,_t-=Pt[z],_t<0)return-1;if(_t>0&&(P===F||Nt!==1))return-1;for(N[1]=0,z=1;z<b;z++)N[z+1]=N[z]+Pt[z];for(rt=0;rt<H;rt++)j[et+rt]!==0&&(nt[N[j[et+rt]]++]=rt);if(P===F?(Et=R=nt,Zt=19):P===d?(Et=x,Rt-=257,R=c,G-=257,Zt=256):(Et=A,R=D,Zt=-1),W=0,rt=0,z=ct,mt=bt,Ct=gt,Ot=0,ht=-1,Jt=1<<gt,kt=Jt-1,P===d&&Jt>E||P===f&&Jt>k)return 1;for(;;){ot=z-Ot,nt[rt]<Zt?(dt=0,Ft=nt[rt]):nt[rt]>Zt?(dt=R[G+nt[rt]],Ft=Et[Rt+nt[rt]]):(dt=32+64,Ft=0),U=1<<z-Ot,Q=1<<Ct,ct=Q;do Q-=U,Z[mt+(W>>Ot)+Q]=ot<<24|dt<<16|Ft|0;while(Q!==0);for(U=1<<z-1;W&U;)U>>=1;if(U!==0?(W&=U-1,W+=U):W=0,rt++,--Pt[z]===0){if(z===Nt)break;z=j[et+nt[rt]]}if(z>gt&&(W&kt)!==ht){for(Ot===0&&(Ot=gt),mt+=ct,Ct=z-Ot,_t=1<<Ct;Ct+Ot<Nt&&(_t-=Pt[Ct+Ot],!(_t<=0));)Ct++,_t<<=1;if(Jt+=1<<Ct,P===d&&Jt>E||P===f&&Jt>k)return 1;ht=W&kt,Z[ht]=gt<<24|Ct<<16|mt-bt|0}}return W!==0&&(Z[mt+W]=z-Ot<<24|64<<16|0),xt.bits=gt,0},"inflate_table")},function(w,v,y){var m=y(33),b=!0,E=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E=!1}for(var k=new m.Buf8(256),F=0;F<256;F++)k[F]=F>=252?6:F>=248?5:F>=240?4:F>=224?3:F>=192?2:1;k[254]=k[254]=1,v.string2buf=function(f){var x,c,A,D,C,P=f.length,j=0;for(D=0;D<P;D++)c=f.charCodeAt(D),(c&64512)===55296&&D+1<P&&(A=f.charCodeAt(D+1),(A&64512)===56320&&(c=65536+(c-55296<<10)+(A-56320),D++)),j+=c<128?1:c<2048?2:c<65536?3:4;for(x=new m.Buf8(j),C=0,D=0;C<j;D++)c=f.charCodeAt(D),(c&64512)===55296&&D+1<P&&(A=f.charCodeAt(D+1),(A&64512)===56320&&(c=65536+(c-55296<<10)+(A-56320),D++)),c<128?x[C++]=c:c<2048?(x[C++]=192|c>>>6,x[C++]=128|c&63):c<65536?(x[C++]=224|c>>>12,x[C++]=128|c>>>6&63,x[C++]=128|c&63):(x[C++]=240|c>>>18,x[C++]=128|c>>>12&63,x[C++]=128|c>>>6&63,x[C++]=128|c&63);return x};function d(f,x){if(x<65537&&(f.subarray&&E||!f.subarray&&b))return String.fromCharCode.apply(null,m.shrinkBuf(f,x));for(var c="",A=0;A<x;A++)c+=String.fromCharCode(f[A]);return c}n(d,"buf2binstring"),v.buf2binstring=function(f){return d(f,f.length)},v.binstring2buf=function(f){for(var x=new m.Buf8(f.length),c=0,A=x.length;c<A;c++)x[c]=f.charCodeAt(c);return x},v.buf2string=function(f,x){var c,A,D,C,P=x||f.length,j=new Array(P*2);for(A=0,c=0;c<P;){if(D=f[c++],D<128){j[A++]=D;continue}if(C=k[D],C>4){j[A++]=65533,c+=C-1;continue}for(D&=C===2?31:C===3?15:7;C>1&&c<P;)D=D<<6|f[c++]&63,C--;if(C>1){j[A++]=65533;continue}D<65536?j[A++]=D:(D-=65536,j[A++]=55296|D>>10&1023,j[A++]=56320|D&1023)}return d(j,A)},v.utf8border=function(f,x){var c;for(x=x||f.length,x>f.length&&(x=f.length),c=x-1;c>=0&&(f[c]&192)===128;)c--;return c<0||c===0?x:c+k[f[c]]>x?c:x}},function(w,v){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(w,v){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(w,v){function y(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n(y,"ZStream"),w.exports=y},function(w,v){function y(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n(y,"GZheader"),w.exports=y}])})})(Ir);const Ma=da(Ir.exports),Pa=ha({__proto__:null,default:Ma},[Ir.exports]),ja=ze("<div>Loading filesystem ...</div>"),Ba=ze("<div></div>"),Ua=ze('<div><div>file: </div><textarea cols="80" rows="8"></textarea><div><button>Save</button></div></div>'),Vi=nn(Pa),be=!!globalThis.debug;function Za(){async function O(){const _={};return Vi.install(_),be&&console.log("FileSystem.jsx: BrowserFS.configure"),await Vi.configure({fs:"MountableFileSystem",options:{"/":{fs:"IndexedDB",options:{}}}}),_.require("fs")}return n(O,"getFs"),ae(_a,{getFs:O,get fallbackLoading(){return ja.cloneNode(!0)},get children(){return ae(za,{})}})}n(Za,"EditMenuWrapper");function za(){const O=br();if(be&&console.log("EditMenu: fs",O),!O)throw new Error("no filesystem");(async()=>{be&&console.log("readdir /",await O.promises.readdir("/"));const v={"/hello.txt":`hello world
`,"/readme.md":`# readme

write me
`,"/src/index.js":`console.log("hello")
`,"/src/App.jsx":`export default function App(props) {
  return <div>hello</div>
}
`,"/demo/src/index.js":`console.log("hello")
`};for(const[y,m]of Object.entries(v))if(await O.promises.exists(y)==!1){const b=y.split("/");for(let E=2;E<b.length;E++){const k=b.slice(0,E).join("/");be&&console.log("mkdir:","i",E,"len",b.length,"dirPath",k);try{await O.promises.mkdir(k)}catch{}}be&&console.log("writeFile",y),await O.promises.writeFile(y,m,"utf8")}else be&&console.log("file exists:",y);be&&console.log("readdir /",await O.promises.readdir("/"))})();const[_,w]=Fr("");return(()=>{const v=Ba.cloneNode(!0);return Ve(v,ae(Ca,{fs:O,setFile:w}),null),Ve(v,ae(Wa,{getFile:_}),null),v})()}n(za,"EditMenu");function Wa(O){const _=br();be&&console.log("EditMenu.Editor: fs",_);let w;ca(async()=>{if(!_)throw new Error("no filesystem");if(!w)throw new Error("no textarea");const y=O.getFile();if(be&&console.log("EditMenu.Editor: file",y),y){const m=y?await _.promises.readFile(y,"utf8"):"";w.value=m}},[O.getFile]);async function v(){if(!_)throw new Error("no filesystem");if(!w)throw new Error("no textarea");const y=O.getFile();be&&console.log("Editor saveFile: textarea",w);const m=w.value;be&&console.log("Editor saveFile: file",y,m),await _.promises.writeFile(y,m,"utf8"),be&&console.log("Editor saveFile: done")}return n(v,"saveFile"),(()=>{const y=Ua.cloneNode(!0),m=y.firstChild;m.firstChild;const b=m.nextSibling,E=b.nextSibling,k=E.firstChild;Ve(m,()=>O.getFile(),null);const F=w;return typeof F=="function"?la(F,b):w=b,k.$$click=v,y})()}n(Wa,"Editor");Xi(["click"]);export{za as EditMenu,Za as default};
